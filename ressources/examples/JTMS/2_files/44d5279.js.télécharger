(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{1732:function(e,t,n){"use strict";n(9),n(10),n(7),n(11),n(12);var r=n(2),o=n(3);n(19);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a={computed:{authContext:function(){var e=this.$route.query.context;return"app"===e?"app":"iframe"===e||window.parent!==window?"iframe":"web"},isEmbedded:function(){return"web"!==this.authContext}},methods:{emitToParent:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});window.parent!==window&&window.parent.postMessage(t,"*"),window.flutter_inappwebview?window.flutter_inappwebview.callHandler("AppChannel",JSON.stringify(t)):window.AppChannel&&window.AppChannel.postMessage(JSON.stringify(t))},emitClose:function(){"web"!==this.authContext&&this.emitToParent("close")},emitLoginSuccess:function(e){if("app"!==this.authContext){if("iframe"===this.authContext){var t={type:"login_success",loginToken:e};window.parent!==window&&window.parent.postMessage(t,"*"),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("onLoginSuccess",t),window.LoginChannel&&window.LoginChannel.postMessage(JSON.stringify(t))}}else{var n="jobsthatmakesense://jobs.makesense.org/auth?loginToken=".concat(encodeURIComponent(e));window.location.href=n}},emitOnboardingComplete:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("app"!==e.authContext){t.next=7;break}return t.next=3,e.$store.dispatch("auth/createLoginToken");case 3:return n=t.sent,r="jobsthatmakesense://jobs.makesense.org/onboarding-complete?loginToken=".concat(encodeURIComponent(n)),window.location.href=r,t.abrupt("return");case 7:"iframe"===e.authContext&&(o={type:"onboarding_complete"},window.parent!==window&&window.parent.postMessage(o,"*"),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("onOnboardingComplete",o),window.OnboardingChannel&&window.OnboardingChannel.postMessage(JSON.stringify(o)));case 8:case"end":return t.stop()}}),t)})))()},handleLoginTokenEmission:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==e.authContext){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$store.dispatch("auth/createLoginToken");case 5:n=t.sent,e.emitLoginSuccess(n),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Error creating login token:",t.t0),e.$sentry.captureException(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}}},2889:function(e,t,n){"use strict";n.r(t);n(9),n(10),n(7),n(11),n(12);var r=n(2),o=n(3),c=(n(22),n(53),n(19),n(8)),w=n(224),l=n(1732);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"RegisterPage",components:{Sign:w.a},mixins:[l.a],layout:"immersive",data:function(){return{success:!1}},head:function(){return{title:this.$t("page_head_title_register"),meta:[{hid:"description",name:"description",content:this.$t("page_head_description_register")}]}},meta:{group:"auth_register",title:"page_head_title_register"},computed:d(d({},Object(c.c)("account",["getAccount","getProfile"])),Object(c.c)("form",["getForm"])),watch:{getAccount:function(){this.redirect()}},methods:{onSuccess:function(data){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.success=!0,window.scrollTo(0,0),"applicant"===data.accountType){t.next=5;break}return t.next=5,e.handleLoginTokenEmission();case 5:e.getAccount&&e.getProfile&&e.redirect();case 6:case"end":return t.stop()}}),t)})))()},redirect:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){return setTimeout(e,1e3)}));case 2:e.$route.query.continue?e.$router.push(e.localePath(e.$route.query.continue)):e.getAccount&&e.getProfile&&e.success&&(e.$route.query.redirect?(n=e.$route.query.redirect,r=new URL(n).pathname+new URL(n).search,e.$router.push(e.localePath(r))):void 0!==e.getProfile.type&&"applicant"===e.getProfile.type?(o=e.$route.query.context||"auth",e.$router.push({path:e.localePath("/onboarding?context=".concat(o))})):void 0===e.getProfile.type||"recruiter"!==e.getProfile.type&&"programProvider"!==e.getProfile.type?e.$router.push({path:e.localePath("/")}):e.$router.push({path:e.localePath("/workspace")}));case 3:case"end":return t.stop()}}),t)})))()}}},m=n(0),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return e.success?t("mks-loading"):t("Sign",{attrs:{type:"register",defaultEmail:e.$route.query.email||"",userType:e.$route.query.type||"applicant",context:e.$route.query.context||""},on:{success:e.onSuccess}})}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=44d5279.js.map