<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Télécharger Job-Joy</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 560px; margin: 2rem auto; padding: 0 1rem; line-height: 1.5; }
    h1 { font-size: 1.35rem; }
    .pitch { font-size: 0.95rem; color: #333; margin: 1rem 0 1.5rem; }
    .version { font-size: 0.95rem; color: #666; margin: 0.5rem 0 1rem; }
    a.dl { display: inline-block; padding: 0.6rem 1.2rem; background: #238636; color: #fff; text-decoration: none; border-radius: 6px; font-weight: 600; margin: 0.5rem 0; }
    a.dl:hover { background: #2ea043; }
    .loading { color: #666; }
    .error { color: #cf2222; }
    .note { font-size: 0.85rem; color: #666; margin-top: 1.5rem; }
  </style>
</head>
<body>
  <h1>Job-Joy</h1>

  <div class="pitch">
    <p>Tu es abonné à LinkedIn, APEC, Welcome to the Jungle, Job that Make Sense… Ta boîte se remplit de notifications, d’offres en doublon, et dans 90 % des fiches tu te demandes pourquoi tu perds ton temps. Et pourtant, une pépite peut s’y cacher.</p>
    <p>Job-Joy relève ta messagerie, repère les emails utiles (par expéditeur), en extrait les offres et les centralise dans une base Airtable — en dédoublonnant. Il récupère le texte complet de chaque offre (sans pubs ni « afficher la suite »), le fait évaluer par une IA qui connaît ton profil (expériences, compétences, appétences), et calcule un score selon tes critères.</p>
    <p>Résultat : ta BAL se vide de ces notifications, toutes les offres sont au même endroit, et tu ne lis plus que celles qui correspondent vraiment à ta recherche — sans perdre ton temps ni ta patience.</p>
  </div>

  <p id="version" class="version loading">Chargement…</p>
  <p id="link-wrap" style="display: none;"><a id="dl" class="dl" href="#">Télécharger pour Windows</a></p>
  <p id="error" class="error" style="display: none;"></p>
  <p class="note">Installateur Windows (.exe). Après installation, lancez l'application depuis le raccourci (Bureau ou Menu Démarrer).</p>

  <script>
    // À configurer : remplacez par votre dépôt GitHub (ex. : 'votre-username/job-joy')
    var GITHUB_REPO = 'AlainMeunierFr/job-joy';

    function byId(id) { return document.getElementById(id); }
    function show(el) { el.style.display = ''; }
    function hide(el) { el.style.display = 'none'; }

    fetch('https://api.github.com/repos/' + GITHUB_REPO + '/releases/latest')
      .then(function (r) {
        if (!r.ok) throw new Error('Aucune release trouvée (vérifiez GITHUB_REPO dans telecharger.html)');
        return r.json();
      })
      .then(function (release) {
        var tag = release.tag_name || '';
        var assets = release.assets || [];
        var winAsset = assets.find(function (a) {
          var n = (a.name || '').toLowerCase();
          return n.endsWith('.exe') || n.endsWith('.msi');
        });
        byId('version').textContent = 'Version ' + tag;
        byId('version').className = 'version';
        if (winAsset) {
          var a = byId('dl');
          a.href = winAsset.browser_download_url;
          a.textContent = 'Télécharger pour Windows';
          show(byId('link-wrap'));
        } else {
          byId('version').textContent = 'Version ' + tag + ' — aucun installateur Windows dans cette release.';
        }
      })
      .catch(function (err) {
        byId('version').className = 'version error';
        byId('version').textContent = '';
        byId('error').textContent = err.message || 'Impossible de charger la dernière version.';
        show(byId('error'));
      });
  </script>
</body>
</html>
