(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1732:function(e,t,n){"use strict";n(9),n(10),n(7),n(11),n(12);var r=n(2),o=n(3);n(19);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a={computed:{authContext:function(){var e=this.$route.query.context;return"app"===e?"app":"iframe"===e||window.parent!==window?"iframe":"web"},isEmbedded:function(){return"web"!==this.authContext}},methods:{emitToParent:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});window.parent!==window&&window.parent.postMessage(t,"*"),window.flutter_inappwebview?window.flutter_inappwebview.callHandler("AppChannel",JSON.stringify(t)):window.AppChannel&&window.AppChannel.postMessage(JSON.stringify(t))},emitClose:function(){"web"!==this.authContext&&this.emitToParent("close")},emitLoginSuccess:function(e){if("app"!==this.authContext){if("iframe"===this.authContext){var t={type:"login_success",loginToken:e};window.parent!==window&&window.parent.postMessage(t,"*"),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("onLoginSuccess",t),window.LoginChannel&&window.LoginChannel.postMessage(JSON.stringify(t))}}else{var n="jobsthatmakesense://jobs.makesense.org/auth?loginToken=".concat(encodeURIComponent(e));window.location.href=n}},emitOnboardingComplete:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("app"!==e.authContext){t.next=7;break}return t.next=3,e.$store.dispatch("auth/createLoginToken");case 3:return n=t.sent,r="jobsthatmakesense://jobs.makesense.org/onboarding-complete?loginToken=".concat(encodeURIComponent(n)),window.location.href=r,t.abrupt("return");case 7:"iframe"===e.authContext&&(o={type:"onboarding_complete"},window.parent!==window&&window.parent.postMessage(o,"*"),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("onOnboardingComplete",o),window.OnboardingChannel&&window.OnboardingChannel.postMessage(JSON.stringify(o)));case 8:case"end":return t.stop()}}),t)})))()},handleLoginTokenEmission:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==e.authContext){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$store.dispatch("auth/createLoginToken");case 5:n=t.sent,e.emitLoginSuccess(n),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Error creating login token:",t.t0),e.$sentry.captureException(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}}},2871:function(e,t,n){"use strict";n.r(t);n(9),n(10),n(7),n(11),n(12);var r=n(2),o=n(3),c=(n(19),n(17),n(15),n(8)),l=n(224),w=n(1732);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"LoginPage",components:{Sign:l.a},mixins:[w.a],layout:"immersive",data:function(){return{success:!1}},head:function(){return{title:this.$t("page_head_title_login"),meta:[{hid:"description",name:"description",content:this.$t("page_head_description_login")}]}},meta:{group:"auth_login"},computed:d(d({},Object(c.c)("account",["getAccount","getProfile"])),Object(c.c)("form",["getForm"])),watch:{getProfile:function(data){this.redirect()}},methods:{onSuccess:function(data){this.success=!0,window.scrollTo(0,0),this.getAccount&&this.getProfile&&this.redirect()},redirect:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.$route.query.continue||""===e.$route.query.continue){t.next=6;break}return t.next=3,e.handleLoginTokenEmission();case 3:e.$route.query.continue.includes("http")?window.location.href=e.$route.query.continue:e.$router.push(e.localePath(e.$route.query.continue)),t.next=27;break;case 6:if(!(e.getAccount&&e.getProfile&&e.success)){t.next=27;break}if(n="/",void 0===e.getProfile.type||"recruiter"!==e.getProfile.type&&"programProvider"!==e.getProfile.type){t.next=14;break}return t.next=11,e.handleLoginTokenEmission();case 11:n="/workspace",t.next=26;break;case 14:if("applicant"!==e.getProfile.type){t.next=26;break}if(o=e.$store.getters["account/getProfileCompletion"],c=["contracts","currentPosition","displayName","firstName","lastName","professionalSituation","professions"],!(null==o||null===(r=o.tasks)||void 0===r?void 0:r.some((function(e){return c.includes(e.key)})))){t.next=23;break}l=e.$route.query.context||"auth",n="/onboarding?context=".concat(l),t.next=26;break;case 23:return t.next=25,e.handleLoginTokenEmission();case 25:n="/profile";case 26:e.$router.push({path:e.localePath(n)});case 27:case"end":return t.stop()}}),t)})))()}}},m=n(0),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return e.success?t("mks-loading"):t("Sign",{attrs:{type:"login",context:e.$route.query.context||""},on:{success:e.onSuccess}})}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=70f3907.js.map