//15.186.3-es2019 2026-02-19T10:08:36.136Z (caf5bfce2506d)
var CS_CONF={"collectionEnabled":true,"useSentry":false,"projectId":16416,"status":1,"hostnames":["welcometothejungle.com","solutions.welcometothejungle.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"^prc\\-","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":1,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-eu1.az.contentsquare.net","malkaRecordingDomain":"k-eu1.az.contentsquare.net","staticResourceManagerDomain":"srm.aa.contentsquare.net","voc":{"siteId":null,"enabled":0}};
var CS_INTEGRATIONS_CONF = {"youtube":{"settings":["enableVideoStarted","enableVideoPaused","enableVideoCompleted","enableVideoPlayDuration"]}};
/* integration-youtube 2.6.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Youtube","dvarPrefix":"VA_YT_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-youtube-contentsquare","version":"2.6.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function u(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var r=t(0);const a=function(e){let n,t,i,u;if(o((function(){const o=e.name;n=e.version;const r=o.replace("@contentsquare/integration-","");t=r+"-"+n;let a="-contentsquare";u=new RegExp(a+"$").test(r),i=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),u||(a="-cap",u=new RegExp(a+"$").test(r),i=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),u)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),c=a.parameterName,d=a.snippetBuildName,l=a.snippetVersion;o((function(){const e=r.displayName,n=r.dvarPrefix;var t,a;t=e,a=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+a);const s=i(c,"settings"),f=(p=s,Array.isArray(p)?s:[]);var p;const m=f.includes("enableVideoStarted"),w=f.includes("enableVideoPaused"),b=f.includes("enableVideoCompleted"),g=f.includes("enableVideoPlayDuration"),y=f.includes("enableVideoQuality"),v=f.includes("enableVolumeChanged"),h=f.includes("enableVideoMuted");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),u(d,`Dynamic variable with ${e} and value ${t} sent`)}const O='iframe[src^="https://www.youtube.com/embed/"]',S='iframe[src^="https://www.youtube-nocookie.com/embed/"]';let N=!1,x=document.querySelectorAll(O);function V(){o((function(){const e=[];let n="",t=0,i="",u=0,r=0,a=0;window.addEventListener("message",(function(c){const l=c.data;"https://www.youtube.com"!==c.origin&&"https://www.youtube-nocookie.com"!==c.origin||!l||o((function(){const o=function(e){let n;try{n=JSON.parse(e)}catch(e){return!1}return n}(l);if(o&&o.info&&(o.info.videoData&&o.info.videoData.video_id&&(n=o.info.videoData.video_id),o.info.duration&&(t=o.info.duration),t&&n)){if(void 0!==o.info.playerState&&(i=o.info.playerState,!isNaN(i))){let t="",o="";if(b&&0===i?(t="complete_",o="Video completed"):m&&1===i?(t="play_",o="Video started"):w&&2===i&&(t="pause_",o="Video paused"),t&&o){const i=t+n;-1===e.indexOf(i)&&(e.push(i),_(o,"Video ID : "+n))}}if("infoDelivery"==o.event){if(y&&o.info.playbackQuality&&!o.info.duration){const e=o.info.playbackQuality;e&&_("Video quality","Video ID : "+n+" - Quality : "+e)}if(h&&o.info.muted){const t="muted_"+n;-1===e.indexOf(t)&&(e.push(t),_("Video muted","Video ID : "+n))}if(v&&void 0!==o.info.volume){const t="initialvolume_"+n;if(-1===e.indexOf(t)&&(e.push(t),r=o.info.volume),a=o.info.volume,a!=r){const t="volumechanged_"+n;-1===e.indexOf(t)&&(e.push(t),a=r,_("Video volume changed","Video ID : "+n))}}if(g&&o.info.currentTime&&(u=o.info.currentTime,!isNaN(u))){u=Math.round(u);const o=Math.round(u/t*100);let i="";if(o>=25&&(i="25"),o>=50&&(i="50"),o>=75&&(i="75"),100===o&&(i="100"),i){const t="videoduration_"+i+"_"+n;-1===e.indexOf(t)&&(e.push(t),_("Video play view duration","Video ID : "+n+" : "+i+"%"))}}}}}),d)}));for(let e=0;e<x.length;e++){const n=x[e];n.contentWindow&&"function"==typeof n.contentWindow.postMessage&&(N?n.contentWindow.postMessage('{"event":"listening"}',"https://www.youtube-nocookie.com"):n.contentWindow.postMessage('{"event":"listening"}',"https://www.youtube.com"))}}),d)}if(0===x.length&&(x=document.querySelectorAll(S),x.length>0&&(N=!0)),0===x.length){const e=new MutationObserver((function(){o((function(){if(document.querySelector(O)||document.querySelector(S)){x=document.querySelectorAll(O),0===x.length&&(x=document.querySelectorAll(S),x.length>0&&(N=!0)),e.disconnect();for(let e=0;e<x.length;e++)x[e].addEventListener("load",(function(e){V()}))}}),d)}));e.observe(document.documentElement,{childList:!0,subtree:!0})}else setTimeout((function(){V()}),500)}),d)}]);
(()=>{var ru=Object.defineProperty;var nu=(s,r,t)=>r in s?ru(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var Ee=(s,r,t)=>nu(s,typeof r!="symbol"?r+"":r,t);var pe={};pe.d=(s,r)=>{for(var t in r)pe.o(r,t)&&!pe.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};pe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();pe.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);pe.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Wn={};pe.r(Wn);pe.d(Wn,{getRequestParameters:()=>Ap});function Cs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var at=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function Xt(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function vs(s){return s===parseInt(s,10)}function W(s){return Z(s)&&(typeof s=="string"||s instanceof csString)}function nr(s){return typeof s=="boolean"}function fi(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function Nt(s){return Z(s)&&s!==null}function Yn(s){return typeof s=="object"&&s!==null}function ou(s,r,t){return vs(s)&&s>=r&&s<=t}function yn(s){for(let r in s)return!1;return!0}function Ce(s){return typeof s=="function"}function yr(s){return s instanceof Element}function ee(s){return s instanceof Error}function Xn(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Lr={[at.debug]:0,[at.warn]:1,[at.implementation]:1,[at.error]:2,[at.critical]:3},st={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function au(s){st=s}var x=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return _s(n,o.bind(this))(...c)}}};function _s(s,r){return function(...t){try{let e=r.apply(this,t);return Z(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>st.error(ee(i)?i:new Error(i),s)):e}catch(e){try{st.error(ee(e)?e:new Error(e),s)}catch{}}}}function ct(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var wi=typeof window=="undefined";function cu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof pe.g!="undefined"?pe.g:typeof process!="undefined"?process:Function("return this")()}var et=cu();function Kn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function zo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function ac(s){let r=et.atob(s);return Kn(r)}function En(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Go(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){st.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?ac(e[1]):Kn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var cc=typeof performance!="undefined"&&!!performance.now,qo=cc?()=>performance.now():()=>csDate.now(),lu=(()=>{var s,r;return cc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),Jn=34164e6,N={now(){return Math.round(qo()+lu)},elapsed(){return qo()}};function Wo(){return Math.floor(N.now()/1e3)}function lc(){return typeof et.Promise=="function"}function hu(){var s;return typeof crypto!="undefined"&&Ce((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Yo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Ut(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ai(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var uu=Number.MAX_SAFE_INTEGER||9007199254740991,ws={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=uu){return Math.floor(Math.random()*s)}};function or(s,r){let t,e,i,n,o,c=null,l=d=>{let f=N.elapsed();if(!d&&c!==null){let y=r-(f-c);if(y>=1){i=et.csSetTimeout(l,y);return}}let m=f-n;i=null,c=null,n=null,o=s.apply(t,[m,...e])},h=function(){if(t=this,e=arguments,n){c=N.elapsed();return}return n=N.elapsed(),i=et.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(et.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(et.csClearTimeout(i),i=null)},h}var Rt=(()=>{class s{static setGlobalService(t){s.globalService=t}static VE(t){this.UE.test(t)||st.error(`Invalid metric name: "${t}". Must contain only letters with optional hyphens or dots between words.`)}static validateParameterName(t){return!/^https?:\/\/.+/.test(t)&&!this.jE.test(t)?(st.error(`Invalid parameter name: "${t}". Must start with letters and can contain letters or numbers after hyphens, dots, or colons.`),!1):!0}constructor(t){this.name=t,this.values={},s.VE(t)}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=csArray.prototype.map.call(i,o=>({name:this.name,parameter:`${t===""?"":`${t}.`}${o}`,value:Math.round(e[o])}));return s.globalService.push(n),this.reset(),n.length>0}}return s.globalService=null,s.UE=/^[a-zA-Z]+([-.][a-zA-Z]+)*$/,s.jE=/^[a-zA-Z]+([-.:_|][a-zA-Z0-9]+)*$/,ct([x()],s.prototype,"flush",null),s})(),ut=(()=>{class s extends Rt{constructor(t,e=100){super(t),this.HE=e,this.values={},e&&(this.debouncedFlush=or(()=>this.flush(),this.HE))}count(t,e=1){Rt.globalService&&(this.values[t]||Rt.validateParameterName(t),this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),ei=(()=>{class s extends Rt{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e,this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){if(this.count===0)return!1;let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>i===n)),i=>{delete this.values[i]}),super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Yi=(()=>{class s extends Rt{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,d;if(!Rt.globalService)return;this.values[`${t}.count`]||Rt.validateParameterName(t);let f=m=>this.values[`${t}.${m}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[d=`${t}.total`])!==null&&n!==void 0||(h[d]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=f("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=f("total")/f("count")}}return s})(),du=(()=>{class s extends Rt{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;Rt.globalService&&(this.values[e]||Rt.validateParameterName(e),(i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),fu=(()=>{class s extends Rt{constructor(t,e={iterations:10,interval:2e3}){super(t),this.zd=e,this.Yo=0,this.xe=null,this.Xo=[],this.values={}}push(t){document.visibilityState!=="hidden"&&(this.Yo+=t,this.xe||this.BE())}BE(){this.xe=window.csSetInterval(()=>{csArray.prototype.push.call(this.Xo,this.Yo),this.Yo=0,this.Xo.length>=this.zd.iterations&&this.xe&&csClearInterval(this.xe)},this.zd.interval)}flush(t){return this.xe&&(csClearInterval(this.xe),this.xe=null),csArray.prototype.forEach.call(this.Xo,(e,i)=>{this.values[`interval.${i+1}`]=e}),this.Xo=[],this.Yo=0,super.flush(t)}}return s})(),pu=(()=>{class s extends Rt{constructor(){super("upload-size"),this.$c=new Map}add(t,e,i){if(t===0)return;try{e=`${csString.prototype.substring.call(csString.prototype.replace.call(new csURL(e).pathname,/[^a-z0-9]+/g,"-"),1)||"home"}|${i}`,e=csString.prototype.toLowerCase.call(csString.prototype.replace.call(e,/^v2-/,""))}catch{st.error(`Invalid URL for upload size metric: ${e}`);return}let n=this.$c.get(e)||{count:0,total:0,max:0,average:0};n.count++,n.total+=t,n.max=Math.max(n.max,t),n.average=n.total/n.count,this.$c.set(e,n)}flush(t){if(Rt.globalService===null||isNaN(+t))return!1;let e=[];return this.$c.forEach((i,n)=>{csArray.prototype.forEach.call(Object.keys(i),o=>{let c=`${n}.${o}.${t}`;Rt.validateParameterName(c),csArray.prototype.push.call(e,{name:this.name,parameter:c,value:Math.round(i[o])})})}),Rt.globalService.push(e),!0}}return ct([x()],s.prototype,"flush",null),s})(),U={counters:{commandsFromIntegrations:new ut("commands-from-integrations"),commandsFromCSTC:new ut("commands-from-cstc"),commandsFromIframe:new ut("commands-from-iframe"),commandApplied:new ut("command-applied"),commandError:new ut("command-error"),commandMisuse:new ut("command-misuse"),CSTCSnippetUsed:new ut("cstc-snippet-used"),redactedPII:new ut("redacted-pii"),pageAnonymisation:new ut("page-anonymisation"),patchedNativeFunctions:new ut("patched-native-functions"),pureWindowState:new ut("pure-window-state"),sensitiveElements:new ut("sensitive-elements"),cspErrors:new ut("csp-errors"),networkRequests:new ut("network-requests"),webVitalsErrors:new ut("web-vitals-errors"),trackedFeatures:new ut("tracked-features"),longTasks:new ei("long-tasks"),errors:new ut("errors"),methodPerformance:new Yi("perf"),transferSize:new ei("transfer-size",["max","average"]),downloadTime:new ei("download-time",["average"]),blockingTime:new ei("blocking-time"),inpContribution:new ei("inp-contribution"),tasks:new Yi("tasks"),availableFeatures:new du("available-features"),dom:new Yi("dom",["total"]),mutations:new fu("mutations"),requestTimeouts:new ut("request-timeouts"),requestErrors:new ut("request-errors"),requestCounts:new ut("request-counter"),payloadSize:new pu,featureUsage:new ut("feature-usage"),inpLoaf:new Yi("inp-loaf",["max","average"]),iframeError:new ut("iframe-error")},setService(s){Rt.setGlobalService(s)},normalizeParameter(s){return csString.prototype.toLowerCase.call(csString.prototype.replace.call(csString.prototype.replace.call(s,/([a-z])([A-Z])/g,"$1-$2"),/([A-Z])([A-Z][a-z])/g,"$1-$2"))}},Ti=(()=>{class s{constructor(){this.Ko=0}get length(){return this.Ko}get isEmpty(){return!this.Ws}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.Ko++,this.cn?this.cn=this.cn[1]=[t,void 0]:this.cn=this.Ws=[t,void 0]}pop(){if(!this.Ws)return null;this.Ko--;let t=this.Ws[0];return this.Ws=this.Ws[1],this.Ws||(this.cn=void 0),t}forEach(t){let e=this.Ws;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.Ko=0,this.Ws=this.cn=void 0}}return s})(),Sn=0,Qn=s=>{Sn++,csQueueMicrotask(()=>Ie(()=>{try{s()}finally{Sn--}},[Qt.MicroTask,"queueMicrotask"]))},ar=new Ti,cr=new Ti;function Gt(s,r="high"){ar.isEmpty&&cr.isEmpty&&hc(gu),r==="high"?cr.push(Xo(s)):ar.push(Xo(s))}function hc(s,r=10){r===0?Qn(s):csQueueMicrotask(()=>hc(s,r-1))}function gu(){for(;!cr.isEmpty;)cr.pop()();for(;!ar.isEmpty;)ar.pop()()}async function uc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Gt(t))}function Xo(s){return function(){try{s.apply(window,arguments)}catch(r){st.critical(r)}}}var ir="null",Xe=null,dc=[],mu=()=>{var s;return wi||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!wi&&mu()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Xe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{vn({type:"UXA_EVENT",event:s.detail})}),Xe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===ir)return;ir=s.data.sessionId,csArray.prototype.forEach.call(dc,r=>r()),Xe==null||Xe.postMessage({type:"CONNECTED",sessionId:ir})}}));function yu(s){wi||(ir!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(dc,s)))}function vn(s){Xe==null||Xe.postMessage(s)}function pi(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ze(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Eu(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function fc(s,r){let t=[];return Eu(s,r,e=>csArray.prototype.push.call(t,e)),t}function Q(s,r){if(Su(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Su(s){return s.length>=0}function bi(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function vu(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function pc(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function _u(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function Ko(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function As(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function wu(s){return csArray.isArray(s)&&s.length>0}var Ri=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Se=(()=>{class s extends Ri{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Jo=(()=>{class s extends Ri{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),ve=(()=>{class s extends Ri{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=N.elapsed();t(),this.count++;let i=N.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=N.elapsed();return()=>{this.count++;let e=N.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Au=(()=>{class s extends Ri{constructor(){super("INP","Value: {value}")}getData(){return{value:xt.tasks.eventListener.max}}}return s})(),xt={general:{category:"General",nbEvents:new Se("Nb of Events"),pendingTasks:new Se("Pending Tasks"),pendingEvents:new Se("Pending Tasks"),nbOfMutationObservers:new Jo("Nb of Mutation Observers"),inp:new Au},mutations:{category:"Mutations",initialDOM:new ve("Initial DOM"),pendingMutations:new Se("Nb of Mutations scheduled"),serializedMutations:new ve("Serialized Mutations"),count:new Se("Mutation Count"),elementMutationObserved:new Jo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new ve("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Se("Nb of Hidden Elements "),nbElements:new Se("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Se("Tasks"),errors:new Se("Errors"),timer:new ve("Timers"),microtask:new ve("Microtasks"),mutationObserver:new ve("MutationObserver"),monkeyPatch:new ve("MonkeyPatch"),eventListener:new ve("EventListener"),intersectionObserver:new ve("Intersection")}};function Tu(){let s=null;yu(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(xt),n=>xt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Ri));vn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ie(()=>{let n=fc(Ze(e,o=>Ze(o,c=>c.getData())),o=>o);vn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[Qt.Timer,"performance-counter-interval"])},1e3))})}var Qt=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),kt=null,bu=["click","tap","keyup","keydown","pointerup","pointerdown"];async function Ie(s,r,t=null){if(kt&&r[0]!==Qt.MicroTask)return s();t&&(kt=t),kt||(kt={type:r[0],elapsed:0},xt.tasks.tasks.increase());try{kt.elapsed+=Ru(s)}catch(e){xt.tasks.errors.increase(),st.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Sn<=0&&(xt.tasks[kt.type].elapsed(kt.elapsed),kt.elapsed>50&&(U.counters.longTasks.push(kt.elapsed),U.counters.blockingTime.push(kt.elapsed-50)),U.counters.tasks.add(r[0],kt.elapsed),csArray.prototype.includes.call(bu,r[1])&&U.counters.inpContribution.push(kt.elapsed),kt=null)}}function Ru(s){let r=N.elapsed();return s(),N.elapsed()-r}var Vr,Cu="cs-native-frame";var He={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function gc(s,r){let t=Cs(window,s);return function(e,i){return t(()=>Ie(e,[r,s]),i)}}window.csSetTimeout=gc("setTimeout",Qt.Timer);window.csSetInterval=gc("setInterval",Qt.Timer);window.csQueueMicrotask=(Vr=Cs(window,"queueMicrotask"))!==null&&Vr!==void 0?Vr:setTimeout;window.csClearTimeout=Cs(window,"clearTimeout");window.csClearInterval=Cs(window,"clearInterval");window.csFileReader=Cs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Iu(){let s=document.createElement("iframe");s.id=Cu,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Pu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Ou(s,r,t){let e=Pu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function mc(s){var r,t;Object.keys(He.constructors).forEach(i=>{window[He.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Du(s);let e=s.MutationObserver;("Prototype"in window||Mu())&&(e=(t=(r=Cs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=Qo(window.IntersectionObserver,Qt.IntersectionObserver),window.csMutationObserver=Qo(e,Qt.MutationObserver),Vs("csNode",He.nodeProperties,s.Node.prototype,"get"),Vs("csElement",He.elementProperties,s.Element.prototype,"get"),Vs("csElement",He.elementPropertiesValues,s.Element.prototype,"value",!1),Vs("csHTMLImageElement",He.imageProperties,s.HTMLImageElement.prototype,"set"),Vs("csEvent",He.eventProperties,s.Event.prototype,"get"),Vs("csNavigator",He.navigatorProperties,s.navigator,"value")}function Vs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Ou(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Zn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Nu(){try{let s=Iu();return s?(window.CSPureWindow=s,mc(window.CSPureWindow),!0):!1}catch(s){return Zn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Nu())try{mc(et)}catch(s){Zn("Critical",`failed to copy references from window: ${s.message}`)}function Mu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Du(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Qo(s,r){try{let t=function(e,i){return new s((o,c)=>{Ie(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return Zn("Warning",`failed to extends ${s.name}`),s}}var ue=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function _n(s){return ue.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function ku(s){let r=s.getAttribute("id");return r&&ue.escapeInvalidCharacters(r)}function lt(s){return csNodenodeType.apply(s)===1}function lr(s){return csNodenodeType.apply(s)===3}function xu(s){return csNodenodeType.apply(s)===8}function yc(s){return lt(s)&&s.localName==="link"}function Lu(s){return lt(s)&&s.localName==="source"}function Ec(s){return lt(s)&&s.localName==="a"}function to(s){return yc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Vu(s){return lt(s)&&s.localName==="img"}function Er(s){return lt(s)&&s.localName==="style"}function Sr(s){return lt(s)&&s.localName==="input"}function eo(s){return lt(s)&&s.localName==="textarea"}function vr(s){return lt(s)&&s.localName==="script"}function Uu(s){return lt(s)&&s.localName==="button"}function qs(s){return lt(s)&&"ownerSVGElement"in s}function so(s){return lt(s)&&s.localName==="select"}function ju(s){return lt(s)&&s.localName==="details"}function Hu(s){return lt(s)&&s.localName==="summary"}function Bu(s){return qs(s)&&s.localName==="image"}function Fu(s){return qs(s)&&s.localName==="use"}function $u(s){return qs(s)&&s.localName==="feImage"}function zu(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Gu(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function hr(s){return csNodenodeType.apply(s)===9}function gi(s){return zu(s)&&"host"in s&&"mode"in s}function Sc(s){return lt(s)&&!!csElementshadowRoot.apply(s)&&gi(csElementshadowRoot.apply(s))}var qu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Wu(s){return lt(s)&&Nt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(qu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Ci="detached";function vc(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return ur(r)&&csArray.prototype.push.call(t,Ci),{ancestors:t,selectionRoot:r}}function Yu(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Ec(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return ur(r)&&csArray.prototype.push.call(t,Ci),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function ur(s){return ts.isValidElement(s)}var gs=(()=>{var s,r;return(r=(s=et.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),se=gs.matches||gs.matchesSelector||gs.mozMatchesSelector||gs.msMatchesSelector||gs.oMatchesSelector||gs.webkitMatchesSelector,Zo=gs.closest,_c=9;function Xu(s,r){return r?csArray.prototype.some.call(r,t=>se.call(s,t)):!1}function Ku(s,r,t){if(s===Ci||csNodenodeType.apply(s)===_c)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=_n(r),o=0,c=r.previousElementSibling;for(;c;)(_n(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Xu(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Ju(s,r,t){if(s===Ci||csNodenodeType.apply(s)===_c)return 0;let e=0,i=r.previousElementSibling;for(;i;)se.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Qu=[/\d{4}/,/^ember\d+$/],Zu="@",io="data-cs-override-id",td="data-cs-dynamic-id";function wc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=_n(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${Zu}`)),id(s,t)){let m=ro(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${io}="${m}"]`}}let c=hd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=ed(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=ku(s);if(nd(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let d=sd(s,e);if(d){let m=Ju(r,s,d);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${d}](${m})`}}let f=Ku(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${f})`}}function ed(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(se.call(s,e)&&ld(e,r))return e}}function sd(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(se.call(s,t))return t}}function id(s,r){let t=ro(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&no(io,t,r)}function rd(s){return ro(s)!==null}function ro(s){return s.getAttribute(io)}function nd(s,r,t,e){return r&&!rd(s)&&!od(s,r,e)&&cd(r,t)}function od(s,r,t){return s.hasAttribute(td)||ad(r,t)}function ad(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Qu,e=>e.test(s))||t)}function cd(s,r){return s&&no("id",s,r)}function no(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function ld(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function hd(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&no(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var wn=11;function dr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ta(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=wc(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ta(h,t)}${o}`}let l=dr(s,r,t);return`${l?`${l}>`:""}${o}`}function ta(s,r){if(s===Ci)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=vc(s.host);return`${dr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===wn?"|fragment|":""}var Ac=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),ud=(()=>{class s extends Ac{constructor(){super(...arguments),this.Jo=!1,this.Qo=!1,this.zc=!1}FE(t,e){return this.Jo&&!(e===null&&ur(t))&&csNodenodeType.apply(t)!==wn&&!t.host}$E(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.FE(t,e))return;let o=!1;e===null&&ur(t)&&(o=!0,this.done=!0);let c=this.Qo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.zc=!0,this.Jo=!1,this.Qo=!1),!l&&e===null&&csNodenodeType.apply(t)===wn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.$E(t))return;let h=e!=null?e:"detached",{elementSelector:d,hasUniqueIdentifier:f}=wc(t,h,i,this.options);f&&(this.Qo=!0,this.Jo=!this.options.fullPath);let m=`${o?`|detached|${c}`:""}${this.Jo&&!f?"":d}`,S=!f&&this.Qo&&!this.options.fullPath?"":this.path&&!this.zc?">":"";this.zc=!1,this.path=`${m}${S}${this.path}`}}return s})(),Et=(()=>{let s;return function(r){function t(){let f=[i()];return document.documentElement&&csArray.prototype.push.call(f,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(f,document.body.scrollHeight,document.body.offsetHeight),Math.max(...f)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let f=window.csScreen.width;return vs(f)&&f>0?f:window.screen.width}r.screenWidth=o;function c(){let f=window.csScreen.height;return vs(f)&&f>0?f:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function d(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=d}(s||(s={})),s})();function Jt(s,r=It.SHOW_ALL){let t=r|It.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ea(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ea(c);if(r&It.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(jr[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){jr[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((jr[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ea(s){return s&&Sc(s)?s.shadowRoot:null}var Ur=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:{}})(),It=(()=>{var s;return(s=et.NodeFilter)!==null&&s!==void 0?s:{}})(),jr={2:It.SHOW_ATTRIBUTE,4:It.SHOW_CDATA_SECTION,8:It.SHOW_COMMENT,11:It.SHOW_DOCUMENT_FRAGMENT,9:It.SHOW_DOCUMENT,10:It.SHOW_DOCUMENT_TYPE,1:It.SHOW_ELEMENT,[Ur.ENTITY_NODE]:It.SHOW_ENTITY,[Ur.ENTITY_REFERENCE_NODE]:It.SHOW_ENTITY_REFERENCE,[Ur.NOTATION_NODE]:It.SHOW_NOTATION,7:It.SHOW_PROCESSING_INSTRUCTION,3:It.SHOW_TEXT},Tc=!1,An=5,Xi=50;function dd(s=5){Tc=st.isPerfLoggingActive(),An=s}function Is(s,r){return function(){if(!Tc)return s.apply(this,arguments);let t=N.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=N.elapsed()-t;i>=An&&U.counters.methodPerformance.add(r,i),i>Xi&&U.counters.blockingTime.push(i-Xi)});else{let i=N.elapsed()-t;i>=An&&U.counters.methodPerformance.add(r,i),i>Xi&&U.counters.blockingTime.push(i-Xi)}return e}}var Mt=function(s){return function(r,t,e){let i=e.value;e.value=Is(i,s)}},Ss=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&Sc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Jt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Is(i,"getAllShadowHosts")}(s||(s={})),s})(),Hr=(()=>{var s;return(s=et.Node)!==null&&s!==void 0?s:Object})(),ft=(()=>{let s;return function(r){let t="isConnected"in Hr.prototype?v=>v.isConnected:v=>!v.ownerDocument||!(v.ownerDocument.compareDocumentPosition(v)&v.DOCUMENT_POSITION_DISCONNECTED);function e(v,L){for(let V=v;V;V=csNodenextSibling.apply(V))L(v)}r.forEachChild=e;function i(v){return t(v)}r.isConnected=i;function n(v,L){let V=[];for(let H of l(v,L))csArray.prototype.push.call(V,H);return V}r.getAncestors=n;let o=(v,L)=>{var V;return(V=csNodeparentNode.apply(v))!==null&&V!==void 0?V:L&&gi(v)?v.host:null};function c(v,L,V=!1){let H=v;for(;H;){if(L(H))return H;let ht=o(H,V);if(ht&&ht!==H)H=ht;else break}return null}r.findAncestor=c;function*l(v,L=!1){let V=v;for(;V;){yield V;let H=o(V,L);if(H&&H!==V)V=H;else break}}r.walkUp=l;function h(v,L){if(v===L||L.contains(v))return!0;let V=r.getParentElement(v);return V&&V!==v?h(V,L):!1}r.isDescendantOf=h;function d(v){var L;return v.parentElement?v.parentElement:r.getRootNode(v)?(L=r.getRootNode(v))===null||L===void 0?void 0:L.host:null}r.getParentElement=d;function f(v,L=document){let V=pi(window.csquerySelectorAll[L.nodeType].call(L,v)),H=Ss.getAllShadowHosts(L);for(let ht of H){let Ct=Ss.getShadowRoot(ht);if(!Ct)continue;let ie=pi(window.csquerySelectorAll[Ct.nodeType].call(Ct,v));csArray.prototype.push.call(V,...ie)}return V}r.findAllElements=f,r.getRootNode=(()=>{if("getRootNode"in Hr.prototype)return(V,H)=>V.getRootNode(H);function v(V){let H=L(V);return gi(H)?v(H.host):H}function L(V){return csNodeparentNode.apply(V)!=null?L(csNodeparentNode.apply(V)):V}return(V,H)=>typeof H=="object"&&!!H.composed?v(V):L(V)})();function m(v){return v==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(v)}function y(v){let L=v.getBoundingClientRect();return L.right+Et.windowOffsetX()<0||L.bottom+Et.windowOffsetY()<0}function S(v){var L,V;if(((L=v.checkVisibility)===null||L===void 0?void 0:L.call(v,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!v.offsetParent){if(!v.getBoundingClientRect)return st.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${v instanceof Hr} Ctor: ${(V=v==null?void 0:v.constructor)===null||V===void 0?void 0:V.name}`),!1;let Ct=v.getBoundingClientRect();if(Ct.width===0&&Ct.height===0)return!0}let H=window.getComputedStyle(v);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||m(H.color):!0}r.isHiddenByCSS=S;function T(v){if(S(v))return!0;let V=d(v);return V!=null&&T(V)}r.areAncestorsHiddenByCSS=T;function C(v){let L=null,V=v;do if(S(V))L=V;else break;while(V=d(V));return L}r.getTopAncestorHiddenByCSS=C;function _(v){let L=A(v);return L!==null&&!v.contains(L)&&!L.contains(v)}function A(v){let L=v.getBoundingClientRect(),V=L.left+.5*L.width,H=L.top+.5*L.height;return I(document,V,H)}r.getTopElement=A;function k(v){if(!v.getBoundingClientRect)return null;let L=v.getBoundingClientRect(),V=L.x+L.width/2,H=L.y+L.height/2;return r.getTopElementFromPoint(document,V,H)}r.getElementOnTop=k;function I(v,L,V){let H=v.elementFromPoint(L,V);if(!H)return null;let ht=Ss.getShadowRoot(H);return ht&&ht!==r.getRootNode(document.body)&&ht!==v?I(ht,L,V):H}r.getTopElementFromPoint=I;function b(v){return!y(v)&&!S(v)&&!_(v)}r.isVisibleInDocument=b;function F(v){return S(v)?!1:j(v)}r.isVisibleInViewportInForeground=F;function j(v){let L=A(v);return L===null?!1:v===L?!0:Ht(v)?v.textContent!==""&&L.contains(v):v.contains(L)}r.isInViewPort=j;function rt(v,L,V){let H=v.getAttributeNS(L,V);return H===""?v.hasAttributeNS(L,V)?H:null:H}r.getAttributeNS=rt;function gt(v){return!!(v.hasAttribute("tabIndex")||v.getAttribute("contentEditable")==="true"||Ec(v)&&v.hasAttribute("href")||(so(v)||eo(v)||Sr(v)||Uu(v))&&!v.hasAttribute("disabled")||ju(v)||Hu(v))}r.isElementFocusable=gt;function Ht(v){return v.localName==="span"||v.localName==="a"||v.localName==="b"||v.localName==="i"||v.localName==="button"||v.localName==="input"||v.localName==="label"||v.localName==="cite"||v.localName==="small"||v.localName==="strong"||v.localName==="code"||v.localName==="abbr"||v.localName==="em"||v.localName==="dfn"||v.localName==="time"||v.localName==="output"||v.localName==="object"||v.localName==="sub"}r.isInlineElement=Ht;function Oe(v){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>v(),{once:!0}):csSetTimeout(v)}r.onDocumentLoaded=Oe}(s||(s={})),s})(),fd=(()=>{class s{constructor(t){this.zE=t}run(t){let e=[...this.zE],i=ft.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.GE(e,o,c,n),this.qE(e),e.length===0)break;i.length===0&&o.host&&(i=ft.getAncestors(o.host,!1),n=i[i.length-1])}}GE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}qE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),pd=(()=>{class s extends Ac{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.WE(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}WE(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.YE(t.id),t.classList&&(e+=this.XE(csArray.from(t.classList))),t.attributes&&(e+=this.KE(t)),e}YE(t){return t?`#${t};`:""}XE(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}JE(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||qs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Sr(t)&&e==="value"}QE(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}ZE(t){let e={};for(let i of csArray.from(t.attributes))this.JE(t,i.name)||(e[i.name]=i.value);return e}KE(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.ZE(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.QE(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),ts=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let d=o(c);if(d===document)return{path:"",hierarchy:""};if(!t(d))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let f=new ud(h),m=new pd(l);return new fd([f,m]).run(d),{path:f.getPath(),hierarchy:m.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:d,selectionRoot:f}=vc(h);return dr(d,f,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:d,ancestors:f,selectionRoot:m}=Yu(h);return{path:dr(f,m,l),firstAnchorParent:d}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||ts;var bc=["t.contentsquare.net","clicktale"],gd=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(bc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,z.critical(t)}};window.addEventListener("error",gd);var z=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(bc,t)}static setStrategy(t){s.lr=t}static computeIsActive(t){s.$e=ws.boolean(t),s.$e?s.Gc=ws.boolean(10):s.Gc=!1}static isLoggingActive(){return s.$e}static getStrategy(){return s.lr}static debug(t,e=""){s.$e&&this.lr.send(t,e,at.debug)}static warn(t,e=!0,i=""){var n;U.counters.errors.count("warning"),s.$e&&e&&this.lr.send(t,i,at.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){U.counters.errors.count("implementation"),s.$e&&this.lr.send(t,e,at.implementation)}static error(t,e=""){var i;U.counters.errors.count("error"),s.$e&&this.lr.send(t,e,at.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){U.counters.errors.count("critical"),this.lr.send(t,e,at.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(et.Promise)&&n instanceof et.Promise?n.then(o=>o,o=>s.error(ee(o)?o:new Error(o),t)):n}catch(n){try{s.error(ee(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.Gc}}return s.$e=!1,s.Gc=!1,s})();var si=console;var es={debug:(...s)=>si.debug(...s),log:(...s)=>si.log(...s),info:(...s)=>si.info(...s),warn:(...s)=>si.warn(...s),error:(...s)=>si.error(...s)},Rc=[],Cc=[];function Ic(s,r){return csArray.prototype.push.call(s,r),()=>{let t=csArray.prototype.indexOf.call(s,r);t!==-1&&csArray.prototype.splice.call(s,t,1)}}function md(s){return Ic(Rc,s)}function yd(s){return Ic(Cc,s)}function Pc(s,r,t){try{let e=r==="spy"?Rc:Cc;csArray.prototype.reduceRight.call(e,(n,o)=>()=>o(t,n),s)()}catch(e){es.warn(`Error in ${r}/${t} task executor`,e)}}var Tn=!1;function Ed(){Tn=!0}function At(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Tn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Tn||e.call(this,i,n)}}}}function Sd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var vd=(()=>{class s{constructor(t,e){this.ur=t,this.Gd=e,this.qd=!1}init(){var t,e,i;this.Wd=this.ur!==this.ur.top,this.Yd=this.Gd.isWebView&&this.ur===this.ur.top,this.Xd=!1;try{this.Xd=Ce((e=(t=this.ur.top)===null||t===void 0?void 0:t.$A)===null||e===void 0?void 0:e.createComponent)||Yn((i=this.ur.top)===null||i===void 0?void 0:i.LWR)}catch(n){n.name==="SecurityError"&&(this.qd=!0)}this.Gd.iframesTracking&&this.Wd&&!this.Xd||this.Yd?this.Kd=!1:this.Kd=!0}reportInitErrors(){this.qd&&U.counters.iframeError.count("security-error")}isInIframeContext(){return this.Wd}isTopWindowTracker(){return this.Kd}isInWebViewContext(){return this.Yd}}return s})();var _t=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),wt=!wi&&document.createElement("a"),_d=/(:443|:80)$/;function be(s){return wt?(wt.href=s,wt.href):""}function wd(s,r){return new csURL(s,r).href}function Ad(s,r){return csArray.prototype.some.call(r,t=>Ai(s,`.${t}`)||s===t||t==="")}function Td(s){return s[0]==="/"?s:`/${s}`}function sa(s){return csString.prototype.replace.call(s,_d,"")}function Oc(s){return!wt||!Ut(s,"http://")&&!Ut(s,"https://")?null:(wt.href=s,{hash:wt.hash,host:sa(wt.host),hostname:wt.hostname,href:wt.href,origin:wt.origin?wt.origin:sa(`${wt.protocol}//${wt.host}`),pathname:Td(wt.pathname),port:wt.port,protocol:wt.protocol,search:wt.search})}var bd=(()=>{class s{setContext(t,e){this.N=t,this.C=e}getVisitorService(){return this.N}getSessionService(){return this.C}}return s})(),Rd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Cd=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Id="CS_ANONYMIZED_EMAIL",Br="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Pd=new csRegExp(`(ey${Br}\\.ey${Br}\\.${Br})`,"g"),Od="CS_ANONYMIZED_JWT",Nd=/[0-9]{4}/,Md=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Dd="CS_ANONYMIZED_PII",kd="\u2022",xd=/\d/g,Ld=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Vd=/(?:\d{1,3}\.){3}\d{1,3}/,Ud=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,jd=new csRegExp("(?:^|[?&#]|%3[fF]|%2[36])(?:id_token|access_token|refresh_token|auth_token)(=|%3[dD]).*?(?=%2[36]|&|$)","gi"),Hd=/_token/i,Bd="CS_ANONYMIZED_TOKEN",ce=(()=>{let s;return function(r){function t(m){return csString.prototype.replace.call(m,Rd,Id)}r.replaceEmail=t;function e(m){return csString.prototype.replace.call(m,Pd,Od)}r.replaceJWT=e;function i(m,y){return csString.prototype.replace.call(m,Md,y)}r.replaceCreditCardNumber=i;function n(m){return csString.prototype.replace.call(m,xd,kd)}r.replaceDigits=n;function o(m){return csString.prototype.replace.call(m,jd,function(y){let S=csString.prototype.match.call(y,/%3d/i),T=S?S[0]:"=";return csString.prototype.split.call(y,T)[0]+T+Bd})}r.replaceTokens=o;function c(m){return Vd.test(m)||Ud.test(m)}r.mayHaveIPAddress=c;function l(m){return Ld.test(m)}r.mayHaveNumberSequence=l;function h(m){return Nd.test(m)}r.mayHaveCreditCardNumber=h;function d(m){return Cd.test(m)}r.mayHaveEmail=d;function f(m){return Hd.test(m)}r.mayHaveToken=f}(s||(s={})),s})(),Ps=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.tS(this.qc(t));return e===!0?i=this.eS(i):e===!1&&(i=this.sS(i)),i}anonymizePII(t){return this.qc(t)}anonymizeJwt(t){return ce.replaceJWT(t)}anonymizeTokens(t){return ce.mayHaveToken(t)?ce.replaceTokens(t):t}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.qc(t[i])}),t}qc(t){if(ce.mayHaveEmail(t)){let e=ce.replaceEmail(t);return e!==t&&U.counters.redactedPII.count("email"),e}return t}eS(t){return ce.replaceDigits(t)}sS(t){return ce.mayHaveNumberSequence(t)?ce.replaceDigits(t):t}tS(t){return ce.mayHaveCreditCardNumber(t)?ce.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.iS(h))return e;U.counters.redactedPII.count("cc")}else U.counters.redactedPII.count("cc-partial");return`${i}${Dd}${c}`}):t}iS(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Nc="15.186.3";function oo(){return{v:Nc}}var Fd=(()=>{class s{constructor(t,e){this.E=t,this.M=e}getRequestParameters(){return{d:`${N.now()}`,p:this.M.anonymizePII(window.location.href),...this.E.getRequestParameters(),...oo()}}}return s})(),Ii=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Mc=(()=>{class s{}return s})(),$d=2e4,Dc=(()=>{class s{constructor(t){var e,i;this.ze={},this.Wc={},this.Jd=n=>{for(let o of n){let{metadata:c,events:l}=o;this.send(l,c)}},this.Ai=t.endpoint,this.ln=t.compressionOpts,this.ae=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Yc=t.contentType,this.worker=!!t.worker,this.Xc=(i=t.disableRequestCounting)!==null&&i!==void 0?i:!1,this.ae&&this.ae.recover(this.Jd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.ze[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.ze[e]}):this.ze={}}send(t,e){t=t!=null?t:"";let i=e||{...this.ze},n=!("ct"in i),o=this.Yc==="application/json"||typeof t!="string"&&!this.rS(t);"ct"in i||(!this.ln||!n?i.ct=Ii.UNCOMPRESSED:i.ct=this.ln.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.Ai}?${l}`;if(vu(this.mandatoryParameters,f=>i[f]==null)){st.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}let d=f=>typeof f=="string"?f.length:f.byteLength;U.counters.payloadSize.add(d(c),h,"raw"),this.ln&&n&&typeof c=="string"?this.ln.compressor(c,this.ln.compressionOutputType,f=>{U.counters.payloadSize.add(d(f),h,"compressed"),this.Qd(h,i,f)}):this.Qd(h,i,c)}onLoad(t){this.fr=t}onError(t){this.hn=t}onTimeout(t,e){this.Ti=t,this.Zo=e}abort(){this.Zd&&this.Zd()}setRequestHeader(t,e){this.Wc[t]=e}getQueryParams(){return this.ze}rS(t){return t&&t.byteLength!==void 0}Qd(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t,!0),this.Yc&&n.setRequestHeader("Content-Type",this.Yc),n.onload=()=>{if(this.ae&&this.ae.recover(this.Jd),this.fr){let c={params:e,responseText:n.responseText,status:n.status};this.fr(c)}this.Xc||U.counters.requestCounts.count(this.Ai)},n.onerror=()=>{this.ae&&this.ae.save({key:o,metadata:e,events:i}),this.Xc||U.counters.requestErrors.count(this.Ai),this.hn&&this.hn({params:e})},n.timeout=this.Zo||$d,n.ontimeout=()=>{this.Xc||U.counters.requestTimeouts.count(this.Ai),this.Ti&&this.Ti()},this.Zd=()=>n.abort(),Object.keys(this.Wc).forEach(c=>{n.setRequestHeader(c,this.Wc[c])}),n.send(i)}}return s})(),zd=(()=>{class s{constructor(t,e){this.Ge=t,this.nS=e}init(){this.qe=new Dc({endpoint:this.Ge.getLoggerUri(),contentType:"text/plain"})}send(t){let e=this.nS.getRequestParameters(),i=csArray.prototype.map.call(t,n=>({...e,a:n.app,l:n.level,m:n.message,s:n.stacktrace}));this.qe.send(i)}getRequestParameters(){return{}}}return s})();function ia(){}function bn(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Gd(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Fr=csSymbol("cachedJson");function qd(s){if(s[Fr])return s[Fr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ts(s[0]);for(let t=1;t<s.length;t++)r+=","+Ts(s[t]);return r+="]"}return s[Fr]=csJSON.stringify(s)}var Ts=typeof window.Symbol!="undefined"?qd:csJSON.stringify;var mi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),kc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),yi=(()=>{class s extends kc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Kc(t);let e=mi.toQuery(t);this.oS(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}oS(t){let e=new window.Image(1,1);e.onload=ia,e.onerror=ia,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Kc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),Wd=(()=>{class s{constructor(t,e){this.Ge=t,this.aS=e}init(){this.qe=new yi(this.Ge.getLoggerUri()),this.qe.setRequestParametersProviders(this,this.aS)}send(t){this.ta=t,this.qe.send()}getRequestParameters(){return{a:this.ta.app,l:this.ta.level,m:this.ta.message,s:this.ta.stacktrace}}}return s})(),Yd="uxa",ra=5,Xd="No stacktrace",xc="snippet-",Lc="implementation-snippet-",na=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),Kd=(()=>{class s{constructor(t,e,i,n){this.pr=e,this.M=new Ps,this.tf=Lr[at.warn],this.tf=Lr[t.minLogLevel||at.warn];let o=new Fd(t,this.M);this.qe=i||new Wd(t,o),this.ef=n||new zd(t,o),this.Jc={[at.debug]:[],[at.warn]:[],[at.implementation]:[],[at.error]:[],[at.critical]:[]},this.sa={implementation:{},dynamic:{}},this.qe.init(),this.ef.init()}send(t,e="",i=at.warn){if(!this.sf(i,e))return;csArray.prototype.push.call(this.Jc[i],e||"");let n={message:this.Qc(t,e),stacktrace:this.Zc(t),app:Yd,level:i};this.qe.send(n)}sendBulk(t){let e=csArray.prototype.filter.call(t,n=>{let o=n.level,c=this.cS(n.message);return csString.prototype.startsWith.call(n.message,"debug-ct-log")?!0:this.sf(o,c)?(csArray.prototype.push.call(this.Jc[o],c||""),!0):!1});if(e.length===0)return;let i=csArray.prototype.map.call(e,n=>({...n,message:n.message,stacktrace:n.stacktrace}));this.ef.send(i)}cS(t){let e=csString.prototype.match.call(t,/ErrorCode: (.+)$/);return e?e[1]:""}Qc(t,e){let i=ee(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Zc(t){return ee(t)?`${t.stack||Xd} ${this.rf()}`:this.rf()}rf(){let t=this.pr.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.pr.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}sf(t,e){if(Lr[t]<this.tf)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Lc,0))===0)return this.nf(e,na.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,xc,0))===0)return this.nf(e,na.DYNAMIC);let i=this.Jc[t];return i.length>=ra?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}nf(t,e){return t in this.sa[e]?this.sa[e][t]>=ra?!1:(this.sa[e][t]+=1,!0):(this.sa[e][t]=1,!0)}}return s})();var Jd=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let j=window.CSJavascriptBridge.getVersion();if(Xt(j))return j}catch{z.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(j,rt){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(j,csJSON.stringify(rt))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(j){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(j))}r.addUserProperties=c;function l(j){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify(j))}r.addEventProperties=l;function h(j){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty(j)}r.removeEventProperty=h;function d(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=d;function f(j){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify(j))}r.addPageviewProperties=f;function m(j){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty(j)}r.removePageviewProperty=m;function y(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=y;function S(j){window.CSJavascriptBridge.sendEvent(csJSON.stringify(j))}r.sendAnalysisEvent=S;function T(j){if(window.CSJavascriptBridge.sendSREvent)for(let rt of j.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(rt))}r.sendSREvent=T;function C(j){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(j))}r.sendLog=C;function _(){window.CSJavascriptBridge.optIn()}r.sendOptIn=_;function A(){window.CSJavascriptBridge.optOut()}r.sendOptOut=A;function k(j,rt){window.CSJavascriptBridge.sendDynamicVar(j,rt)}r.sendDynamicVariable=k;function I(j,rt,gt){window.CSJavascriptBridge.sendTransaction(j,rt,gt)}r.sendTransaction=I;function b(j,rt){if(window.CSJavascriptBridge.sendAssets){let gt=csJSON.stringify(j);window.CSJavascriptBridge.sendAssets(gt,rt||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(j,gt=>gt.assetId))}r.sendAssets=b;function F(j){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(j))}r.sendNativeSREvent=F}(s||(s={})),s})(),Qd="No stacktrace",Zd=(()=>{class s{constructor(){this.M=new Ps}send(t,e,i=at.warn){let n={message:this.Qc(t),errorCode:e,level:i},o=this.Zc(t);o&&(n.stacktrace=o),Jd.sendLog(n)}Qc(t){return ee(t)?this.M.anonymizePII(t.message||t.toString()):t}Zc(t){if(ee(t))return`${t.stack||Qd}`}sendBulk(t){}}return s})();function de(s){return Ut(s,"data:")}function tf(s){return Ut(s,"#")}function ef(s){return!!s&&(Ai(s,".css")||Ut(s,"https://fonts.googleapis.com/css"))}var sf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],ao=s=>{let r=new Set(sf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},rf=["svg","slot"],nf=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(rf,s)>-1,Vc={href:new Set(["a"]),src:new Set(["iframe"])},of=s=>Vc.hasOwnProperty(s),af=(s,r,t)=>{var e;return((e=Vc[r])===null||e===void 0?void 0:e.has(s))&&!de(t)},cf=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function $r(s){return s?lf(s):null}function lf(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var hf=/^\d+\.\d+(?:\.\d+)?$/,uf=s=>{if(!hf.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},df=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,ff=(s,r)=>df(s,r)>=0,pf=1,Rn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),fr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),gf=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,d,f,m,y,S,T;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Jn,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors={enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0,...t.apiErrors},this.customErrors={enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=$r(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=$r(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=$r(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((d=t.uxaDomain)===null||d===void 0?void 0:d.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(f=t.anonymizeDigits)!==null&&f!==void 0?f:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(m=t.recordTargetingRules)!==null&&m!==void 0?m:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(y=t.collectTargetText)!==null&&y!==void 0?y:Rn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(S=t.quotas)!==null&&S!==void 0?S:null,this.startMode=(T=t.startMode)!==null&&T!==void 0?T:fr.Automatic,this.eventEnricher=t.eventEnricher||null,this.experiments=t.experiments||null}getTrackerUri(){return`${this.Ys()}://${this.trackerDomain}`}getRecordingUri(){return`${this.Ys()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Ys()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Ys()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Ys()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.Ys()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Ys()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.Ys()}://${this.paProxyDomainUri}`}Ys(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===pf}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.lS(n,o)}})}lS(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&vs(e)&&csArray.prototype.includes.call(Object.values(fr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.of()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.of())return!0;let t=uf(this.getHeapVersion()||"");if(t&&t.major===4&&ff(t,{major:4,minor:23,patch:5}))return!0}return!1}of(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Rn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function B(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function mf(){let s=new MutationObserver(r=>{r.forEach(t=>{Q(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(U.counters.pureWindowState.count("iframe-deletion"),st.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function oa(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function yf(){(!oa(MutationObserver)||!oa(MutationObserver.prototype.observe))&&U.counters.patchedNativeFunctions.count("MutationObserver")}function Ef(){try{window.CSPureWindow&&mf(),yf()}catch{}}var pt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let d=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return d?decodeURIComponent(d[2]):null}r.get=t;function e(l,h,d,f,m,y){let S=encodeURIComponent(`${h}`),T=d===r.CURRENT_DOMAIN?void 0:d,C=i(f),_=C?`;expires=${C.toUTCString()}`:"",A=";path=/",k=Nt(T)?`;domain=${T}`:"",I=`${l}=${S}${_}${A}${k}`;return Z(m)&&m!==Ke.NotSet&&(I=`${I};SameSite=${m}`),Z(y)&&y===he.Yes&&(I=`${I};Secure`),document.cookie=I,!0}r.set=e;function i(l){return Xt(l)?new csDate(N.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Ke.None,he.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let d="_cs_root-domain",f=t(d);if(f!==null&&f!=="1")return f;let m=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(m);for(;m.length&&(f===null||f==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(m),y],"."),e(d,y,y,void 0,l,h),f=t(d);return n(d,y),y}r.getRootDomain=c}(s||(s={})),s})(),Sf=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Ke=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),he=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),_r=(()=>{class s{constructor(t,e,i){this.E=t,this.R=e,this.bi=i,this.tl=!1,this.af=Ke.NotSet,this.sl=he.No}getSameSiteFlag(){return this.af}getSecureFlag(){return this.sl}getDomain(){return this.il}getRootDomain(){return this.cf}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.hS(),e=this.uS();this.tl=this.dS(t,e),this.tl?(this.af=t,this.sl=e):this.E.secureCookiesEnabled&&this.R.getUrlProtocol()==="https:"&&(this.sl=he.Yes),this.cf=this.fS(),this.il=this.pS(this.cf)}dS(t,e){return Sf.browserIsSafariV12()?!1:(pt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),pt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(pt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}hS(){return this.R.getUrlProtocol()==="http:"?Ke.Lax:this.bi.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?Ke.None:Ke.Lax}uS(){return this.R.getUrlProtocol()==="http:"?he.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.bi.isSameSiteNoneSecureNeeded()?he.Yes:he.No}isSameSiteSupported(){return this.tl}set(t,e,i,n){let o=pt.toExpireDate(i),c=n?he.Yes:this.getSecureFlag();pt.set(t,e,this.il,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.il;pt.remove(t,i)}fS(){let t=this.bi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Ke.None:void 0,i=t?he.Yes:void 0;return pt.getRootDomain(e,i)}pS(t){return this.E.allowSubdomains?t:pt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Us="_cs_t",aa="1",vf=(()=>{class s{constructor(t,e){this.It=t,this.E=e,this.ia=!1,this.ra=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.It.isTopWindowTracker()&&"cookie"in document){if(!this.It.isInIframeContext()&&pt.isCookiePresent()){this.ia=!0,this.ra=!1;return}if(pt.set(Us,aa,pt.CURRENT_DOMAIN),pt.get(Us)!==null){this.ia=!0,this.ra=!1,pt.remove(Us,pt.CURRENT_DOMAIN);return}pt.set(Us,aa,pt.CURRENT_DOMAIN,void 0,Ke.None,he.Yes),pt.get(Us)!==null&&(this.ia=!0,this.ra=!0,pt.remove(Us,pt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.ia}isSameSiteNoneSecureNeeded(){return this.ra}}return s})();function _f(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var wf=(()=>{class s{constructor(t,e){this.E=t,this.bi=e}canTrack(){return this.E.isProjectActive()&&this.gS()&&this.lf()&&this.mS()}canTrackInChild(){return this.E.isProjectActive()&&this.yS()&&(this.lf()||this.ES()||this.SS())}mS(){return this.E.cookielessTrackingEnabled?_f():this.bi.areCookiesEnabled()}lf(){return Ad(window.location.hostname,this.E.hostnames)}gS(){return!this.hf()&&this.vS()}yS(){return!this.hf()&&this._S()}ES(){return window.location.protocol==="about:"&&window.location.hostname===""}hf(){return"visibilityState"in document&&document.visibilityState==="prerender"}vS(){return this.uf()&&this.wS()}_S(){return this.uf()}wS(){try{return!!window.localStorage}catch{return!1}}uf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}SS(){return this.E.isWebView&&window.location.protocol==="file:"&&window.location.hostname===""}}return s})(),Uc=":";function ca(s){let r=[],t=Af(s),e=csString.prototype.split.call(t,"/");for(let i of e)Ut(i,Uc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function Af(s){let r=s;return Ut(s,"/")&&(r=csString.prototype.substring.call(r,1)),Ai(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Tf=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,bf="$1CS_ANONYMIZED_NAME",Rf=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),o=this.M.anonymizeTokens(o),e.maskNames){let h=o;o=this.un(o),o!==h&&(U.counters.redactedPII.count("name"),U.counters.redactedPII.count("name-in-url"))}let c=this.AS(o,i);if(c!==o)return U.counters.redactedPII.count("url"),c;let l=this.TS(o,n);return l!==o&&U.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.rl(t);return i!==""?`${e}?`:e}rl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}AS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.rl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.bS(o,c);if(l!==null)return`${l}${n}`}return t}bS(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.df(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}TS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.rl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.RS(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}RS(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],d=e[n].key;if(this.df(d)&&l>=c){let f=e[n].value;csArray.prototype.push.call(i,h.length>0?f:""),n++,n===e.length&&(n=0);continue}if(h===d){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let f=0;f<n;f++){let m=l-n+f;i[m]=t[m]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}df(t){return Ut(t,Uc)}un(t){return csString.prototype.replace.call(t,Tf,bf)}}return s})(),Cf="spki",la="RSA-OAEP",If="SHA-256",ha="AES-CTR",Pf="SHA-1",ua=190,ai=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=et.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function d(){var I,b;return((b=(I=et.self.crypto)===null||I===void 0?void 0:I.subtle)===null||b===void 0?void 0:b.encrypt)!=null&&et.self.CryptoKey!=null}r.isSupported=d;async function f(I){n=r.crypto.importKey(Cf,ac(I),{name:la,hash:If},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||st.warn(`Fail to import public key '${I}'`)}r.importKey=f;async function m(I){if(!d()||e)return null;await n;let b=Kn(I);b.byteLength>ua&&(b=b.slice(0,ua));try{let F=await r.crypto.encrypt({name:la},i,b);return zo(F)}catch{return null}}r.asymmetricEncrypt=m;async function y(I,b){if(!d()||e)return null;let F={counter:b.initializationVector,name:ha,length:64},j=o.encode(I);try{let rt=await r.crypto.encrypt(F,b.cryptoKey,j);return zo(rt)}catch{return null}}r.symmetricEncrypt=y;async function S(I){let b=await T(I);if(!b)throw new Error("Export secret failed");let F=await m(b);if(!F)throw new Error("Encrypt secret failed");return F}r.encryptSecret=S;async function T(I){var b;if(!d())return null;try{return(b=(await r.crypto.exportKey("jwk",I)).k)!==null&&b!==void 0?b:null}catch{return null}}async function C(){if(!d()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:ha,length:128},!0,["encrypt","decrypt"]),initializationVector:et.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=C;function _(I){c=I}r.setDigestSalt=_;async function A(I){I=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(I)),c&&(I=`${I}:${c}`);let b=o.encode(I);try{let F=await r.crypto.digest(Pf,b);return En(F)}catch{return null}}r.digest=A;function k(){return et.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=k}(s||(s={})),s})(),_e=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Be=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),fs=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),co=(()=>{class s{constructor(){this.nl=[]}setRegexRules(t){this.nl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.CS(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.nl,e=>this.ff(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.nl,e=>this.ff(t,e)),e=>e.ruleInput)}ff(t,e){var i,n;let o=this.IS(t,e);return!this.PS(e)||!this.OS(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}PS(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}OS(t){let e=t.samplingRate!==100,i=e&&ws.boolean(t.samplingRate);return!e||i}na(t){return!Ut(t,"http://")&&!Ut(t,"https://")?`https://${t}`:t}IS(t,e){let i=Oc(this.na(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}oa(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}CS(t){let e=null,i=!1;switch(t.operator){case Be.NOT_START:case _e.NOT_START:i=!0;case Be.START:case _e.START:e=new csRegExp(`^${t.value}`,this.oa(t));break;case Be.NOT_END:case _e.NOT_END:i=!0;case Be.END:case _e.END:e=new csRegExp(`${t.value}$`,this.oa(t));break;case Be.NOT_CONTAIN:case _e.NOT_CONTAIN:i=!0;case Be.CONTAIN:case _e.CONTAIN:case _e.REGEX:e=new csRegExp(`${t.value}`,this.oa(t));break;case Be.NOT_EXACT:case _e.NOT_EXACT:i=!0;case Be.EXACT:case _e.EXACT:e=new csRegExp(`^${t.value}$`,this.oa(t));break;default:st.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.pf(t.startDate):void 0,o=t.endDate?this.pf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}pf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),q=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Ae=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.SHOPIFY="shopify",r.WEB="web"}(s||(s={})),s})();function Of(s){return s.tgtHM!==void 0}function jc(s){return s.tgt!==void 0}function Nf(s){return s.tgtLk!==void 0}function Mf(s){return s.x!==void 0&&s.y!==void 0}function Df(s){return s===Ae.APPCUES||s===Ae.CHAMELEON||s===Ae.CONTENTSQUARE||s===Ae.SEGMENT||s===Ae.SHOPIFY||s===Ae.WEB}var kf=Math.pow(2,31);function xf(s,r=0){let l=r>>>0,h=s.length;for(let y=0;y<h-3;y+=4){let S=(csString.prototype.charCodeAt.call(s,y)&255|(csString.prototype.charCodeAt.call(s,y+1)&255)<<8|(csString.prototype.charCodeAt.call(s,y+2)&255)<<16|(csString.prototype.charCodeAt.call(s,y+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let d=0,f=h&3,m=h-f;switch(f){case 3:d^=(csString.prototype.charCodeAt.call(s,m+2)&255)<<16;case 2:d^=(csString.prototype.charCodeAt.call(s,m+1)&255)<<8;case 1:d^=csString.prototype.charCodeAt.call(s,m)&255,d=Math.imul(d,3432918353),d=d<<15|d>>>17,d=Math.imul(d,461845907),l^=d}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Hc(s){return xf(s)+kf>>>0}var lo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),ci="|iframe|",Lf=(()=>{class s extends lo{constructor(t,e,i,n){super(),this.NS=t,this.MS=e,this.DS=i,this.kS=n}emitIframeEvent(t,e,i){if(this.xS(e)&&t===null){z.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case _t.ChildLogMessage:this.LS(i);break;case _t.AnalysisEvent:{let n=i,o=this.NS.transformEvent(t,n);o.isUserEvent?this.VS(o.event):this.US(o.event);break}case _t.RecordingEvent:{let n=i,o=this.kS.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.jS(o.events):this.HS(o.events);break}case _t.JavascriptError:this.BS(i);break;case _t.ApiError:this.FS(i);break;case _t.DetailedApiError:this.$S(i);break;case _t.CustomError:this.zS(i);break;case _t.EmerchandisingMessage:{let n=this.DS.transformEvent(t,i);this.GS(n);break}case _t.Commands:{let n=this.MS.transformEvent(t,i);this.qS(n);break}case _t.IntegrationCallback:this.WS(i);break;case _t.StaticResource:this.YS(i);break;case _t.TrackingContextRequestMessage:this.XS(i);break;default:z.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}xS(t){let e=[_t.AnalysisEvent,_t.RecordingEvent,_t.EmerchandisingMessage,_t.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}LS(t){let{message:e,errorCode:i,level:n}=t;switch(n){case at.debug:z.debug(e,i);break;case at.warn:z.warn(e,!0,i);break;case at.implementation:z.implementation(e,i);break;case at.error:z.error(e,i);break;case at.critical:z.critical(e,i);break}}VS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}US(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}jS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}HS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}BS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}FS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}$S(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}GS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}qS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}WS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}YS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}XS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}zS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Vf=(()=>{class s{constructor(t,e,i){this.wt=t,this.gf=e,this.mf=i}transformEvent(t,e){this.KS(t,e.event);let i=this.wt.getElementPath(t);return this.JS(i,e.event),this.QS(e.event),e}KS(t,e){if(Mf(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Et.windowOffsetX()),e.y=Math.round(i.top+e.y+Et.windowOffsetY())}}JS(t,e){jc(e)&&(e.tgt=`${t}${ci}${e.tgt}`),Of(e)&&(e.tgtHM=`${t}${ci}${e.tgtHM}`,this.gf||(e.tgtHMH=Hc(e.tgtHM))),Nf(e)&&(e.tgtLk=`${t}${ci}${e.tgtLk}`)}QS(t){!this.gf&&this.mf&&this.mf.enhanceAnalysisEvent(null,t)}}return s})(),Uf=(()=>{class s{constructor(t){this.wt=t}transformEvent(t,e){let i=this.wt.getElementPath(t);return{iframePath:e.iframePath?`${i}${ci}${e.iframePath}`:i,commands:e.commands}}}return s})(),jf=(()=>{class s{constructor(t){this.wt=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.wt.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${ci}${o.targetPath}`}));return{...e,products:n}}}return s})(),Hf=1,da=csSymbol("nodeIdentifier");function G(s){let r=s[da];return r!=null?r:s[da]=Hf++}var D=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ii=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Bf=(()=>{class s{constructor(){this.ZS={clientX:2,clientY:3},this.sv={clientX:1,clientY:2},this.iv=[D.POINTER_DOWN,D.POINTER_MOVE,D.POINTER_UP],this.rv=[D.TOUCH_START,D.TOUCH_MOVE,D.TOUCH_END]}transformEvents(t,e){if(!ft.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==D.VISIBILITY_CHANGE),e.events.length===0||(z.warn(`IframeRecordingEventsTransformer received event ${_t.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=G(t),n=null;csArray.prototype.some.call(e.events,c=>this.yf(c)||this.Ef(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.yf(c)?this.nv(n,c):this.Ef(c)&&this.ov(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}ov(t,e){this.Sf(this.sv,t,e)}nv(t,e){this.Sf(this.ZS,t,e)}Sf(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}yf(t){return csArray.prototype.indexOf.call(this.iv,t.type)!==-1}Ef(t){return csArray.prototype.indexOf.call(this.rv,t.type)!==-1}}return s})(),Ot=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),zr;function li(s){if(zr||(zr=document.createElement("div")),!(!!s&&W(s)))return st.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return se.call(zr,s),!0}catch{return st.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Cn(s,r){if(Zo)return Zo.call(s,r);let t=s;do{if(se.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function Je(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=Je(s[t]);return r}default:return s}}function Bc(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function Fc(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?Je(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=Fc(n,o);h!==void 0&&(t[i]=h)}else t[i]=Je(o)}return Bc(t)?t:void 0}function $c(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=$c(n,o):t[e]=o}return t}function zc(s){let r=null;return t=>t?r=t:r||(r=s())}var Ff=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function $f(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Ff.has(s)}var js=zc(()=>new WeakMap),Gr=zc(()=>new Set),ss=(()=>{let s;return function(r){function t(d){return js().get(d)}r.getAll=t;function e(d,f){var m;return(m=js().get(d))===null||m===void 0?void 0:m[f]}r.get=e;function i(d,f,m){let y=js().get(d);y||js().set(d,y={}),y[f]=m,c(d)}r.set=i;function n(d,f){let m=js().get(d);m&&(delete m[f],c(d))}r.remove=n;function o(){js(new WeakMap)}r.reset=o;function c(d){for(let f of Gr())f(d)}function l(d){Gr().add(d)}r.subscribe=l;function h(d){Gr().delete(d)}r.unsubscribe=h}(s||(s={})),s})(),it=(()=>{let s;return function(r){function t(l,h,d){var f;if(typeof Node!="undefined"&&l instanceof Node)ss.set(l,h,d);else{let m=l;(f=m.props)!==null&&f!==void 0||(m.props={}),m.props[h]=d}}r.setProperty=t;function e(l,h){var d;return typeof Node!="undefined"&&l instanceof Node?ss.get(l,h):(d=l.props)===null||d===void 0?void 0:d[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?ss.getAll(l):l.props}r.getProperties=i;function n(l,h){let d=null;return o(l,(f,m,y)=>h(f)&&(d=f)&&!!y()),d}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,d){let f=!1;if(d(l,h,()=>f=!0),f)return;let y=l.shadowRoot;y&&c(y,l,d);let S=l.children;if(S!=null&&S.length){for(let T of S)if(T&&(c(T,l,d),f))break}}}(s||(s={})),s})(),M=(()=>{let s;return function(r){let t;(function(_){_[_.NotMasked=0]="NotMasked",_[_.Parent=1]="Parent",_[_.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(_){return fi(_)&&"Attributes"in _&&"PIISelectors"in _?_.Attributes instanceof Array&&_.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(_){if(!fi(_)||_===null)throw new Ot("setPIISelectors");return"Attributes"in _||(_.Attributes=[]),"PIISelectors"in _||(_.PIISelectors=[]),_}r.sanitizeSelectorUserInput=i;function n(_){var A,k,I;return"nodeType"in _?(A=it.getProperty(_,r.maskedProp))!==null&&A!==void 0?A:{state:t.NotMasked}:(I=(k=_.metadata)===null||k===void 0?void 0:k[r.maskedProp])!==null&&I!==void 0?I:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(_){var A,k,I;return"nodeType"in _?(A=it.getProperty(_,r.maskedAttributeProp))!==null&&A!==void 0?A:{attributes:[]}:(I=(k=_.metadata)===null||k===void 0?void 0:k[r.maskedAttributeProp])!==null&&I!==void 0?I:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(_){let A=it.getProperty(_,r.maskedProp);return(A==null?void 0:A.state)===t.Parent}r.isMaskedElement=c;function l(_){let A=it.getProperty(_,r.maskedProp);return(A==null?void 0:A.state)===t.Child}r.isMaskedElementChild=l;function h(_,A){let k=it.getProperty(_,r.maskedAttributeProp);return((k==null?void 0:k.attributes)==null?void 0:csArray.prototype.indexOf.call(k==null?void 0:k.attributes,A))>-1}r.isMaskedAttribute=h;function d(_,A){it.setProperty(_,r.maskedProp,A)}r.setMaskedElementProperty=d;function f(_){it.setProperty(_,r.maskedProp,void 0)}r.unsetMaskedElementProperty=f;function m(_,A){it.setProperty(_,r.maskedAttributeProp,A)}r.setMaskedAttributeProperty=m;function y(_,A){let k=csArray.prototype.filter.call(_.PIISelectors,F=>li(F));A.elementSelector.length>0&&csArray.prototype.push.call(k,...csString.prototype.split.call(A.elementSelector,","));let I=C([...k]),b={elementSelector:csArray.prototype.join.call(I,","),attrSelector:A.attrSelector,attrSelectors:A.attrSelectors};return csArray.prototype.forEach.call(_.Attributes,F=>{F!=null&&F.attrName&&(F!=null&&F.selector)&&li(F.selector)&&!S(b.attrSelectors,F)&&csArray.prototype.push.call(b.attrSelectors,F)}),b.attrSelector=T(b.attrSelectors),b}r.getComputedSelectorSettings=y;function S(_,A){return csArray.prototype.some.call(_,k=>k.selector===A.selector&&k.attrName===A.attrName)}function T(_){let A="";return csArray.prototype.forEach.call(_,k=>{let I=csString.prototype.split.call(k.selector,",");csArray.prototype.forEach.call(I,b=>{li(b)&&(A&&(A+=","),A+=b)})}),A}function C(_){if(_.length<=1)return _;let A=[];for(let k of _){let I=csString.prototype.split.call(k,",");for(let b of I)csArray.prototype.indexOf.call(A,b)===-1&&csArray.prototype.push.call(A,b)}return A}}(s||(s={})),s})(),zf=(()=>{class s{constructor(){this.aa={elementSelector:"",attrSelector:"",attrSelectors:[]},this.ol={elementSelector:"",attrSelector:"",attrSelectors:[]},this.av=window.top===window?"pii-migration":"pii-migration-iframe",this.vf=!1}onAfterNaturalPageView(){this._f()}onParentSensitiveStatusChange(t){t.started&&!this.vf&&(this.vf=!0,t.maskedElementSettings&&(this.aa=t.maskedElementSettings),this._f())}_f(){var t,e;let i=this.wf(this.aa),n=this.wf(this.ol),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let d=i.attrSelectors[l]||[],f=csArray.prototype.filter.call(h,m=>csArray.prototype.indexOf.call(d,m)===-1);f.length>0&&(c[l]=f)}(o.length>0||Object.keys(c).length>0)&&(z.computeIsActive(100),z.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.av),z.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}wf(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.ol=M.getComputedSelectorSettings(t,this.ol)}markPIIMaskingTemplateInUse(t){let e=M.sanitizeSelectorUserInput(t);this.aa=M.getComputedSelectorSettings(e,this.aa)}}return B([x()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),Gf=(()=>{class s{constructor(t,e){this.S=t,this.At=e}init(){this.At.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var jt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),qf=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Wf=(()=>{class s extends jt{constructor(t,e){super(),this.al=t,this.cl=e,this.as={}}register(t,e,i){for(let n of t){let o=(...c)=>{let l=(i==null?void 0:i.metricParameter)||n;try{let h=e(...c);return U.counters.commandApplied.count(l),h}catch(h){h instanceof Ot?(U.counters.commandMisuse.count(l),z.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${ee(h)?h.stack:h}`)):(U.counters.commandError.count(l),z.error(`Command Error - ${n}: ${ee(h)?h.stack:h}`))}};this.as[n]={callback:o,configuration:i},this.as}}onStart(){this.cv(),this.lv()}onStop(){for(let t of this.al)window[t]=[]}applyFromIntegration(t,e,i){this.Af(t,e,`Commands.apply.from.integration: ${i}`),U.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.Af(t,e,`Commands.apply.from.implementation: ${i}`),U.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.cl)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.hv(e.name,e.params,t.iframePath),U.counters.commandsFromIframe.count(e.name)}Af(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}z.tryToExecute(i,()=>{if(this.as[t])return this.as[t].callback(...e)})()}hv(t,e,i){z.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.as[t])return this.as[t].callback(...e)})()}cv(){for(let t of this.al)window[t].forEach(([e,...i])=>this.Tf(e,i,!1))}lv(){for(let t of this.al)window[t]={push:([e,...i])=>this.Tf(e,i,!0)}}Tf(t,e,i){var n,o;if(this.as[t]){if(((n=this.as[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.as[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.as[t].callback(...e)}catch(l){z.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Yf=(()=>{class s extends lo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:q.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function yt(s){let r=csEventtarget.apply(s);return r&&lt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Xf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Kf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(yt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Jf=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Qf=1024,Zf=1024,tp=(()=>{class s{constructor(t,e){this.pt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=yt(t),n={isNodeSensitive(o){return M.isMaskedElement(o)||M.isMaskedElementChild(o)},isAttributeSensitive(o,c){return M.isMaskedAttribute(o,c)},allWhitelistedAttributes:ao(this.E.whitelistedAttributes),attributeIgnoreTokens:Jf,useAnonymization:e,attrMaxLength:Zf,hierarchyMaxLength:Qf};return this.pt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=yt(t);return this.pt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=yt(t),{path:i,firstAnchorParent:n}=this.pt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.uv(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=yt(t);return this.pt.isValidElement(e)}getElementPath(t){return this.pt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}uv(t){var e;return t!==null&&t.hasAttribute("href")&&!bn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function wr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=N.now(),o=null,l=s.apply(i,n),n=[],i=null},d=function(...f){if(i=this!==null&&this!==void 0?this:et,n=[...f],e==="trailing")return o||(o=et.csSetTimeout(h,t)),l;let m=N.now(),y=t-(m-c);return y<=0||y>t?(c=m,l=s.apply(i,n),o?(et.csClearTimeout(o),o=null):n=[]):o||(o=et.csSetTimeout(h,y)),l};return d.cancel=()=>{o&&(et.csClearTimeout(o),c=0,o=null,n=[])},d.flushPending=()=>{o&&(et.csClearTimeout(o),h())},d}var Ar=s=>(r,t,e)=>{e.value=wr(e.value,s)};var pr=".",ho="__DOT__",ep=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Gc="x";function sp(s){let[r,t,e,i,n,o,c,l,h]=ap(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Gc?null:h}}function ip(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Gc],csString),np),pr)}function rp(s){return ep.test(s)}function np(s){return csString.prototype.replace.call(s,/\./g,ho)}function op(s){return csString.prototype.replace.call(s,new csRegExp(ho,"g"),pr)}function ap(s){return csString.prototype.indexOf.call(s,ho)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,pr),op):csString.prototype.split.call(s,pr)}var O=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function qc(s){return s===O.RECORDING_TEMPORARILY||s===O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function uo(s){return s===O.RECORDING_GLOBAL_SAMPLING||s===O.RECORDING_RULES_TARGETING||s===O.RECORDING_URL_SAMPLING||s===O.RECORDING_ETR_SAMPLING}var cp={[O.RECORDING_RULES_TARGETING]:O.RECORDING_GLOBAL_SAMPLING},Kt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),is=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),zt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),In=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),Wc=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Yc=".";function lp(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Yc)}function hp(s){if(!fo(s))return null;let r=Pn(s);return r!==null?Xc(r):null}function Xc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Yc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:In.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:zt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function fo(s){return Wc.test(s)}function Pn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Wc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var we="_cs_ex",fa=2592e6,up=/^[0-9]+$/,dp=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.X=i}onCookieToSet(t){this.Ri=t}onCookieToRemove(t){this.Ci=t}get(){return this.E.cookielessTrackingEnabled?Number(this.X.getItem(we)):Number(this.O.get(we))}set(t){var e;this.E.cookielessTrackingEnabled?this.X.setItem(we,t):(this.O.set(we,t,fa),(e=this.Ri)===null||e===void 0||e.call(this,we,t,fa))}remove(){var t;this.E.cookielessTrackingEnabled?this.X.removeItem(we):(this.O.delete(we),(t=this.Ci)===null||t===void 0||t.call(this,we))}static isValidExclusionString(t){return up.test(t)}}return s})(),Fe="_cs_cvars",fp=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.X=i}onCookieToSet(t){this.Ri=t}onCookieToRemove(t){this.Ci=t}get(){return this.E.cookielessTrackingEnabled?this.X.getItem(Fe):this.O.get(Fe)}set(t){var e;this.E.cookielessTrackingEnabled?this.X.setItem(Fe,t):(this.O.set(Fe,t),(e=this.Ri)===null||e===void 0||e.call(this,Fe,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.X.removeItem(Fe):(this.O.delete(Fe),(t=this.Ci)===null||t===void 0||t.call(this,Fe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var pp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.ml=i,this.yl=n,this.cs=o,this.Ev=c,this.En=l}start(){this.w.addListener(this.Ev),this.w.addListener(this.En),this.w.addListener(this.ml),this.En.init(),this.yl.init(),this.cs.init(),!this.cs.isActive()&&this.S.start()}}return s})(),gp=(()=>{class s{constructor(t){this.vs=t}onOptout(){this.vs.removeExclusion()}}return s})(),mp=(()=>{class s{constructor(t,e){this.Ut=t,this.ut=e}exclude(t){this.ut.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ut.remove()}isExcluded(){return this.Sv()||this.vv()}Sv(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ut.get()}vv(){return csString.prototype.indexOf.call(this.Ut.href,we)>0}}return s})(),yp=["excludeURLforReplay"],Ep=(()=>{class s{constructor(t,e){this.vs=t,this.S=e}init(){this.S.register(yp,t=>{if(W(t))this.vs.setExcludeUrlForSessionReplay(t);else throw new Ot("excludeURLforReplay")})}}return s})(),qr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),Sp=".^",vp=".*",_p=(()=>{class s{constructor(t){this.R=t,this.El=new csRegExp(`${Sp}`)}setExcludeUrlForSessionReplay(t){try{this.El=new csRegExp(t)}catch{z.warn(`excludeURLforReplay - invalid regex '${t}'`),this.El=new csRegExp(`${vp}`)}}kf(){return this.El.test(this.R.getAnonymizedUrl())?qr.SessionReplay:qr.None}isUrlExcludedForSessionReplay(){return this.kf()===qr.SessionReplay}getRequestParameters(){return{ex:this.kf()}}}return s})();var{toString:Tv}=Object.prototype;function Kc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(Kc.Cache||Map),t}Kc.Cache=Map;var{hasOwnProperty:bv}=Object.prototype;var Ei=(()=>{class s{constructor(...t){this.Uf=t}addProvider(t){csArray.prototype.push.call(this.Uf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Uf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),wp=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ap(){return{la:wp}}function Tp(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}function bp(s,r){if(Object.keys(s).length<=r)return s;let t={},e=0;for(let[i,n]of Object.entries(s)){if(e>=r)break;t[i]=n,e++}return t}var Rp=(()=>{let s;return function(r){function e(i,n,o,c){let l={...i,...n,...o,...c};return bp(l,200)}r.mergeAndLimitProperties=e}(s||(s={})),s})(),ms=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Es=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),Cp=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,d,f){super(),this.E=t,this.w=e,this.K=i,this.Pi=n,this.R=o,this.hs=c,this.Ov=l,this.qt=h,this.Wt=d,this.Ol=f,this.As=null}init(){this.Nl()}onStart(t=Es.Natural){switch(t){case Es.Natural:this.Ml();break;case Es.Artificial:this.Dl();break;case Es.Renewal:this.kl();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Oi(t,e)):(Nt(t)&&this.R.overridePath(t,e),this.K.emitTargetingRulesArtificialPageview(this.R.getUrl()),this.E.hasTargetingRules()&&this.R.cleanupOverrideLifespan())}Ml(){this.hs.setPageViewType(ms.Natural);let t=this.R.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.xl(),this.R.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(ms.Natural),this.As=t}kl(){this.hs.setPageViewType(ms.Renewal);let t=this.R.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.xl(),this.w.emitAfterNaturalPageView(ms.Renewal),this.As=t}Oi(t,e,i=!1){Nt(t)&&this.R.overridePath(t,e);let n=this.R.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.As,n),this.hs.setPageViewType(ms.Artificial),this.xl(),this.R.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.As=n}Dl(){this.Oi(null,void 0,!0)}Nl(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Oi())})}Nv(){var t,e,i;let n=(t=this.Ol)===null||t===void 0?void 0:t.getProperties(document,"pageview",this.R.getPath()),o=Rp.mergeAndLimitProperties((e=this.qt)===null||e===void 0?void 0:e.getProperties(),(i=this.Wt)===null||i===void 0?void 0:i.getProperties(),n!=null?n:void 0,void 0);if(Object.keys(o).length>0)return o}xl(){let t=this.Nv(),e=t?{properties:t}:void 0;this.Pi.removeQueryParams(),this.Pi.setQueryParams({...this.Ov.getRequestParameters(),...e?{}:{ct:Ii.UNCOMPRESSED}}),this.Pi.send(e)}}return s})(),Ip=99999,Pp=(()=>{class s{constructor(t){this.C=t,this.Mv=this.Dv()&&window.CSCurrentScript}kv(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.xv(e)?null:Math.round(e.responseEnd-e.fetchStart)}xv(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Mv||this.Lv()!==1)return{};let t=this.kv();return t===null?{}:{dt:`${Math.min(t,Ip)}`}}Lv(){var t;return((t=this.C.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Dv(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Op=["trackPageview"],pa=["setPath"],ga=["setQuery"],ma=["referrer:maskUrl"],Np=["referrer:removeQueryString"],Mp=["referrer:keepQueryString"],Dp="pageview",Wr=s=>fi(s)&&s!==null,kp=(s,r,t,e)=>{s.register(Op,(i,n)=>{if(!W(i)){r.triggerArtificialPageView();return}Wr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(pa,(i,n)=>{if(!W(i))throw new Ot(pa[0]);Wr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(ga,(i,n)=>{if(!W(i))throw new Ot(ga[0]);Wr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(ma,i=>{if(!W(i))throw new Ot(ma[0]);e.addUrlMaskingPattern(i)}),s.register(Np,()=>e.enableRemoveQueryString()),s.register(Mp,()=>e.disableRemoveQueryString()))},xp=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A,k,I){this.E=t,this.S=e,this.w=i,this.Ve=n,this.N=o,this.C=c,this.Ts=l,this.Pt=h,this.Tt=d,this.R=f,this.Yt=m,this.hs=y,this.K=S,this.Ht=T,this.We=C,this.gr=_,this.qt=A,this.Wt=k,this.Ol=I}init(){let t=this.Ht.create(`${this.E.getTrackerUri()}/${Dp}`,"base64"),e=new Ei(this.Ve,this.N,Et,this.Ts,this.R,this.Pt,Wn,this.Tt,this.hs,new Pp(this.C),this.Yt);this.wn=new Cp(this.E,this.w,this.K,t,this.R,this.hs,e,this.qt,this.Wt,this.Ol),this.wn.init(),this.We&&e.addProvider(this.We),this.gr&&e.addProvider(this.gr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}kp(this.S,this.wn,this.R,this.Ts)}start(t){this.wn.start(t)}stop(){this.wn.stop()}onBeforeSessionRenewal(){this.wn.stop()}}return s})();var Jc=["setCustomVariable"],Lp=(()=>{class s{constructor(t,e){this.S=t,this.Tt=e}init(){this.S.register(Jc,(t,e,i,n)=>{this.Tt.set(t,e,i,n)})}onAfterArtificialPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onOptout(){this.Tt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.Tt.removeCustomVariablesSession(),this.Tt.removeCustomVariablesPage()}}return s})();var Vp=["setEncryptionSelectors"],Qc=["setPIISelectors"],Up=["setCapturedElementsSelector"],jp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.nt=i,this.Xt=n,this.Kt=o,this.lt=c,this.mr=l}init(){var t,e;this.mr&&this.lt&&((t=this.mr)===null||t===void 0||t.addSelector((e=this.lt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onBeforeNaturalPageView(t){this.Xt.start(),this.w.emitSensitiveStatusChange()}onStartTracking(t){this.Xt.start(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Xt.stop(),this.Xt.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Xt.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.Xt.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ht(){this.S.register(Qc,t=>{this.nt.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(Up,t=>{this.Kt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(Vp,t=>{var e,i;(e=this.lt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.mr)===null||i===void 0||i.addSelector(t)})}}return s})();var Hp=512,Bp=255,Yr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Hp),this.value=W(e)?csString.prototype.slice.call(e,0,Bp):e}static isKeyValid(t){return W(t)}static isValueValid(t){return W(t)||vs(t)}}return s})(),Fp=(()=>{class s extends jt{constructor(t,e){super(),this.Jt=t,this.M=e,this.Vl=[]}onStart(){csArray.prototype.forEach.call(this.Vl,t=>this.jf(t.key,t.value)),this.Vl=[]}onStop(){}jf(t,e){let i=this.M.anonymizePII(t),n=vs(e)?e:this.M.anonymizePII(e);this.Jt.add(new Yr(i,n))}trackDynamicVariable(t,e){if(Yr.isKeyValid(t)&&Yr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Vl,{key:t,value:e});return}this.jf(t,e)}else throw new Ot(Zc[0])}}return s})(),$p=(()=>{class s{constructor(t){this.de=t,this.Jt=[]}add(t){csArray.prototype.push.call(this.Jt,t),this.setBatchReadyCall()}clear(){this.Jt=[]}onBatchReady(t){this.jv=t}getRequestParameters(){let t={};for(let e of this.Jt)t[e.key]=e.value;return{dv:this.de.compressSync(csJSON.stringify(t),"base64"),ct:this.de.pluginrithm}}setBatchReadyCall(){this.jv()}}return B([Ar({wait:0,mode:"trailing"}),x("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),zp="dvar",Zc=["trackDynamicVariable"],Gp=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.C=e,this.E=i,this.Ve=n,this.de=o,this.M=c,this.qe=new yi(this.E.getTrackerUri(),zp),this.Jt=new $p(this.de),this.vs=new Fp(this.Jt,this.M)}init(){this.qe.setRequestParametersProviders(this.Ve,this.Jt),this.C.setDynamicVariablesService(this.vs),this.Jt.onBatchReady(()=>this.qe.send()),this.qe.after(()=>this.Jt.clear()),this.S.register(Zc,({key:t,value:e}={})=>{this.vs.trackDynamicVariable(t,e)})}onStartTracking(){this.vs.start()}onArtificialPageViewEnd(t){t&&this.vs.stop()}onAfterArtificialPageView(t){t&&this.vs.start()}}return s})();var tl=100,qp=100,Wp=(()=>{class s extends jt{constructor(t,e){super(),this.Bv=t,this.V=e,this.Ce=null,this.Ul=[]}onStart(){csArray.prototype.forEach.call(this.Ul,t=>{this.Ce=t,this.Hf()}),this.Ul=[]}onStop(){}addToCart(t){let e={};W(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,qp)),W(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,tl)),(e.sku||e.merchant)&&(this.Ce=e,this.Hf())}getCartItem(){return this.Ce}Hf(){if(!this.isStarted&&this.Ce!==null){csArray.prototype.push.call(this.Ul,this.Ce),this.clear();return}this.V.refreshSession(),this.V.isSessionValid()&&this.Bv.send()}clear(){this.Ce=null}getRequestParameters(){if(!this.Ce)return{};let t={};return W(this.Ce.sku)&&this.Ce.sku.length>0&&(t.sku=this.Ce.sku),W(this.Ce.merchant)&&this.Ce.merchant.length>0&&(t.me=this.Ce.merchant),t}}return s})(),ya=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),W(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Nt(t)&&Xt(t.revenue)&&W(t.currency)&&t.currency.length<=10&&(!Nt(t.id)||W(t.id))}}return s})(),Yp=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.jl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,tl)),e}static jl(t){return Nt(t)&&W(t.id)&&W(t.name)&&Xt(parseFloat(t.price))&&vs(parseInt(t.quantity,10))&&(!Z(t.sku)||W(t.sku))&&(!Z(t.category)||W(t.category))&&(!Z(t.merchant)||W(t.merchant))}}return s})(),Xp=(()=>{class s extends jt{constructor(t,e,i){super(),this.M=t,this.Bf=e,this.V=i,this.Hl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Hl,t=>{this.fe=t.transaction,this.Tn=t.transactionItems,this.sendTransaction()}),this.Hl=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.fe=ya.from(e)}getTransaction(){return this.fe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Hl,{transaction:this.fe,transactionItems:[...this.Tn]}),this.clear();return}if(!(this.Bf===null||this.V===null)&&(this.V.refreshSession(),!!this.V.isSessionValid())){if(!this.fe.hasValidRevenue()){z.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Bf.send()}}addItem(t){if(Ce(t))throw new Ot(el[1]);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=Yp.from(e);i!==null&&csArray.prototype.push.call(this.Tn,i)}getItems(){return this.Tn}clear(){this.fe=ya.from({revenue:NaN}),this.Tn=[]}getRequestParameters(){let t={id:this.fe.id?`${this.fe.id}`:"",revenue:`${this.fe.revenue}`};return Z(this.fe.tax)&&(t.tax=`${this.fe.tax}`),Z(this.fe.shipping)&&(t.shipping=`${this.fe.shipping}`),Z(this.fe.currency)&&(t.cu=`${this.fe.currency}`),t.items=window.csJSON.stringify(this.Tn),t}}return s})(),Kp=["ecommerce:addToCart","ec:cart:add"],Jp=["ecommerce:addTransaction","ec:transaction:create"],el=["ecommerce:addItem","ec:transaction:items:add"],Qp=["ecommerce:send","ec:transaction:send"],Zp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.yt=e,this.N=i,this.S=n,this.M=o,this.V=c,this.R=l}init(){let t=new yi(this.E.getTrackerUri(),"transaction"),e=new yi(this.E.getTrackerUri(),"addtocart");this.Ue=new Xp(this.M,t,this.V),this.yr=new Wp(e,this.V);let i=new Ei(this.yt,this.N,this.R,this.Ue);t.setRequestParametersProviders(i),t.after(()=>{this.Ue.clear()});let n=new Ei(this.yt,this.N,this.R,this.yr);e.setRequestParametersProviders(n),e.after(()=>{this.yr.clear()}),this.S.register(Jp,o=>{this.Ue.addTransaction(o)}),this.S.register(el,o=>this.Ue.addItem(o)),this.S.register(Qp,()=>this.Ue.sendTransaction()),this.S.register(Kp,o=>{this.yr.addToCart(o)})}onStartTracking(){this.Ue.start(),this.yr.start()}onArtificialPageViewEnd(t){t&&(this.Ue.stop(),this.yr.stop())}onAfterArtificialPageView(t){t&&(this.Ue.start(),this.yr.start())}}return s})();var bs;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(bs||(bs={}));var Ea=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function On(s){return s.tagDeploymentMode===bs.DualCollectionReview||s.tagDeploymentMode===bs.DualCollection}function tg(s){return On(s)||s.tagDeploymentMode===bs.LoadClicktalePtc}var eg="@ETP@",Sa="@user-identifier@",sg=(()=>{class s extends jt{constructor(t,e,i,n){super(),this.E=t,this.zv=e,this.de=i,this.K=n,this.Bl=[],this.Ni=[]}onStart(){csArray.prototype.forEach.call(this.Bl,t=>this.Ff(t)),this.Bl=[],csArray.prototype.forEach.call(this.Ni,t=>this.$f(t)),this.Ni=[]}onStop(){}Ff(t){this.Gv(t)?ai.isSupported()&&this.qv(t):this.Wv(t)}trackPageEvent(t){if(!s.zf(t))throw new Ot(sl[0]);this.isStarted?this.Ff(t):csArray.prototype.push.call(this.Bl,t)}Gv(t){return bn(t,Sa)}async qv(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Sa.length);if(e.length>ai.MAX_DIGEST_INPUT_SIZE){z.warn("UserIdentifier event: invalid user identifier");return}let i=await ai.digest(e);i?(this.Er={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):z.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.K.emitUserIdentifierEvent(e)}Wv(t){this.K.emitPageEvent(t),this.Er={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.E.tagDeploymentMode===bs.LoadClicktalePtc&&Ea.sendPageEvent(t)}$f(t){this.E.malkaEtrEnabled?this.Yv(t):this.Xv(t)}trackEventTriggerRecording(t){if(!s.zf(t))throw new Ot(il[0]);this.isStarted?this.$f(t):csArray.prototype.push.call(this.Ni,t)}Yv(t){bn(t,eg)?this.K.emitEventTriggerRecording(t,is.ETR_PAGE):this.K.emitEventTriggerRecording(t,is.ETR_SESSION),this.Er={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}Xv(t){tg(this.E)&&(this.K.emitEventTriggerRecording(t,is.ETR_LEGACY),this.Er={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.E.tagDeploymentMode===bs.LoadClicktalePtc&&Ea.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.de.compressSync(this.Er.eventName,"base64"),ct:this.de.pluginrithm,isETR:`${this.Er.isETR}`,isCustomHashId:`${this.Er.isCustomHashId}`}}fa(){this.zv.send()}static zf(t){return W(t)&&!!csString.prototype.trim.call(t)}}return s})(),sl=["trackPageEvent"],il=["trackEventTriggerRecording"],ig=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.de=i,this.Ve=n,this.K=o}init(){let t=new yi(this.E.getTrackerUri(),"pageEvent");this.Sr=new sg(this.E,t,this.de,this.K),t.setRequestParametersProviders(this.Sr,this.Ve),this.S.register(sl,e=>{this.Sr.trackPageEvent(e)}),this.S.register(il,e=>{this.Sr.trackEventTriggerRecording(e)})}onStartTracking(){this.Sr.start()}onArtificialPageViewEnd(t){t&&this.Sr.stop()}onAfterArtificialPageView(t){t&&this.Sr.start()}}return s})();function Pe(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var ni=s=>s instanceof HTMLFormElement?"form":s.localName,va=new Map,Xr=!wi&&document.implementation.createHTMLDocument("");function rl(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function rg(s){if(!Er(s))return null;let r=nl(s);if(r===null||r.length===0)return null;let t="";if(Xn(s.textContent))Q(r,e=>t+=e.cssText);else{let e=ng(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];Q(i,n=>t+=n.cssText)}return t}function ng(s){if(!Xr)return 0;let r=va.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Xr.head.appendChild(t);let e=nl(t);return r=e?e.length:0,va.set(s.textContent,r),Xr.head.removeChild(t),r}function nl(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var rs={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Os=(()=>{class s{constructor(t){this.csId=G(t),this.props=ss.getAll(t)}}return s})(),ol=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Re=(()=>{class s extends Os{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=rs.ELEMENT_NODE,this.localName=ni(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=rg(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new ol(c);csArray.prototype.push.call(this.children,l)}(Er(t)||to(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===rs.ELEMENT_NODE}static getAttribute(t,e){return bi(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function og(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function ag(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=lg(r);return t===""||(r=hg(r,t),r.length===0)?"":al(r[0])}function cg(s){return csString.prototype.indexOf.call(s,"@")!==-1}function lg(s){return s.length>0?al(s[0]):""}function hg(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function al(s){let r="",t;cg(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var ug=s=>s;function dg(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let d=c[l],f=Reflect.set(c,l,h);return e.forEach(m=>m(this,h,d,"subproperty")),f}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){st.error(h)}return l}})}function fg(s,r,t){let e=pg(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function pg(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,dg(s,r,i,e),e):(st.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(st.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function gg(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return st.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(As(i),d=>d(c))}catch(d){st.critical(d)}let h=n.apply(this,c);return Ie(()=>{let d={result:h,context:this,args:c};csArray.prototype.forEach.call(l,f=>f(d))},[Qt.MonkeyPatch,`${csString(r)}`]),h};Eg(o,n),s[r]=o}return i}function We({target:s,methodName:r,hook:t,hookPrepareArgs:e=ug,options:i}){let n=gg(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:ag()}:{};return d=>t({...d,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function mg(s,r){return cl(s,r,!1)}function cl(s,r,t=!0){let e=csSymbol.for(r);if(t?s[e]:s.hasOwnProperty(e))return s[e];let i=new Set,n=Object.getOwnPropertyDescriptor(s,r);if(!n)return st.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null;if(!n.configurable)return st.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[e]=i;let o=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var c;let l=this[r],h=arguments;return Ie(()=>{i.forEach(d=>d(this,h[0],l,"property"))},[Qt.MonkeyPatch,o]),(c=n.set)===null||c===void 0?void 0:c.apply(this,h)}}),i}function yg(s,r,t){return Si(s,r,t,!0)}function Si(s,r,t,e=!1){let i=e?mg(s,r):cl(s,r);if(!i)return null;let n=(o,c,l)=>t(o,c,l,"property");return{activate:()=>{i.add(n)},deactivate:()=>{i.delete(n)}}}function Eg(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Tr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return As(this.set)}get count(){return this.set.size}}return s})(),Sg=(()=>{class s extends Tr{constructor(t="high"){super(),this.Kv=t}add(t){this.set.add(t),this.set.size===1&&Gt(()=>{this.set.clear()},this.Kv)}}return s})();function br(s,r=!1){let t=new Tr;return{push(e){t.count===0&&(r?Gt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Te=csSymbol(),po=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,d,f,m,y,S,T;this.A=t,this.Fl=null,this.$l=null,this.zl=null,this.Gl=null,this.ql=null,this.Jv=br(C=>this.processUpdateRulesInATick(C)),this.Wl=null,this.Yl=null,this.Xl=null,this.A=C=>Gt(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Fl=We({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,args:_})=>{this.processInsertRule(C,_)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.$l=We({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:_})=>{this.processDeleteRule(C,_)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.zl=We({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:C})=>this.processUpdateRule(C)})),typeof((d=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||d===void 0?void 0:d.deleteRule)=="function"&&(this.Gl=We({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((f=window.StyleSheet)===null||f===void 0)&&f.prototype&&"disabled"in window.StyleSheet.prototype&&(this.ql=Si(window.StyleSheet.prototype,"disabled",(C,_,A)=>{_!==A&&this.Qv(C,_)})),typeof((y=(m=window.CSSStyleDeclaration)===null||m===void 0?void 0:m.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Wl=We({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let _=C.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),typeof((T=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||T===void 0?void 0:T.removeProperty)=="function"&&(this.Yl=We({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:C})=>{let _=C.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Xl=fg(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Fl)===null||t===void 0||t.activate(),(e=this.$l)===null||e===void 0||e.activate(),(i=this.zl)===null||i===void 0||i.activate(),(n=this.Gl)===null||n===void 0||n.activate(),(o=this.ql)===null||o===void 0||o.activate(),(c=this.Wl)===null||c===void 0||c.activate(),(l=this.Yl)===null||l===void 0||l.activate(),(h=this.Xl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Fl)===null||t===void 0||t.deactivate(),(e=this.$l)===null||e===void 0||e.deactivate(),(i=this.zl)===null||i===void 0||i.deactivate(),(n=this.Gl)===null||n===void 0||n.deactivate(),(o=this.ql)===null||o===void 0||o.deactivate(),(c=this.Wl)===null||c===void 0||c.deactivate(),(l=this.Yl)===null||l===void 0||l.deactivate(),(h=this.Xl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Te]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Jv.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(pi(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[Te]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}Qv(t,e){if(t[Te]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return ct([x()],s.prototype,"observe",null),ct([x()],s.prototype,"disconnect",null),ct([x()],s.prototype,"processInsertRule",null),ct([x()],s.prototype,"processUpdateRule",null),ct([x()],s.prototype,"processUpdateRulesInATick",null),ct([x()],s.prototype,"processDeleteRule",null),s})(),Ns=(()=>{var s;class r{static Zv(e){this.bs.forEach(i=>{e(i,"initial")})}static bn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&Q(n.addedNodes,this.t_),Q(n.removedNodes,this.e_)})),csArray.prototype.push.call(this.Et,e),!this.Rt){this.Rt=!0,this.U.observe(document,this.Rn);for(let i of Ss.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.bs.add(n),this.U.observe(n,this.Rn)}this.Mi||(this.Mi=We({target:Element.prototype,methodName:"attachShadow",hook:i=>this.vr(i.result)&&this.qf(i.result)})),this.Mi.activate()}this.Zv(e)}static vr(e){return e.isConnected&&e.ownerDocument===document}static Cn(e){var i,n;this.Et=csArray.prototype.filter.call(this.Et,o=>o!==e),this.Et.length===0&&(this.Et=[],this.Rt=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.Mi)===null||n===void 0||n.deactivate(),this.bs.clear())}constructor(e){this.A=e,this.A=_s("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return As(s.bs)}static get shadowRootsCount(){if(s.Rt)return As(s.bs).length}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Ss.isSupported()&&s.bn(this.A)}disconnect(){Ss.isSupported()&&s.Cn(this.A)}}return s=r,r.Et=[],r.bs=new Set,r.Rt=!1,r.Rn={childList:!0,subtree:!0},r.qf=t=>{s.bs.has(t)||(s.U.observe(t,s.Rn),s.bs.add(t),Q(s.Et,e=>e(t,"added")))},r.t_=t=>{Jt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.qf)},r.e_=t=>{t.isConnected||Jt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.bs.has(e)&&(s.bs.delete(e),Q(s.Et,i=>i(e,"removed")))})},ct([x()],r.prototype,"observe",null),ct([x()],r.prototype,"disconnect",null),r})(),vg=(()=>{class s{constructor(t){this.s_=1,this.pa=new Set,this.Kl=null,this.Jl=null,this.Ql=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.i_=e=>{let i=e.sheet;if(this.pa.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Te],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Te],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Te],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Te],disabled:e.disabled};this.A(n)}}},this.A=e=>Gt(async()=>{await uc(2),t(e)}),this.pe=new Ns(this.Ql),"adoptedStyleSheets"in Document.prototype&&(this.Kl=Si(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Jl=Si(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Wf=new po(this.i_)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.pe.observe(),(t=this.Kl)===null||t===void 0||t.activate(),(e=this.Jl)===null||e===void 0||e.activate(),this.Wf.observe()}disconnect(){var t,e;this.pa.clear(),this.pe.disconnect(),(t=this.Kl)===null||t===void 0||t.deactivate(),(e=this.Jl)===null||e===void 0||e.deactivate(),this.Wf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.r_(e);let i=Ze(e,o=>o[Te]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}r_(t){Q(t,e=>{if(this.pa.has(e))return;let i=this.s_++;e[Te]=i,this.pa.add(e);let n=this.n_(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}n_(t){let e=[];try{e=Ze(t.cssRules,i=>i.cssText)}catch{}return e}}return ct([x()],s.prototype,"observe",null),ct([x()],s.prototype,"disconnect",null),ct([x()],s.prototype,"setStyleSheets",null),s})(),_g=Is(bg,"optimizeMutations"),wg=csSymbol.for("ignoreNextSerialization");function Ag(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,d=new Set;return{isMovedNode(f){return s.has(f)},markAsMovedNode(f){d.delete(f),s.add(f)},isDetachedMove(f){return!!ft.findAncestor(f,m=>d.has(m),!0)},isAddedNode(f){let m=ft.findAncestor(f,y=>r.has(y)||l.has(y)||s.has(y),!0);return!!m&&!s.has(m)},isMovedNodeIntoAddedNode(f){return s.has(f)&&!!ft.findAncestor(f,m=>r.has(m)||l.has(m),!0)},markAsAddedNode(f){d.delete(f),l.delete(f),r.add(f)},markAsPendingInsert(f){l.add(f)},isPendingInsert(f){return l.has(f)},isRemovedNode(f){return!!ft.findAncestor(f,m=>t.has(m),!0)},markAsRemovedNode(f){t.add(f)},isUselessNode(f){return e.has(f)},markAsUselessNode(f){e.add(f)},getPlaceholder(f,m){let y=m==="previous"?n:i;return f&&y.has(f)?y.get(f)||null:f},getSiblings(f){let m=f.addedNodes.length,y=this.getPlaceholder(f.previousSibling,"previous"),S=this.getPlaceholder(f.nextSibling,"next");if(m){let T=y,C=S,_=f.previousSibling!==y,A=f.nextSibling!==S;for(let k=0;k<m;k++){let I=f.addedNodes[k],b=f.addedNodes[m-k-1];this.isLatestNodeMutation(I,f)?(n.delete(I),f.previousSibling&&_&&(i.set(f.previousSibling,I),_=!1),T=I):n.set(I,T),this.isLatestNodeMutation(b,f)?(i.delete(b),f.nextSibling&&A&&(n.set(f.nextSibling,b),A=!1),C=b):i.set(b,C)}}else f.previousSibling&&f.previousSibling!==y&&i.set(f.previousSibling,S),f.nextSibling&&f.nextSibling!==S&&n.set(f.nextSibling,y);return{previousSibling:y,nextSibling:S}},setAttributeMutation(f,m){let y=o.get(f)||new Set;y.add(m),o.set(f,y)},isAttributeMutated(f,m){var y;return!!(!((y=o.get(f))===null||y===void 0)&&y.has(m))},setLatestNodeMutation(f,m){h.set(f,m)},isLatestNodeMutation(f,m){return h.get(f)===m},markAsFutureAddedNode(f){h.has(f)||d.add(f)},isTextMutated(f){return c.has(f)},setTextMutated(f){return c.add(f)}}}function Tg(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function bg(s){let r=Ag(),t=[];for(let e of s)e.type==="childList"&&Tg(e,r);for(let e of s)switch(e.type){case"attributes":Cg(e,r,t);break;case"characterData":Rg(e,r,t);break;case"childList":Og(e,r,t);break}return t}function Rg(s,r,t=[]){let e=s.target;return ft.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!Pg(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Cg(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ft.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Ig=30;function Pg(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=N.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Ig,!1)}function Og(s,r,t=[]){let e=ft.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,d=()=>{if(h){let{childListType:y,movedNodes:S,...T}=h;csArray.prototype.push.call(t,y==="added"?T:{...T,movedNodes:S}),h=null}},f=y=>y===(h==null?void 0:h.childListType)?h:(d(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let S=s.addedNodes[y];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(h=f("moved"),csArray.prototype.push.call(h.movedNodes,S)):(r.markAsAddedNode(S),n||(h=f("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):ft.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}d()}let m=pc(s.removedNodes,y=>{if(ft.isConnected(y)){if(!i&&!r.isPendingInsert(y)){if(r.isDetachedMove(y))return!0;r.markAsMovedNode(y),r.isMovedNodeIntoAddedNode(y)&&(y[wg]=!0)}return!1}return r.isUselessNode(y)?!1:(r.markAsRemovedNode(y),!0)});return m.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:m,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var _a={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ns=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Zl(e){if(s.shadowRootFilters.length>0&&gi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,_a)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Gt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,_a)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Ss.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Zl(document),this.shadowRootObserver=new Ns(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,Q(this.shadowRootObserver.shadowRoots,n=>{this.Zl(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Yf=i;let n=br(o=>e(o,this),!0);this.A=_s("DocumentMutationObserver:callback",o=>{Q(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?_u(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Yf)}disconnect(){s.disconnect(this.A,this.Yf)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{xt.mutations.count.increase(t.length),U.counters.mutations.push(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{Q(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Zl(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,ct([x()],r.prototype,"observe",null),ct([x()],r.prototype,"disconnect",null),r})(),Ng=(()=>{class s{constructor(t){this.A=t,this.th=!1,this.o_=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>Gt(()=>t(e)),this.Xf=new po(e=>Gt(async()=>{await uc(),this.o_(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Kf=new vg(t))}observe(){var t;this.th=!1,this.U=new ns(e=>this.a_(e),(e,i)=>{i==="added"&&this.c_(e)}),this.U.observe(),this.Xf.observe(),(t=this.Kf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.Xf.disconnect(),(e=this.Kf)===null||e===void 0||e.disconnect(),this.th=!0}a_(t){if(this.th)return;let e=_g(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){st.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:st.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ft.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:pi(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Ze(t.removedNodes,c=>c)};this.A(o)}}c_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return ct([x()],s.prototype,"processAttributeChanged",null),ct([x()],s.prototype,"processCharacterDataChanged",null),ct([x()],s.prototype,"processChildListChanged",null),s})(),Mg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Dg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),kg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),xg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Lg=(()=>{class s extends Os{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Vg=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&to(t)&&(i[n].value=rl(t))}return i}}return s})(),wa={workTime:40,async:!0,initialDOM:!0};var hi=csSymbol("InitialDom"),Aa=csSymbol.for("ignoreNextSerialization");function ll(s){return s[Aa]?(delete s[Aa],!0):!1}function Ug(s=wa){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=wa.workTime);let n=_s("serialize:callback",m=>e(m)),o=new Ti,c=(m,y)=>{m.hasChildNodes()&&o.push({node:m,serializedNode:y});let S=m instanceof Element&&csElementshadowRoot.apply(m);if(S){let T=y.shadowRoot=ui(S);s.async&&s.initialDOM&&it.setProperty(S,hi,!0),c(S,T)}},l,h=!0,d=8,f=_s("work",()=>{var m;if(h)l=ui(t),s.async&&s.initialDOM&&it.setProperty(t,hi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=Bg(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--d<=0&&csSetTimeout(f);return}let{node:S,serializedNode:T}=o.pop(),C=(m=T.children)!==null&&m!==void 0?m:[];if(vr(S))continue;let _=0;for(let A=csNodefirstChild.apply(S);A;A=csNodenextSibling.apply(A)){if(ll(A))continue;let k=ui(A);s.async&&s.initialDOM&&it.setProperty(A,hi,!0),C[_++]=k,c(A,k)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,f();else for(let m=0;m<d;m++)csSetTimeout(f,1)}}function jg(s){let r=ui(s),t=r;if(vr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))ll(n)||(t.children[e++]=Nn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Nn(i)),r}var Nn=Is(jg,"serializeSync");function ui(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Re(s),r.attributes=Fg(s);break;case 3:t=new ol(s);break;case 4:t=new Mg(s);break;case 8:t=new Dg(s);break;case 10:t=new kg(s);break;case 9:t=new xg(s);break;case 11:t=new Lg(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Hg(){hi=csSymbol("InitialDom")}function Bg(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=N.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=N.elapsed()),t-this.started}}}function Fg(s){return vr(s)?[]:Vg.create(s)}var go=(()=>{class s{constructor(t){this.type="asyncEvent",this.eh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.eh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Jf=t,this.eh=!0,this.A&&this.A(this.Jf)}complete(t){this.eh&&t(this.Jf),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),ye=(()=>{class s{constructor(){this.Ot=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:N.now(),t.timestamp==null&&(t.timestamp=N.now()),csArray.prototype.forEach.call(this.Ot,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Ot=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.Ot,t),()=>{let e=csArray.prototype.indexOf.call(this.Ot,t);csArray.prototype.splice.call(this.Ot,e,1)}}}return s})(),$g=Ug(),zg=(()=>{class s extends ye{constructor(){super(...arguments),this.ga=!1}onStart(){this.ga=!0,this.A=og(this.l_,this),this.W=new Ng(this.A),this.W.observe();let t=xt.mutations.initialDOM.asyncMeasure(),e=()=>{this.ga=!1,Hg(),t()};this.produceEvent(new go(i=>$g(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.ga=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.W)===null||e===void 0||e.disconnect()}Qt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=G(e.target),i.targetProps=it.getProperties(e.target)),[e,i]}l_(t){if(!this.h_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Qt(t.type,t);i.attribute=e.attribute,i.isSvg=qs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=ni(e.target),i.linkRel=yc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?ni(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Qt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?ni(e.target.parentElement):null,i.parentProps=e.target.parentElement?it.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Qt(t.type,t);i.targetLocalName=lt(e.target)?ni(e.target):null,i.nextSibling=e.nextSibling?G(e.nextSibling):null,i.previousSibling=e.previousSibling?G(e.previousSibling):null,xt.mutations.serializedMutations.measure(()=>{i.nodes=Ze(e.nodes,Nn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Qt(t.type,t);i.previousSibling=e.previousSibling?G(e.previousSibling):null,i.nextSibling=e.nextSibling?G(e.nextSibling):null,i.nodesIds=Ze(e.nodes,G),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Qt(t.type,t);i.nodesIds=Ze(e.nodes,G),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Qt(t.type,t);i.shadowRoot=ui(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Qt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Qt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Qt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Qt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Qt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Qt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Qt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Qt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}ma(t){return this.ga&&!it.getProperty(t,hi)}h_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.ma(t.target)||M.isMaskedElement(t.target)||M.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.ma(e)||M.isMaskedElement(e)||M.isMaskedElementChild(e))}case"attributeChanged":return this.ma(t.target)||M.isMaskedElementChild(t.target)||M.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.ma(t.target)||M.isMaskedElementChild(t.target);default:return!1}}}return s})(),Rs=(()=>{let s;return function(r){function t(i){return i.type==="DomEvent"}r.isDOMEvent=t;function e(i){return i.domEvent==="attributeChanged"}r.isAttributeChangedEvent=e}(s||(s={})),s})(),Pi=(()=>{class s{constructor(){this.Ot=[]}start(){}stop(){this.Ot.length=0,this.Ot=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.Ot;csSetTimeout(()=>{let n=_s("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.Ot,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.Ot,t),()=>{this.Ot=csArray.prototype.filter.call(this.Ot,e=>e!==t)}}emitEvent(t){Gt(()=>csArray.prototype.forEach.call(this.Ot,e=>e(t)))}}return s.pendingEvents=0,s})(),Gg=(()=>{class s extends Pi{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Rs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Re){let c=M.getMaskedAttributeDetails(n);n.attributes=this.ya(n,c)}if(M.getMaskedElementDetails(n).state===M.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}it.traverse(n,c=>{if(c instanceof Re){let l=M.getMaskedAttributeDetails(c);c.attributes=this.ya(c,l);let h=M.getMaskedElementDetails(c);h.state===M.MaskedElementState.Parent&&(this.Ea(c,h),e++)}})}return e>0&&U.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=M,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],d=M.getMaskedElementDetails(h);if(d.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let f=M.getMaskedAttributeDetails(h);for(let m of(e=f.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[m];d.state===i.Parent&&this.Ea(l,d)}}ya(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ea(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Re.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return Pe([Mt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),fe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return it.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){it.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){it.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),qg=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Wg="\uFF41",Yg=/[^\s]/g,Xg="a";function Kr(s){let r=csString.prototype.replace.call(s,qg,Wg);return csString.prototype.replace.call(r,Yg,Xg)}function Kg(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var Jg=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.us=t,this.In=e,this.M=i,this.Sa=n,this.u_=o,this.Pn=ao(this.In)}sanitize(t,e){return it.traverse(t,(i,n)=>{if(i.anonymized=this.us,i.nodeType===rs.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?it.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Re.isElement(i))return this.d_(i);if(i.nodeType===rs.CDATA_SECTION_NODE){let o=i;o.data=this.us?Kr(o.data):this.M.checkAndAnonymizePII(o.data,this.Sa);return}}),t}setAnonymization(t){this.us=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[fe.ANONYMIZED_TEXT_STATUS_PROP])===fe.WHITELISTED_STATUS;return this.us&&!n?{anonymizedValue:Kr(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.Sa),withAnonymization:!1}}d_(t){let e=bi(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.us,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.f_(e,i,o))return n;if(of(i))return af(e,i,n)?this.M.anonymizePII(n):n;let c=this.u_&&i==="placeholder";return this.us&&(cf(e,i,o)||c)?Kr(n):this.us?"":this.M.checkAndAnonymizePII(n,null)}f_(t,e,i){return nf(t,e,i)||this.Pn.has(e)}}return s})();var Qg=()=>(s,r,t)=>{t.value=Zg(t.value)};function Zg(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Qn(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Qg.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var tm=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return it.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){it.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){it.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),Ye=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?it.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){it.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){it.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var Ta=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function ba(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var em=(()=>{class s extends Pi{constructor(t,e,i=new Ps,n=null,o=!1){super(),this.M=i,this.Sa=n,this.captureAnonymizedPlaceholders=o,this._r=new Jg(t,e,i,n,o)}setAnonymization(t){this._r.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ta.isTextVisibilityEvent(t)||Rs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||Rs.isAttributeChangedEvent(t)&&typeof t.newValue=="string"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.S_(t);if(Ta.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.Sa),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ch(t);break;case"attributeChanged":this.v_(t);break;case"characterDataChanged":this.__(t);break}return t}S_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case rs.TEXT_NODE:case rs.COMMENT_NODE:{let d=n[c];if(Z(d.data)){if(h.localName==="script"){d.data="";continue}}else continue;let{anonymizedValue:f,withAnonymization:m}=this._r.getAnonymizedValue((e=d.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);d.anonymized=m,d.data=f;break}case rs.ELEMENT_NODE:{let d=n[c];if(d.attributes)for(let f in d.attributes){let m=d.attributes[f],y=ba(l);d.attributes[f]=this._r.getAnonymizedAttributeValue(l.namespaceURI,l.localName,f,m,y)}!((i=d.state)===null||i===void 0)&&i.value&&(d.state.value=Kg(d.state.value,ba(l)));break}}}return t}ch(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this._r.sanitize(n,i)}v_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this._r.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}__(t){t.newValue=this._r.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Pe([Mt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var J=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function mo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=sm(r);return e?(Ai(t,",")||(e=im(e)),[Ra(t),...mo(e)]):[Ra(t)]}function sm(s){return csString.prototype.split.call(s,/\s(.+)/)}function Ra(s){return csString.prototype.split.call(s,/,$/)[0]}function im(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var rm=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function nm(s,r){return csString.prototype.replace.call(s,rm,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=am((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${om(l)})`})}function om(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function di(s){let r=new Set;return nm(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),As(r)}function am(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var Ca=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.T_(t);if(!n)return null;let o=await s.np(n),c=de(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.b_(t,n),c=be(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(d=>{d&&csArray.prototype.push.call(h.nestedResources,{hash:d.hash,data:d.data})})),h}static async np(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.op,e);return En(i)}static async T_(t){let e;if(!de(t))e=await(await window.fetch(t)).blob();else{let i=Go(t);if(!i)return null;e=i}return e}static async b_(t,e){let i=new Map,n=be(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!de(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=di(l.data));let f=!1,m=!1;for(let y of l.nestedResources){let S=de(y)?y:l.resourceAbsolutePath?wd(y,l.resourceAbsolutePath):be(y),T=i.get(S);if(T!==void 0){if(T!==null){let _=s.R_(T,y);l.data=ue.stringReplaceAll(l.data,y,_)}continue}bi(c,_=>_.resourceAbsolutePath===S)!==void 0||(f=!0,m||(csArray.prototype.push.call(c,l),m=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:S}))}if(!f){let y=await s.C_(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let f;if(!de(l.resourceAbsolutePath))f=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=Go(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}f=y}let m=await s.np(f);i.set(l.resourceAbsolutePath,{hash:m,data:f})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static R_(t,e){let i=`cs://resources/${t.hash}`;return de(e)||(i+=`?${s.hh}=${e}`),i}static async C_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.op,i);return{data:e,hash:En(n)}}}return s.op="SHA-256",s.hh="original-resource-name",s})(),Mn=(()=>{class s extends Pi{get busy(){return this.uh>0}constructor(){super(),this.I_="cssrm://",this.P_=1,this.ds=!1,this.uh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!Rs.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.O_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.N_(t);break;case"attributeChanged":this.M_(t);break;case"characterDataChanged":this.D_(t);break}return t}disableOnlineAssets(){this.ds=!1}enableOnlineAssets(){this.ds=!0}isOnlineAssetsActivated(){return this.ds}O_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case J.TEXT_NODE:this.ap(o,l==null?void 0:l.localName);break;case J.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let d=o.cssRules[h],f=this.wr(d);f!==null&&(o.cssRules[h]=f)}break}case J.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.wr(h.style)),(this.cp(c.localName)||this.lp(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.fh(h.src)),"srcset"in h&&(h.srcset=this.ph(h.srcset))),this.ds&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let d=this.Di(be(h.href),!0);h["data-cs-original-href"]=h.href,h.href=d}}}}return t}N_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)it.traverse(i,(n,o)=>{if(n.nodeType===rs.TEXT_NODE&&o){this.ap(n,o.localName);return}if(!Re.isElement(n))return;let c=Re.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.wr(c.value)),this.cp(n.localName)||this.lp(n.localName,o==null?void 0:o.localName)){let l=Re.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.fh(l.value));let h=Re.getAttribute(n,"srcset");if(h){h.value=this.ph(h.value);return}}if(this.k_(n)&&this.ds){let l=bi(n.attributes,d=>d.name==="href");if(!l||!l.value)return;let h=this.Di(be(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}ap(t,e){if(!t||e!=="style")return;let i=this.wr(t.data);i!==null&&(t.data=i)}D_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.wr(t.newValue);e!==null&&(t.newValue=e)}M_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.wr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.fh(t.newValue)),i&&(t.newValue=this.ph(t.newValue)))}fh(t){return de(t)||this.ds?this.Di(t,!1,N.now()):t}ph(t){if(!this.ds)return t;let e=t,i=mo(t);for(let n of i){let o=this.Di(be(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}wr(t){let e=di(t),i=t,n=N.now();for(let o of e){let c=de(o);if(!(c||this.ds)||this.x_(o))continue;let l=ef(o),h=o;c?h=this.Di(o,!1,n):this.ds&&(l?h=this.Di(o,!0,n):h=this.Di(be(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}Di(t,e,i=N.now()){let n=this.P_++;this.uh++;let o=e?Ca.toCSSStaticResourceEvent:Ca.toStaticResourceEvent,c=new go(async l=>{try{let h=await o(t,n,i,this.ds);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.uh--}});return this.emitEvent(c),this.I_+n}cp(t){return t==="img"}lp(t,e){return t==="source"&&e==="picture"}k_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return lc()&&hu()&&!!csArray.from}x_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Pe([Mt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Dn=(()=>{class s{push(t){let e={value:t};this.Ar?(this.gh.next=e,this.gh=e):(this.Ar=e,this.gh=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Ar)return;let t=this.Ar;return this.Ar=t.next,this.Ar||(this.gh=void 0),t.value}isEmpty(){return!this.Ar}}return s})(),vi=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),yo=(()=>{class s{constructor(){this.hp=new Dn,this.up=new Dn,this.length=0}push(t,e=vi.Low){return e===vi.High?this.hp.push(t):this.up.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.hp.shift()||this.up.shift()}isEmpty(){return this.length===0}}return s})(),cm=(()=>{class s{get length(){return this.St.length}constructor(){this.Mn=[],this.St=new yo,this.mh=new Set}L_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}V_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${G(t.target)}-${t.type}${this.L_(t)}`}U_(t){switch(t.type){case"state":return vi.High;default:return vi.Low}}j_(t){let e=this.V_(t);if(e){if(this.mh.has(e))return;this.mh.add(e)}return this.St.push({mutation:t,key:e},this.U_(t))}H_(){this.Mn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Mn),t=>this.j_(t)),this.Mn=[])}push(t){csArray.prototype.push.call(this.Mn,t)}shift(){this.H_();let t=this.St.shift();if(t)return t.key&&this.mh.delete(t.key),t.mutation}isEmpty(){return this.St.isEmpty()&&this.Mn.length===0}}return s})(),lm=(()=>{class s{constructor(t){this.ge=t,this.wa=!1,this.Rs=new WeakSet,this.Aa=e=>{let i=e.getRootNode();i&&this.Rs.has(i)&&this.ge(e)}}observe(t){this.Rs.has(t)||(this.Rs.add(t),this.wa||(ss.subscribe(this.Aa),this.wa=!0))}disconnect(){this.wa&&(ss.unsubscribe(this.Aa),this.wa=!1),this.Rs=new WeakSet}}return s})(),Jr=new WeakMap,Qr=new WeakMap;function Ia(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(Jr.has(s))return Jr.get(s);let t=r();return Jr.set(s,t),t}function kn(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function hm(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return Ia(o,()=>{let c=new Proxy(o,{get(l,h){let d=Reflect.get(l,h);return typeof d!="function"?d:Ia(d,()=>i&2?kn(function(...f){let m=Qr.get(this)||this,y=Reflect.apply(d,m,f);return e(m,[r,h],f,y),y},d):kn(function(...f){let m=Qr.get(this)||this;return Reflect.apply(d,m,f)},d))},set:i&1?(l,h,d)=>{let f=Reflect.set(l,h,d);return e(l,[r,h],[d],f),f}:Reflect.set});return Qr.set(c,o),c})}})}function um(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=kn(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function dt(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return es.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{Pc(()=>{for(let d of o)try{d(...h)}catch(f){es.warn(`Error in spy hook for ${r} on target`,i,f)}},"spy",r)};return e.mode?hm(i,r,c,l,e.mode):um(i,r,c,l),()=>o.delete(t)}function Ft(s,r,t){let e=i=>{Pc(()=>{t(i.target)},"listen",r)};return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var dm=(()=>{class s{constructor(t){this.ge=t,this.Ot=new WeakMap,this.ye=e=>this.ge({type:"state",target:e}),this.dp=e=>this.ge({type:"setAdoptedStyleSheets",target:e}),this.Tr=e=>this.ge({type:"styleSheetUpdated",target:e}),this.Dn=e=>{var i;let n=(i=this.B_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.Tr(n)},this.F_=e=>this.ge({type:"styleSheetDisabledChanged",target:e}),this.fp=e=>this.ge({type:"activeElementChanged",target:e.ownerDocument}),this.Aa=e=>this.ge({type:"metadataChanged",target:e})}$_(t){return csNodenodeType.apply(t)===J.DOCUMENT_NODE}z_(t){let e=[Ft(t,"input",this.ye),Ft(t,"change",this.ye),Ft(t,"checked",this.ye),Ft(t,"scroll",this.ye),Ft(t,"toggle",this.ye),Ft(t,"focusin",this.fp),Ft(t,"focusout",this.fp),Ft(t,"pointerover",i=>{this.ge({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Ft(t,"pointerout",i=>{this.ge({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Ft(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.ge({type:"loaded",target:i});break}})];this.Ta(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}G_(t){let e=t.defaultView;if(!e)return;let i=[Ft(e,"resize",()=>this.ye(t)),Ft(t,"visibilitychange",()=>this.ye(t)),Ft(t,"fullscreenchange",()=>this.ye(t)),dt(e.Document,"adoptedStyleSheets",this.dp,{mode:2}),dt(e.ShadowRoot,"adoptedStyleSheets",this.dp,{mode:2}),dt(e.Element,"attachShadow",(n,o,c,l)=>{this.ge({type:"attachShadow",target:n,shadowRoot:l})}),dt(e.HTMLInputElement,"value",this.ye),dt(e.HTMLInputElement,"checked",this.ye),dt(e.HTMLSelectElement,"selectedIndex",this.ye),dt(e.CSSStyleSheet,"insertRule",this.Tr),dt(e.CSSStyleSheet,"deleteRule",this.Tr),dt(e.CSSStyleSheet,"replace",this.Tr),dt(e.CSSStyleSheet,"replaceSync",this.Tr),dt(e.CSSStyleSheet,"addRule",this.Tr),dt(e.CSSStyleRule,"style",this.Dn,{mode:1}),dt(e.CSSGroupingRule,"insertRule",this.Dn),dt(e.CSSGroupingRule,"deleteRule",this.Dn),dt(e.CSSStyleDeclaration,"setProperty",this.Dn),dt(e.CSSStyleDeclaration,"removeProperty",this.Dn),dt(e.StyleSheet,"disabled",this.F_),dt(e.HTMLDialogElement,"show",this.ye),dt(e.HTMLDialogElement,"showModal",this.ye),dt(e.HTMLDialogElement,"close",this.ye),dt(e.CustomElementRegistry,"define",(n,o,c)=>{this.ge({type:"customElementRegistration",target:t,name:c[0]})})];this.Ta(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}B_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}q_(t){let e=new csMutationObserver(i=>{this.ge(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.Ta(t,()=>{e.disconnect()})}W_(t){let e=new lm(this.Aa);e.observe(t),this.Ta(t,()=>{e.disconnect()})}Ta(t,e){this.Ot.get(t)==null||csArray.prototype.push.call(this.Ot.get(t),e)}observe(t){this.Ot.has(t)||(this.Ot.set(t,[]),this.z_(t),this.$_(t)&&this.G_(t),this.q_(t),this.W_(t))}disconnect(t){let e=this.Ot.get(t)||[];for(let i of e)try{i()}catch(n){es.warn(n)}this.Ot.delete(t)}}return s})(),hl=new yo,ot,fm=40,pm=10;function gm(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%pm===0&&(t=performance.now(),i=t-e<fm),r++,i}})},0)}function Pa(){var s;let r=(s=ot==null?void 0:ot.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=ot==null?void 0:ot.subTasks,r):hl.shift()}function ul(){gm(s=>{for(ot||(ot=Pa());s.hasTimeLeft&&ot;){ot.isRunning=!0;try{ot.isEnded=ot.run(s)!==!0}catch(r){es.error("Error occurred while running task:",r),ot.isEnded=!0}ot.isRunning=!1,(ot.isEnded||ot.isAborted)&&(ot=Pa())}ot&&ul()})}function ri(s,r=vi.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return ot!=null&&ot.isRunning?(ot.subTasks=ot.subTasks||new yo,ot.subTasks.push(t,r)):hl.push(t,r)===1&&!ot&&ul(),t}var mm=40;function Oa(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function Zr(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var tn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function en(s,r){return!!s&&r in s&&!!s[r]}var Na={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},xn=(()=>{class s{constructor(t){this.A=t,this.W=new dm(e=>{this.yh.push(e),this.Y_()}),this.Ye={},this.Xe=new Map,this.yh=new cm,this.kn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.pp=0,this.gp=mm}disconnect(){for(let t of this.kn.values())this.W.disconnect(t);this.kn.clear()}observe(t){return this.disconnect(),this.ba(t),this}getState(t=!0){let e=this.Ye;return this.Ye={...e},t&&this.mp(),e}getChanges(){let t={};for(let[i,n]of this.Xe){let o=this.Ye[i];if(!(n&&!o))if(o&&!n)t[i]=Je(o);else{let c=Fc(n,o);c!==void 0&&(t[i]=c)}}return this.mp(),Bc(t)?t:void 0}setFrameRate(t){return this.gp=t/1e3,this}onChange(t){return this.A=t,()=>{this.A===t&&(this.A=void 0,this.xn&&(csClearTimeout(this.xn),this.xn=void 0))}}async getStateAsync(t=!0){return await this.yp(),this.getState(t)}async getChangesAsync(){return await this.yp(),this.getChanges()}async yp(){return new Promise(t=>{ri(()=>t())})}mp(){this.Xe.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=Oa(e);return t?`${Oa(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:Zr(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:Zr(n),name:Zr(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=m=>{c.has(m)?c.delete(m):o.add(m)},h=m=>{o.has(m)?o.delete(m):c.add(m)};function d(m,y){for(let S of tn)S in y&&(en(m,S)&&l(m[S]),en(y,S)&&h(y[S]))}for(let[m,y]of Object.entries(e)){if(y===null)continue;let S=m,T=n[S],C=T===void 0?y:$c(T,y);d(T,y),n[S]=C}let f=m=>{if(c.has(m))return;let y=n[m];if(y){delete n[m],i==null||i(m);for(let{nodeId:S}of s.nodeRelationsEntries(y))f(S)}};for(let m of o)f(m);return n}static nodeRelationsEntries(t,e=!1){let i=e?tn.filter(o=>o!=="nextSibling"):tn,n=[];for(let o of i)en(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}vt(t){if(t in this.Ye&&!this.Xe.has(t)){let e=this.Ye[t];this.Xe.set(t,Je(e)),this.Ye[t]=Je(e)}return this.Ye[t]}X_(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:J.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:J.CSS_STYLESHEET_NODE,cssRules:{}}}}K_(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}J_(t){let e=ss.getAll(t);switch(csNodenodeType.apply(t)){case J.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.K_(i),c={type:J.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&G(n),hoveredId:o&&G(o),...this.Ep(t),metadata:e};return i.compatMode==="BackCompat"&&(c.quirksMode=!0),c}case J.DOCUMENT_FRAGMENT_NODE:return{type:J.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case J.COMMENT_NODE:return{type:J.COMMENT_NODE,data:void 0,metadata:e};case J.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:J.ELEMENT_NODE,namespaceURI:n in Na?Na[n]:n,localName:i.localName,attributes:this.Q_(i),state:this.Sp(i),metadata:e}}case J.TEXT_NODE:return{type:J.TEXT_NODE,data:t.data||"",metadata:e};case J.CDATA_SECTION_NODE:return{type:J.CDATA_SECTION_NODE,data:t.data,metadata:e};case J.DOCUMENT_TYPE_NODE:return{type:J.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}Q_(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}Ep(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}Sp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}Y_(){var t;((t=this.Z_)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.Z_=ri(e=>(this.br(e),this.vp(),!this.yh.isEmpty())))}vp(){if(!this.A||this.xn)return;let t=performance.now()-this.pp,e=Math.max(0,this.gp-t);this.xn=csSetTimeout(()=>{this.xn=void 0;let i=this.getChanges();this.pp=performance.now(),i&&this.A(i,this.getState())},e)}tw(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.fs(e))return G(e)}ew(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.fs(i))return G(i)}ba(t){let e=new Dn;e.pushMany(this._p(t,!1)),!e.isEmpty()&&ri(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this._p(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}iw(t){switch(t){case J.DOCUMENT_NODE:return"contentDocument";case J.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Rr(t){ri(()=>{let e=t.ownerNode;if(e&&(!this.vr(e)||!this.fs(e)))return!1;if(this.fs(t)||!e||e.localName==="style"?this.wp(t):this.Eh(G(t),{type:J.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.fs(e)){let i=G(e);this.vt(i).sheetId=G(t)}return!1})}Ap(t){let e=0,i=G(t),n=t.adoptedStyleSheets||[],o=n.length,c={};ri(l=>{if(!this.fs(t)||!this.vr(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let d=n[e];c[e]=this.fs(d)?G(d):this.wp(d),e+=1}if(e<o)return!0;let h=this.vt(i);return h&&(h.adoptedStyleSheets=c),!1})}wp(t){let e=G(t);return this.Eh(e,this.X_(t)),e}Eh(t,e){this.serializedNodeCount++,this.Ye[t]=e,this.vp(),this.Xe.has(t)||this.Xe.set(t,null)}fs(t){return G(t)in this.Ye}Tp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}bp(t){let e=G(t),i=this.Ye[e];if(!i){es.warn(`No serialized node id ${e}`);return}let n=this.ew(t);if(!n){es.warn("No parent id for node",t);return}let o=this.iw(i.type);if(o==="childList"){let c=this.tw(t);this.Sh(e,c,n,!0)}else{let c=this.vt(n);c[o]=e,i.parent=n}}*_p(t,e=!0){var i,n,o,c;if(!this.vr(t))return;if(this.fs(t)){e&&this.bp(t);return}let l=G(t),h=this.J_(t);if(!h){es.warn("Node was not serialized",t);return}switch(this.Eh(l,h),e&&this.bp(t),h.type){case J.DOCUMENT_NODE:case J.DOCUMENT_FRAGMENT_NODE:{let f=t;this.kn.set(l,f),this.W.observe(f),!((i=f.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.Ap(f);break}case J.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case J.ELEMENT_NODE:{let f=t;switch(h.localName){case"iframe":this.Tp(f)&&(yield f.contentDocument);break;case"link":f.rel==="stylesheet"&&f.sheet&&this.Rr(f.sheet);break;case"style":{let m=f.sheet;m&&this.Rr(m);break}default:$f(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Rp(G(t.ownerDocument),h.localName),csElementshadowRoot.apply(f)&&(yield csElementshadowRoot.apply(f));break}break}}let d=csNodefirstChild.apply(t);d&&(yield d)}Rp(t,e){let i=this.vt(t),n=i.customElements||(i.customElements={});n[e]=1}vh(t){let e=this.vt(t);if(e){switch(e.type){case J.DOCUMENT_NODE:case J.DOCUMENT_FRAGMENT_NODE:this.W.disconnect(this.kn.get(t)),this.kn.delete(t)}delete this.Ye[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.vh(i)}}Sh(t,e,i,n){let o;if(e){let c=this.vt(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.vt(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.vt(t);if(c.nextSibling=o,o){let l=this.vt(o);l.previousSibling=t}}if(t){let c=this.vt(t);c.parent=i,c.previousSibling=e}}rw(t){var e;let i=this.vt(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.vt(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}vr(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}nw(t){let e=this.vt(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}br(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.yh.shift());){if(this.processedMutationsCount++,!this.fs(n.target)||!this.vr(n.target))continue;let o=G(n.target);switch(n.type){case"attachShadow":{this.ba(n.shadowRoot),this.vt(o).shadowRoot=G(n.shadowRoot);break}case"childList":{let c,l=this.rw(o);for(let d=csNodefirstChild.apply(n.target);d;d=csNodenextSibling.apply(d)){this.fs(d)||this.ba(d);let f=G(d);l.delete(f),this.Sh(f,c,o),c=f}this.Sh(void 0,c,o);for(let d of l)this.nw(d),this.vh(d);let h=this.vt(o);if(h.type===J.ELEMENT_NODE&&h.localName==="style"){let d=n.target.sheet;d&&this.Rr(d)}break}case"characterData":{let c=this.vt(o);if(c.type===J.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Rr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.vt(o),d=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},d===null?delete h.attributes[c]:h.attributes[c]=d;break}case"state":{let c=this.vt(o);c.type===J.DOCUMENT_NODE?Object.assign(c,this.Ep(n.target)):c.state=this.Sp(n.target);break}case"setAdoptedStyleSheets":{this.Ap(n.target);break}case"styleSheetUpdated":{this.Rr(n.target);break}case"styleSheetDisabledChanged":{let c=this.vt(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Rr(c.sheet);break}case"iframe":{let c=n.target,l=this.vt(o),h=c.contentDocument,d=h&&G(h);l.contentDocument&&l.contentDocument!==d&&(this.vh(l.contentDocument),delete l.contentDocument),this.Tp(c)&&this.ba(h);break}}break}case"activeElementChanged":{let c=this.vt(o),l=n.target.activeElement||void 0;c.activeId=l&&G(l);break}case"pointerOverElement":{let c=this.vt(o),l=n.element||void 0;c.hoveredId=l&&G(l);break}case"customElementRegistration":{this.Rp(o,n.name);break}case"metadataChanged":{let c=this.vt(o);c&&(c.metadata=Je(ss.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=Je,s})(),ym=(()=>{class s extends Pi{constructor(t){super(),this.Q=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||Rs.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(Rs.isDOMEvent(t))t.initialDOM.baseURI=this.Q.anonymizeUrl(t.initialDOM.baseURI);else for(let e of xn.findNodes(t.state,i=>i.type===J.DOCUMENT_NODE))e&&e.type===J.DOCUMENT_NODE&&(e.baseURI=this.Q.anonymizeUrl(e.baseURI));return t}}return Pe([Mt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Em="textarea",Sm=(()=>{class s extends Pi{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Rs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.ow(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.aw(t);break;case"characterDataChanged":this.lw(t);break}return t}ow(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.Cp(o,c.metadata,l.localName)}}aw(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)it.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.Cp(n,h,l)})}Cp(t,e,i){this.Ip(i,e)&&(t.data=this.Pp(t.data))}lw(t){this.Ip(t.parentLocalName,t.targetProps)&&(t.newValue=this.Pp(t.newValue))}Pp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Ip(t,e){return t===Em||(e==null?void 0:e[Ye.EDITABLE_NODE_PROP])===!0}}return Pe([Mt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),vm=(()=>{class s extends ye{async onStart(){this.Cr&&this.Cr.disconnect(),this.Cr=new xn().observe(document);let t=await this.Cr.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:xn.cloneDeep(t)}),this.Ln=this.Cr.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})}onStop(){var t;(t=this.Ln)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Cr)===null||t===void 0||t.disconnect(),this.Cr=void 0}}return s})(),dl=!0,rr=csSymbol("safe"),Ma=csSymbol("task");function Lt(s,r=dl){var t;(t=s[rr])!==null&&t!==void 0||(s[rr]=function(e){let i=arguments;Ie(()=>(e[Ma]=kt,s.listener.apply(s.boundElement,i)),[Qt.EventListener,s.type],e[Ma])}),s.boundElement.addEventListener(s.type,s[rr],r)}function Vt(s,r=dl){s.boundElement.removeEventListener(s.type,s[rr],r)}var _m=(()=>{class s{constructor(t){this.A=t,this.Zt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){Lt(this.Zt),this._h()}_h(){this.resizeListener()}disconnect(){Vt(this.Zt)}resizeListener(){let t={width:Et.windowWidth(),height:Et.windowHeight()};this.A(t)}}return ct([x("resize")],s.prototype,"resizeListener",null),s})(),qe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Ki=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ji=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),wm=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=et.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in et;function e(){return qe.LANDSCAPE}function i(){var c;switch((c=et.screen.orientation)===null||c===void 0?void 0:c.type){case Ki.PORTRAIT_PRIMARY:case Ki.PORTRAIT_SECONDARY:return qe.PORTRAIT;case Ki.LANDSCAPE_PRIMARY:case Ki.LANDSCAPE_SECONDARY:return qe.LANDSCAPE;default:return qe.PORTRAIT}}function n(){switch(window.orientation){case Ji.PORTRAIT:case Ji.PORTRAIT_REVERSE:return qe.PORTRAIT;case Ji.LANDSCAPE:case Ji.LANDSCAPE_REVERSE:return qe.LANDSCAPE;default:return qe.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),Am=(()=>{class s extends ye{constructor(){super(...arguments),this.Ah=null,this.Th=null,this.ei=new _m(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=wm.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.hw(t);if(e!==this.Ah||i!==this.Th){this.Ah=e,this.Th=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}hw(t){let e,i,n=Et.screenWidth(),o=Et.screenHeight();return t===qe.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ei.observe()}onStop(){this.Ah=null,this.Th=null,this.ei.disconnect()}}return s})(),Gs=(()=>{class s{get selectors(){return this.Ke===""?null:this.Ke}constructor(t,e={closest:!1}){this.A=t,this.Nt=e,this.Ke="",this.Vn=new Tr,this.br=Is(i=>{if(this.Ke==="")return;let n=[];for(let o of fc(i,c=>c.addedNodes)){if(!(Gu(o)||this.Nt.closest&&lr(o)))continue;let c=this.Nt.closest?this.uw(o,this.Ke):this.findMatchingElements(o,this.Ke);Ko(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.fw=(i,n)=>{if(this.Ke===""||n!=="added")return;let o=this.findMatchingElements(i,this.Ke);o.length&&this.A(o,"added")},this.W=new ns(this.br,this.fw)}observe(t){this.Ke===""?this.W.observe():this.Ke+=",",this.Ke+=t;let e=this.findMatchingElements(document,t);for(let i of this.W.shadowRoots){let n=this.findMatchingElements(i,t);Ko(n,e)}e.length&&(Q(e,i=>{this.Vn.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.br(this.W.takeRecords())}disconnect(){this.W.disconnect(),this.Vn.clear(),this.Ke=""}uw(t,e){let i=[];if(lr(t)){if(t.parentElement){let n=Cn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Vn.has(n)===!1)}else{if(yr(t)){let n=Cn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Vn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=pi(window.csquerySelectorAll[t.nodeType].call(t,e));return lt(t)&&se.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Vn.has(n)===!1)}}return ct([x()],s.prototype,"observe",null),ct([x()],s.prototype,"disconnect",null),ct([Mt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),Tm=(()=>{class s extends ye{constructor(){super(),this.Op=t=>{let e=yt(t);e&&this.bh(e,t.type)},this.pe=new Ns((t,e)=>{switch(e){case"initial":case"added":this.Np(t);break;case"removed":this.Mp(t);break}}),this.G=new Gs((t,e)=>{(e==="initial"||e==="added")&&this.pw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ft.isConnected(t)&&!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Np(document),this.pe.observe(),this.G.observe("video")}onStop(){this.Mp(document),this.pe.disconnect(),this.G.disconnect()}bh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=G(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Qn(()=>this.produceEvent(o))}}pw(t){for(let e of t)this.bh(e,"seeked"),s.isPlaying(e)&&this.bh(e,"play")}Np(t){for(let e of["play","pause","seeked"])Lt({type:e,listener:this.Op,boundElement:t})}Mp(t){for(let e of["play","pause","seeked"])Vt({type:e,listener:this.Op,boundElement:t})}}return s})();function bm(s){return s.nodeName==="SELECT"}function Eo(s){return s.nodeName==="INPUT"}function Rm(s){return s.nodeName==="TEXTAREA"||Eo(s)&&!fl(s)&&!pl(s)}function fl(s){return Eo(s)&&s.type==="number"}function pl(s){return Eo(s)&&(s.type==="checkbox"||s.type==="radio")}var Cm=(()=>{class s extends ye{constructor(t,e=[]){super(),this.lt=t,this.gw=e,this.Rh=new Sg("low"),this.Ir=i=>this.inputHandler(i),this.Ra=[],this.Ch=new Map,this.mw(),this.yw(),this.G=new Gs(i=>{for(let n of i){if(n instanceof HTMLInputElement)for(let o of this.gw)this.Ew(n,o);this.Ih(n)&&Gt(()=>{this.Ph(n,G(n))},"low")}}),this.pe=new Ns((i,n)=>{switch(n){case"initial":case"added":Lt({type:"change",listener:this.Ir,boundElement:i});break;case"removed":Vt({type:"change",boundElement:i,listener:this.Ir});break}})}Ew(t,e){let i=this.Ch.get(e);if(!i)i=new WeakSet,this.Ch.set(e,i);else if(i.has(t))return;i.add(t);let n=yg(t,e,(o,c,l)=>{l!==c&&ft.isConnected(o)&&this.Dp(o)});n&&(this.isStarted&&n.activate(),csArray.prototype.push.call(this.Ra,n))}onStart(){Lt({type:"keyup",boundElement:document,listener:this.Ir}),Lt({type:"change",boundElement:document,listener:this.Ir}),Q(this.Ra,t=>t.activate()),this.G.observe(csArray.prototype.join.call(s.Sw,",")),this.pe.observe()}onStop(){Vt({type:"keyup",boundElement:document,listener:this.Ir}),Vt({type:"change",boundElement:document,listener:this.Ir}),Q(this.Ra,t=>t.deactivate()),this.G.disconnect(),this.pe.disconnect(),this.Rh.clear(),this.Ch.clear()}Ph(t,e){var i,n,o;if(this.Rh.has(t))return;if(this.Rh.add(t),bm(t)){let h={type:"InputEvent",inputType:"select",target:G(t),selectedIndex:t.selectedIndex,timestamp:N.now()};this.produceEvent(h);return}if(pl(t)){let h={type:"InputEvent",inputType:"checkable",target:G(t),checked:t.checked,timestamp:N.now()};this.produceEvent(h);return}let c=Rm(t),l=fl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.lt)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.lt)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:N.now()});return}let d=l?"0":"\u2022",f={type:"InputEvent",inputType:"text",target:G(t),value:csString.prototype.replace.call(h,/\S/g,d),timestamp:N.now()};this.produceEvent(f)}}inputHandler(t){if(!this.isStarted)return;let e=yt(t),i=G(e);!i||!this.Ih(e)||ft.isConnected(e)&&Gt(()=>{this.Ph(e,i)},"low")}mw(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}yw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Si(t.prototype,e,(o,c,l)=>{if(l!==c&&ft.isConnected(o)){let h=i?o.parentElement:o;this.Dp(h)}});n&&csArray.prototype.push.call(this.Ra,n)}Ih(t){return!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)&&(Sr(t)||so(t)||eo(t))}Dp(t){if(this.isStarted&&ft.isConnected(t)){let e=G(t);e&&this.Ih(t)&&Gt(()=>{this.Ph(t,e)},"low")}}}return s.Sw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Pe([At()],s.prototype,"inputHandler",null),Pe([x()],s.prototype,"trackChanges",null),s})();var Im=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.si=[],this.it=[],this.vw=t}next(t){this.it.length===this.vw&&csArray.prototype.shift.call(this.it),csArray.prototype.push.call(this.it,t),this.it.length===1&&csSetTimeout(()=>this.clear());for(let e of this.si)e(t)}subscribe(t){if(bi(this.si,i=>t===i))return()=>{this.si=csArray.prototype.filter.call(this.si,i=>i!==t)};csArray.prototype.push.call(this.si,t);for(let i of this.it)t(i);return()=>{this.si=csArray.prototype.filter.call(this.si,i=>i!==t)}}clear(){this.it=[]}hasObservers(){return this.si.length>0}}return s})(),gl=(()=>{var s;class r{constructor(e){this.A=e}observe(){this._w=s.Un.subscribe(e=>this.A(e)),s.Ca||(s.Ca=!0,s.Nn.observe(),Jt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Cs.add(i),s.Un.next(i)}))}disconnect(){s.Ca&&(this._w(),s.Un.hasObservers()||(s.Ca=!1,s.Nn.disconnect(),s.Un.clear(),s.Cs.clear()))}}return s=r,r.Cs=new Tr,r.Un=new Im,r.Aw=Is(t=>{Gt(()=>{for(let e of t)e.type==="childList"&&Q(e.addedNodes,i=>{Jt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Cs.has(o)||(s.Cs.add(o),s.Un.next(o))})})})},"ElementObserver.findAllElements"),r.Ca=!1,r.Nn=new ns(s.Aw),ct([x()],r.prototype,"observe",null),ct([x()],r.prototype,"disconnect",null),r})(),Pm=(()=>{class s extends ye{constructor(){super(),this.ki=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Tw=_s("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)M.isMaskedElement(i)||M.isMaskedElementChild(i)||Wu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=br(this.Tw);this.Hn=new gl(e=>t.push(e)),this.ti=new Set}onStart(){this.ki&&this.Hn.observe()}onStop(){this.ti.clear(),this.Hn.disconnect()}async register(t){this.ti.has(t)||(this.ti.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Pe([x()],s.prototype,"register",null),s})(),Da=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static kp(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.bw(t))}static bw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.xi=i,s.Pr(i))}static bn(t){this.Rw(t),this.xi&&t(this.xi),this.je||this.Cw()}static Rw(t){this.Lt.add(t)}static Iw(t){this.Lt.delete(t)}static Cw(){if(this.Bn||(this.Bn=this.kp()),!this.Bn){this.xi||(this.xi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Pr(this.xi);return}this.Bn.observe({type:"navigation",buffered:!0}),this.je=!0}static Pr(t){this.Lt.forEach(e=>e(t))}static Cn(t){this.Iw(t),this.Lt.size===0&&this.Fn()}static Fn(){var t;this.je&&((t=this.Bn)===null||t===void 0||t.disconnect(),this.je=!1,this.xi=null,this.Bn=this.kp())}constructor(t){this.A=t}observe(){s.bn(this.A)}disconnect(){s.Cn(this.A)}}return s.je=!1,s.Lt=new Set,s.xi=null,s})(),Om=(()=>{class s extends ye{constructor(){super(...arguments),this.Ia=null,this.xp=new Da(t=>{if(this.Ia)return;let e=this.Pw(t);e&&(this.Ia=e,this.produceEvent(e))})}onStart(){if(this.Ia){this.produceEvent(this.Ia);return}this.xp.observe()}onStop(){this.xp.disconnect()}Pw(t){let e=Da.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:N.now()}}}return s})(),St=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Qi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Nm=(()=>{class s{compute(t,e){let i=this.ii(e.x)-this.ii(t.x),n=this.ii(e.y)-this.ii(t.y),o=e.time-t.time;return{duration:o,distance:this.Lp(i,n),direction:this.Ow(i,n),velocity:this.Nw(i,n,o)}}computePinchMetrics(t,e){let i=this.ii(e.x)-this.ii(t.x),n=this.ii(e.y)-this.ii(t.y);return{duration:e.time-t.time,distance:this.Lp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}ii(t){return t/window.devicePixelRatio}Lp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Nw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}Ow(t,e){return Math.abs(t)>Math.abs(e)?t>0?Qi.RIGHT:Qi.LEFT:e>0?Qi.DOWN:Qi.UP}}return s})();function ka(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Mm=1e3,Dm=100,km=.1,Ln=(()=>{class s{constructor(){this.te={},this.Oh=()=>{},this.Pa=new Nm,this.Vp()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Oh=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.Mw(t))return;this.Dw(t)&&this.Vp();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:N.now()};if(t.touches.length===1)this.te.startPinchTime=e.time,this.te.firstTouch=e;else if(t.touches.length===2&&(this.te.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:N.now()},this.te.firstTouch&&this.te.secondTouch)){let i=this.Pa.computePinchMetrics(this.te.firstTouch,this.te.secondTouch);this.Or=i.distance}csArray.prototype.push.call(this.$n,e),this.Oa=yt(t)}processActionMove(){this.Nh=!0}processActionUp(t){if(this.kw(t)){if(csArray.prototype.push.call(this.$n,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:N.now()}),this.xw(t)&&this.te.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.te.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:N.now()};this.te.firstTouch&&(this.te.firstTouch=e,this.te.secondTouch=i),this.Lw(t)}this.Or||this.Vw()&&this.Uw(t)}}Vp(){this.$n=[],this.Oa=null,this.Nh=!1,this.Or=null,this.zn=!0}Uw(t){let e=this.Pa.compute(this.$n[0],this.$n[1]);this.zn=t.isTrusted;let i=this.Nh?this.jw(e):this.Hw(e);if(this.Bw(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=ka(n.pageX,1),i.pageY=ka(n.pageY,1)}this.Oh(i,t)}Lw(t){if(!(this.te.firstTouch&&this.te.secondTouch))return;let e=this.Pa.computePinchMetrics(this.te.firstTouch,this.te.secondTouch);this.zn=t.isTrusted;let i=this.Fw(e);i&&this.Oh(i,t)}Fw(t){return!this.Or||this.Pa.getScale(this.Or,t.distance)<km?void 0:{type:this.Or>t.distance?St.PINCH_IN:St.PINCH_OUT,target:this.Oa,distance:t.distance,isTrusted:this.zn}}jw(t){return{type:t.velocity<Dm?St.DRAG:St.FLICK,target:this.Oa,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.zn}}Hw(t){return{type:t.duration<Mm?St.TAP:St.LONG_PRESS,target:this.Oa,isTrusted:this.zn}}Bw(t,e){return t===St.TAP&&e&&e.length===1}Dw(t){return t.touches.length===1}Vw(){return this.$n.length===2}Mw(t){return t.touches.length>0}kw(t){return t.changedTouches.length>0}xw(t){return this.Nh&&!!this.Or&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),xm="touchstart",Lm="touchmove",Vm="touchend",Um=(()=>{class s{constructor(t){this.A=t}observe(){s.Up&&s.Mh(this.A)}disconnect(){s.Up&&s.Ln(this.A)}static $w(t,e){csArray.prototype.forEach.call(As(s.Lt),i=>i(t,e))}static Mh(t){s.Lt.has(t)||(s.Lt.add(t),s.Lt.size===1&&(s.Gn.onGesture(s.$w),csArray.prototype.forEach.call(s.ni,e=>Lt(e))))}static Ln(t){s.Lt.delete(t),s.Lt.size===0&&csArray.prototype.forEach.call(s.ni,e=>Vt(e))}static Dh(t){if(s.Gn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Gn.processActionDown(t);break;case"touchmove":s.Gn.processActionMove();break;case"touchend":s.Gn.processActionUp(t);break}}}return s.ni=[{boundElement:et.document,type:xm,listener:r=>s.Dh(r)},{boundElement:et.document,type:Lm,listener:r=>s.Dh(r)},{boundElement:et.document,type:Vm,listener:r=>s.Dh(r)}],s.Up=Ln.isGestureDetectionSupported(),s.Lt=new Set,s.Gn=new Ln,s})(),jm=(()=>{class s extends ye{constructor(){super(),this.qn=new Um(this.kh.bind(this))}onStart(){this.qn.observe()}onStop(){this.qn.disconnect()}kh(t){let e=this.zw(t);e&&this.produceEvent(e)}zw(t){return this.Gw(t)?{type:"Gesture",targetId:G(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Gw(t){return t.target!==null&&!(lt(t.target)&&M.isMaskedElementChild(t.target))}}return s})();var Bs=[],Vn=!1,ml=Is(Bm,"executeTasks");function Hm(s){if(csArray.prototype.push.call(Bs,s),!Vn){for(let r=0;r<3;r++)csSetTimeout(ml);Vn=!0}}function Bm(){let s=csDate.now();for(let r=0;r<Bs.length;r++)if(Bs[r](),csDate.now()-s>=35){Bs=csArray.prototype.slice.call(Bs,r+1),csSetTimeout(ml);return}Bs=[],Vn=!1}var $e=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),yl=(()=>{class s{constructor(){this.St=new Ti,this.kt=$e.Stopped,this.A=null,this.Bp=t=>{this.kt===$e.Stopped||!t||(this.A(t),this.Fp())}}get queueLength(){return this.St.length}start(t){if(this.A)throw new Error("callback already set");this.kt=$e.Started,this.A=t}push(t){this.St.push(t),this.Qw()}stop(){this.A=null,this.kt=$e.Stopped,this.St.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),Q(i,h=>h.subscribe(d=>l.push(d))),i=[c]}let o=new Fm(n);return Q(i,c=>c.subscribe(l=>o.push(l))),o}$p(){return this.kt===$e.Stopped}ps(){return this.kt===$e.Processing}Fp(){if(!this.$p()){if(this.St.isEmpty){this.kt=$e.Completed;return}this.kt=$e.Processing,Hm(()=>{let t=this.St.pop();t instanceof go?t.complete(this.Bp):this.Bp(t)})}}Qw(){this.$p()||this.ps()||this.Fp()}}return s})(),Fm=(()=>{class s extends yl{constructor(t){super(),this.zp=t}get queueLength(){return csArray.prototype.reduce.call(this.zp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),Q(this.zp,t=>t.stop())}}return s})(),$m=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Rt=!1,this.Lt=[]}get pendingEvents(){var t,e;return(e=(t=this.St)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Rt)throw new Error("Recording is already started.");let t=this.Lt;this.St=yl.pipe(this.producers,this.processors),this.St.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),Q(this.producers,e=>e.start()),Q(this.processors,e=>e.start()),this.Rt=!0}stop(){this.St.stop(),this.Lt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Rt=!1,this.Lt=[]}subscribe(t){if(this.Rt)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Lt,t),()=>this.Lt=csArray.prototype.filter.call(this.Lt,e=>e!==t)}}return s})(),zm=(()=>{class s{constructor(t){this.Gp=t,this.Mi=null,this.qp=!1,this.Zw=typeof requestIdleCallback!="undefined"?e=>requestIdleCallback(e):e=>csSetTimeout(e)}async start(){this.qp||(this.qp=!0,await this.tA(this.Gp))}stop(){var t;(t=this.Mi)===null||t===void 0||t.deactivate()}async tA(t){await this.eA(et.document)?t():this.sA(this.Gp)}sA(t){var e;this.Mi=We({target:HTMLElement.prototype,methodName:"attachInternals",hook:()=>{t(),this.stop()}}),(e=this.Mi)===null||e===void 0||e.activate()}async eA(t){await new Promise(n=>this.Zw(()=>n()));let e=Jt(t,NodeFilter.SHOW_ELEMENT),i=e.nextNode();for(;i;){if(this.iA(i))return!0;i=e.nextNode()}return!1}iA(t){var e;return((e=t.constructor)===null||e===void 0?void 0:e.formAssociated)===!0&&csString.prototype.includes.call(t.tagName,"-")}}return s})(),Gm=2,So=(()=>{class s{constructor(t){this.rA=t,this.Na=0}addString(t){this.Na+=t.length*Gm}addArrayBuffer(t){this.Na+=t.byteLength}isThresholdReached(){return this.Na>this.rA}reset(){this.Na=0}}return s})(),qm=(()=>{class s{constructor(t){this.Ma={},this.Ie=new So(t)}save({key:t,metadata:e,events:i}){this.Ie.isThresholdReached()||(this.Ie.addString(t),typeof i=="string"?this.Ie.addString(i):this.Ie.addArrayBuffer(i),!this.Ie.isThresholdReached()&&(this.Ma[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.nA(),i=>{let n=this.Ma[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.oA(i))}),e.length!==0&&(t(e),this.Ie.reset())}nA(){return Object.keys(this.Ma)}oA(t){delete this.Ma[t]}}return s})(),ze=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Wm=(()=>{class s{constructor(t,e,i){this.Nr=t,this.aA=i,this.Li=ze.NOT_STARTED,this.Da=[],this.Hh=0,this.cA=self.origin,this.Pe=typeof window=="object"?"":"worker-",this.Ie=new So(e),this.ih()}async ih(){await this.Wp(),this.Li===ze.READY?this.lA():this.aA(this.Da)}lA(){csArray.prototype.forEach.call(this.Da,t=>{this.save(t)}),this.Da=[]}async save(t){try{if(this.Li===ze.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Da,t);return}if(this.Li!==ze.READY||this.Ie.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ie.addString(e),typeof n=="string"?this.Ie.addString(n):this.Ie.addArrayBuffer(n),this.Ie.isThresholdReached())return;await this.ce.put(`${this.cA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ce&&(await this.Wp(),this.Li!==ze.READY)||this.hA(t)}async Wp(){try{this.Li=ze.OPEN_IN_PROGRESS,this.ce=await self.caches.open(`${this.Pe}${this.Nr}`),this.Li=ze.READY}catch{this.Li=ze.OPEN_FAILED}}async hA(t){try{if(this.Hh++,this.Hh>1)return;let e=await this.ce.keys();if(e.length===0)return;let i=await this.ce.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((d,f)=>{l[f]=d}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(d=>({metadata:l,events:d})):c.arrayBuffer().then(d=>({metadata:l,events:d}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ce.delete(c))),t(o),this.Ie.reset()}catch{}finally{this.Hh--}}}return s})(),Ym=(()=>{class s{constructor(t){try{this.uA(t)}catch{this.Bh()}}uA(t){self.caches?this.dA(t):this.Bh()}save(t){this.ka.save(t)}recover(t){this.ka.recover(t)}dA(t){this.ka=new Wm(t,s.Yp,e=>{this.Bh(e)})}Bh(t){this.ka=new qm(s.Yp),t&&csArray.prototype.forEach.call(t,e=>{this.ka.save(e)})}}return s.Yp=1024*1024*16,s})(),El=(()=>{class s{constructor(t){this.Xp=[],this.Kp=[],this.ze={},this.Ai=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.ze[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.ze[e]}):this.ze={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Xp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Kp,t)}send(t){let e=mi.toQuery({...this.ze,ct:Ii.UNCOMPRESSED}),i=this.fA(e,t);return i?csArray.prototype.forEach.call(this.Xp,n=>n()):csArray.prototype.forEach.call(this.Kp,n=>n(this.ze)),i}fA(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Ai}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Ai}?${t}`,e||"")}}return s})(),Xm=(()=>{class s{constructor(t,e){this.w=t,this.C=e,this.Wn=zt.ETR_DISABLED,this.xa=zt.ETR_PENDING,this.Fh=!0}getEtrStatus(t){t===void 0&&(t=this.C.getSession());let e=t==null?void 0:t.etrStatus;return this.Jp()&&e===zt.ETR_SAVED_SESSION?e:this.Wn}onEventTriggerRecording(t,e){switch(e){case is.ETR_PAGE:this.Qp(zt.ETR_SAVED_PAGE);break;case is.ETR_LEGACY:case is.ETR_SESSION:this.Qp(zt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===O.RECORDING_TEMPORARILY?this.Fh=!0:this.Fh=!1,t===O.ANALYTICS_ONLY&&e===Kt.ETR_ON?this.Zp(this.xa):this.Zp(zt.ETR_DISABLED)}Zp(t){this.Wn=t,this.xa=zt.ETR_PENDING,this.tg(t),this.w.emitRecordingContextChange()}Qp(t){this.Fh?Number(t)>Number(this.xa)&&(this.xa=t):this.Jp()&&Number(t)>Number(this.Wn)&&(this.Wn=t,this.tg(t),this.w.emitRecordingContextChange())}tg(t){let e=this.C.getSession();e!==null&&e.etrStatus===zt.ETR_NOT_SAVED_SESSION&&t===zt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.C.setSession(e))}Jp(){return this.Wn!==zt.ETR_DISABLED}}return s})(),Km=(()=>{class s{constructor(t=100){this.pA=t,this.La={},this.Yn=null,this.hh="original-resource-name"}onEvent(t){this.gA=t}processEvent(t){this.mA(t.resourceId,t.resource.hash,t.originalResourceName),this.yA(t)}flushEvents(){this.Yn&&csClearTimeout(this.Yn),this.eg()}onSendStaticResource(t){this.yA=t}eg(){if(!Object.keys(this.La).length)return;let t={type:D.RESOURCE_HASHES,date:N.now(),args:[this.La]};this.Yn=null,this.La={},this.gA(t)}mA(t,e,i){let n=e;i&&(n+=`?${this.hh}=${i}`),this.La[t]=n,!this.Yn&&(this.Yn=window.csSetTimeout(()=>this.eg(),this.pA))}}return s})();function Jm(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:D.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:D.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:D.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:D.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:D.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:D.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:D.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:D.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:D.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:D.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:D.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:D.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:D.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=Z(o)?[i,n,o]:[i,n];r({type:D.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:D.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:D.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:D.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:z.error("translateDOMEvent: DOMEvent not supported");break}}function Qm(s){let r=Zm(s.data);return{type:D.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function Zm(s){let r={type:ty(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function ty(s){switch(s){case St.DRAG:case St.FLICK:return ii.SWIPE;case St.LONG_PRESS:return ii.LONG_PRESS;case St.TAP:return ii.TAP;case St.PINCH_IN:return ii.PINCH_IN;case St.PINCH_OUT:return ii.PINCH_OUT}}function ey(s){switch(s.inputType){case"text":return{type:D.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:D.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:D.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var sn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function sy(s){return{type:D.PERFORMANCE_TIMINGS,args:[{performanceTiming:sn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:sn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:sn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var iy=500,rn=0;function ry(){return{processEvent(s,r){if(s.originalEvent.type===D.PERFORMANCE_RESOURCE_TIMING)return rn>=iy?null:(rn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){rn=0}}}function xa(s){let r=s.type==="DOM_INITIAL_STATE"?s.state:s.diff;for(let t in r){let e=r[t];e&&(delete e.parent,delete e.previousSibling,delete e.metadata)}return s}function ny(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var oy=20;function ay(s){return ny(r=>{let t={visibleInViewPort:r},e={type:D.TEXT_VISIBILITY,date:N.now(),args:[t]};s(e)},{batchSize:oy,autoFlushDelay:1e3})}function cy(s){switch(s.videoEventType){case"play":return{type:D.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:D.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:D.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var ly=(()=>{class s{get pendingEvents(){return this.Va.pendingEvents}constructor(t,e,i,n,o){this.Va=t,this.w=e,this.Oe=i,this.Is=n,this.Ps=o,this.ee=()=>{},this.Xn=()=>{},this.sg=ay(c=>this.ee(c))}start(){var t,e;this.ig=ry(),this.Va.subscribe(i=>{var n,o,c,l,h,d,f;let m=i,{timestamp:y}=m;switch(m.type){case"Legacy":{let S=m.eventType==="user"?(n=this.Xn)!==null&&n!==void 0?n:()=>{}:this.ee;this.ig.processEvent(m,S)}break;case"CustomElementRegistration":{this.ee({type:D.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[m.tagName]});break}case"DomEvent":{Jm(m,this.ee,this.w);break}case"InputEvent":{let S=ey(m);(o=this.Xn)===null||o===void 0||o.call(this,S);break}case"inputEncryptedText":{let{target:S,value:T,encryptedData:C,encryptionMetadata:_}=m;(c=this.Xn)===null||c===void 0||c.call(this,{type:D.INPUT_ENCRYPTED_TEXT,date:y,args:[S,T,C,_]});break}case"encryptedCharacterDataChanged":{let{target:S,rawData:T,encryptedData:C,encryptionMetadata:_}=m;this.ee({type:D.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[S,T,C,_]});break}case"StaticResource":{let{url:S}=m;this.ee({type:D.STATIC_RESOURCE_URL,date:y,args:[S]});break}case"ResizeMaskedElement":{let{target:S,width:T,height:C}=m;this.ee({type:D.MUTATION_ATTRIBUTE,date:y,args:[S,"","style",`width:${T}px !important;height:${C}px !important;`]});break}case"Gesture":{let S=Qm(i);(l=this.Xn)===null||l===void 0||l.call(this,S);break}case"TextVisibility":{this.sg.push(m.text);break}case"StaticResourceManagerEvent":{(h=this.Oe)===null||h===void 0||h.processEvent(m);break}case"screenResize":{let{width:S,height:T}=m,C={type:D.SCREEN_RESIZE,date:y,args:[S,T]};this.ee(C);break}case"viewportResize":{let{width:S,height:T}=m,C={type:D.RESIZE,date:y,args:[S,T]};this.ee(C);break}case"PerformanceTiming":{this.ee(sy(m));break}case"CustomError":{let S=(d=this.Ps)===null||d===void 0?void 0:d.translate(m);S&&this.ee(S);break}case"JSError":{let S=(f=this.Is)===null||f===void 0?void 0:f.translate(m);S&&this.ee(S);break}case"VideoEvent":{let S=cy(m);S&&this.ee(S);break}case"DOM_INITIAL_STATE":{let S=xa(m),T={type:D.DOM_INITIAL_STATE,date:y,args:[S.state]};this.w.emitInitialDomDone(T);break}case"DOM_PATCH":{let S=xa(m),T={type:D.DOM_PATCH_STATE,date:y,args:[S.diff]};this.ee(T);break}case"warning":{z.warn(m.message);break}default:z.error(`WebRecorderEventTranslator: Event not supported (${m.type})`);break}}),this.w.emitInitialDomStart(),(t=this.Is)===null||t===void 0||t.start(),(e=this.Ps)===null||e===void 0||e.start(),this.Va.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Va.stop(),(t=this.Oe)===null||t===void 0||t.flushEvents(),(e=this.Is)===null||e===void 0||e.stop(),(i=this.Ps)===null||i===void 0||i.stop()}flush(){this.sg.flush()}onEvent(t,e){var i;this.ee=t,this.Xn=e,(i=this.Oe)===null||i===void 0||i.onEvent(n=>this.ee(n))}reset(){this.ig.reset()}}return s})();var hy=(()=>{class s extends ye{constructor(t){super(),this.He=t}subscribe(t){return super.subscribe(t)}onStart(){Q(this.He,t=>{t.onEvent(e=>{var i;return this.Mr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),Q(this.He,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){Q(this.He,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Mr(t,e){this.produceEvent({timestamp:N.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Sl=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.SA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.vA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static vA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.SA="cs.tracking.",s})(),Yt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),vl=(()=>{class s{constructor(){this.j=!1,this.ai=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Os(Yt.Hidden):this.Os(Yt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Os(Yt.PagehideHidden):this.Os(Yt.PagehideVisible);case"blur":return this.Os(Yt.Blur);case"navigate":return this._A(t)?this.Os(Yt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.j||(this.j=!0,this.$h(),this.wA(),this.AA(),Yo()&&this.TA())}stop(){this.j&&(this.j=!1,this.zh(),this.bA(),this.RA(),Yo()&&this.CA())}onEvent(t){this.Os=t}TA(){window.navigation.addEventListener("navigate",this.ai)}CA(){window.navigation.removeEventListener("navigate",this.ai)}$h(){document.addEventListener("visibilitychange",this.ai)}zh(){document.removeEventListener("visibilitychange",this.ai)}wA(){window.addEventListener("pagehide",this.ai)}bA(){window.removeEventListener("pagehide",this.ai)}AA(){window.addEventListener("blur",this.ai)}RA(){window.removeEventListener("blur",this.ai)}_A(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),bt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),uy=(()=>{class s{constructor(t,e,i=[]){this.Mr=t,this.Gh=e,this.IA=i,this.Ua=null,this.kt=bt.Active,this.it=[]}reset(){this.Ua=null,this.it=[],this.kt=bt.Active}disconnect(){this.kt=bt.Stopped}PA(){this.Gh(bt.Paused),this.kt=bt.Paused,csSetTimeout(()=>{this.kt===bt.Paused&&this.qh()},s.STOP_TIMEOUT)}OA(){this.Gh(bt.Active),this.kt=bt.Active,Q(this.it,this.Mr),this.it=[]}qh(){this.it=[],this.Gh(bt.Stopped),this.kt=bt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Ua=t.date,this.kt!==bt.Active)){this.OA(),this.Mr(t);return}if(this.NA(t)){this.Mr(t);return}switch(this.kt){case bt.Active:if(this.MA(t,e)){this.PA(),csArray.prototype.push.call(this.it,t);return}this.Mr(t);break;case bt.Paused:csArray.prototype.push.call(this.it,t);break;case bt.Stopped:break}}MA(t,e){return!e.isUserEvent&&this.Ua!==null&&t.date-this.Ua>s.INACTIVITY_TIMEOUT}NA(t){return csArray.prototype.indexOf.call(this.IA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),dy=2e3,fy=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T=[],C,_,A,k,I){super(),this.E=t,this.z=e,this.DA=i,this.V=n,this.C=o,this.Je=c,this.mt=l,this.Le=h,this.lt=d,this.Y=f,this.Vt=m,this.Mt=y,this.Be=S,this.He=T,this.rg=C,this.se=_,this.Kn=A,this.Is=k,this.Ps=I,this.Qs=0,this.Dr=new Sl,this.kr={allowFromQuotaService:!0,allowFromSerialization:!0},this.ng=wr(()=>{this.z.eventsCount()>0&&this.og()},dy),this.Ns=b=>this.processBrowserEvent(b),this.Jn=b=>this.ie(b),this.ja=0,this.Qn=0,this.Qe=new vl,this.Wh=!1,this.ag=50*1024,this.ji=!1,this.Zn=!1,this.Ni=[],this.Ha=new uy(b=>this.J(b),b=>{switch(b){case bt.Active:this.kA();break;case bt.Stopped:this.xA();break}},[D.RESOURCE_HASHES,D.TEXT_VISIBILITY,D.API_ERROR,D.JAVASCRIPT_ERROR]),this.cg=b=>{this.Vt.removeBatchInProgress(`${b.params.sn}.${b.params.pn}.${b.params.ri}`)}}init(){this.Yh(),this.Y.onLoad(this.cg),this.Y.onError(this.cg)}kA(){csArray.prototype.forEach.call(this.rg,t=>t.start())}xA(){csArray.prototype.forEach.call(this.rg,t=>t.stopForInactivity())}Yh(){var t,e,i;this.Be.onEvent(this.Ns,this.Jn),(t=this.lt)===null||t===void 0||t.onInputNodeToEncrypt(this.Jn),(e=this.lt)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.lg(n)}),(i=this.lt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Ns),this.Qe.onEvent(n=>{if(csSetTimeout(()=>this.Hi("page-state",n)),n!==Yt.Visible){if(n===Yt.Blur)return this.hg();if(!this.Wh)return this.Wh=!0,csSetTimeout(()=>{this.Wh=!1}),n===Yt.Hidden?this.hg():this.LA()}})}isRecording(){return this.C.hasValidSession()&&this.isStarted}hg(){if(!this.canSendEvents())return;this.Be.flush(),this.Vt.saveBatchesInProgress(),Q(this.He,c=>{var l,h;return Q((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],d=>this.z.addEvent(d))});let t=this.z.getEvents();if(t.length===0)return;this.Hi("pending-events",this.Be.pendingEvents);let e=this.Y.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Qn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.z.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Mt.removeQueryParams(),this.Mt.setQueryParams(e);let o=this.z.stringifyEvents();if(o.length>this.ag){let c=this.ug();if(c.length>0){let l=Ts(c);this.Mt.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.z.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Mt.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Mt.removeQueryParams(),this.z.clearEvents()}LA(){if(!this.canSendEvents())return;this.Be.flush();let t=this.Y.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Mt.removeQueryParams(),Q(this.He,n=>{var o,c;return Q((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Mt.setQueryParams(t),this.Mt.send(),this.Mt.removeQueryParams();return}this.Hi("pending-events",this.Be.pendingEvents),this.Qn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Mt.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.ag){let n=this.ug();if(n.length>0){let o=Ts(n);this.Mt.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Mt.removeQueryParams(),this.Mt.setQueryParams(t),this.Mt.send(),this.Mt.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.z.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Mt.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.z.getCurrentRequestIndex().increment());this.Mt.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.kr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.kr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.kr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.kr.allowFromSerialization=!0}canSendEvents(){return this.kr.allowFromQuotaService&&this.kr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Je&&this.Is){(e=this.Je)===null||e===void 0||e.anonymize(t);let i=this.Is.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:N.now(),type:"JSError"});i&&this.Ns(i)}}onIframeCustomError(t){if(this.Ps){let e=this.Ps.translate({...t,timestamp:N.now(),type:"CustomError"});e&&this.Ns(e)}}onIframeDetailedApiError(t){this.dg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.ie(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.V.isCurrentPageviewValid()&&this.Ha.pushEvent(t,{isUserEvent:!1})}ie(t){this.V.refreshSession(),this.V.isSessionValid()&&this.Ha.pushEvent(t,{isUserEvent:!0})}J(t){xt.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.ng(),this.fg(t)}fg(t){this.E.emitDebugEvents&&this.Dr.emit("recordingEvent",{...t,typeName:D[t.type]})}onStart(){var t;this.Hi("tag-version","15.186.3"),this.Hi("page-state",document.visibilityState),this.Ha.reset(),this.Qe.start(),this.initStates(),this.Be.start(),this.mt&&this.Le&&this.mt.subscribe(s.jt,e=>this.dg(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.Dr.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Ni,e=>this.pg(e)),this.Ni=[],this.ji&&((t=this.se)===null||t===void 0||t.enableOnlineAssets(),this.ji=!1)}onStop(){var t;this.Qe.stop(),this.mt&&this.mt.unsubscribe(s.jt),this.Be.stop(),this.Ha.disconnect(),(t=this.se)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Be.flush(),this.ng.cancel(),this.pushEvents(),this.Y.removeQueryParams()}initStates(){this.ja=N.now(),this.z.getCurrentRequestIndex().reset(),this.Qs=0,this.Y.setQueryParams(this.DA.getRequestParameters())}pushEvents(){Q(this.He,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.og():this.z.clearEvents())}og(){if(!this.canSendEvents())return;let t=this.z.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Qn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.ja>this.Qn?i[0].date:this.ja;this.Y.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.Y.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.Y.getQueryParams()},i),this.Y.send(i),n.increment(),e.batch.clearEvents(),this.gg&&this.gg()}this.z.clearEmptyBatchSlots()}addInitialDom(t){this.z.addEventByTimestamp(t),this.fg(t)}dg(t){if(this.Kn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Kn.truncate(t),this.lt){this.lt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.lg(t)}lg(t){if(this.Qs<s.VA){let e={type:D.API_ERROR,date:N.now(),args:[this.Le.anonymize(t)]};this.Ns(e),this.Qs=this.Qs+1,U.counters.networkRequests.count("collected")}}UA(t){t===is.ETR_SESSION?this.Y.setQueryParams({[s.jA]:s.mg}):t===is.ETR_PAGE&&this.Y.setQueryParams({[s.HA]:s.mg})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Is)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:N.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Ns(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ps)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:N.now(),message:t.message,attributes:t.attributes});i&&this.Ns(i)}onPageEvent(t){this.yg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:N.now(),keyId:this.E.encryptionPublicKeyId};(e=this.lt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.pg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Ni,{eventName:t,eventType:e})}pg(t){this.UA(t.eventType),this.yg(t.eventName),this.pushEvents()}yg(t){let e={type:D.PAGE_EVENT,date:N.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.BA)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:N.now(),type:D.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:N.now(),type:D.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.Hi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Hi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Zn=!0}getStaticResourceManagerStatus(){return this.se?{isStarted:this.E.useStaticResourceManager&&Mn.isSupported(),onlineAssets:{activated:this.se.isOnlineAssetsActivated(),enabledOnNextPageview:this.Zn}}:null}resetOnlineAssetsOnPageview(){this.ji=!1,this.Zn=!1}updateOnlineAssetsOnPageview(){this.se&&this.Zn&&(this.ji=!0,this.Zn=!1)}onRecordingRequestSent(t){this.gg=t}getRecordingStartTimestamp(){return this.ja.toString()}getRecordingLastEventTimestamp(){return this.Qn.toString()}onOptOut(){Q(this.He,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:N.now(),type:D.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}ug(){return this.z.extractEvents(D.API_ERROR,D.JAVASCRIPT_ERROR,D.CUSTOM_ERROR,D.TEXT_VISIBILITY,D.POINTER_DOWN)}}return s.jt="RecordingService",s.BA=255,s.VA=20,s.HA="etrp",s.jA="etrs",s.mg="1",B([Mt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),py=(()=>{class s extends jt{constructor(t,e,i){super(),this.ae=t,this.Mt=e,this.Y=i,this.Xh=!1,this.to={},this.FA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.zA(c.rt)&&this.Y.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.to={}}onStop(){}recover(){this.ae.recover(this.FA)}addBatchInProgress(t,e,i){this.to[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.to[t]}blockSendingLastMessage(){this.Xh=!1}allowSendingLastMessage(){this.Xh=!0}sendLastMessageBeacon(){if(this.Xh){let{ri:t,rst:e,let:i,...n}=this.Y.getQueryParams();n.hlm="true",this.Mt.setQueryParams(n),this.Mt.send()}}zA(t){return!!t&&csString.prototype.indexOf.call(t,O.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.to),t=>{let{metadata:e,events:i}=this.to[t];this.ae.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.ae.save(t)}}return B([x("RecordingRecovery")],s.prototype,"recover",null),s})(),gy=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),my=8*1024*1024,yy=(()=>{class s extends jt{constructor(t,e,i){super(),this.Oe=t,this.Eg=e,this.yt=i,this.Kh={},this.Sg=new Set,this.ps=!1}initState(){lc()&&(this.Ve=this.yt.getRequestParameters(),this.GA=`${this.Eg}/exist?${mi.toQuery(this.Ve)}`,this.qA=`${this.Eg}/putTag?${mi.toQuery(this.Ve)}`,this.vg=or(async()=>{if(this.ps){this.vg();return}this.ps=!0;try{await this.WA()}finally{this.ps=!1}},300),this.Oe.onSendStaticResource(t=>{this._g(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this._g(t)}_g(t){this.wg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.wg(e.hash,e.data)})}wg(t,e){this.Sg.has(t)||(this.Sg.add(t),this.Kh[t]=e,this.vg())}async WA(){let t=this.Kh;this.Kh={};let e=await this.YA(t);if(!e.length)return;let i=this.KA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.qA,{method:"POST",body:n})))}async JA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ve.pid,filter:gy.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.GA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async YA(t){let e=[],i=await this.JA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):z.warn("SRM: received unknown hash: "+n)}),e}KA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<my)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),_l=2*1e3*1024,Ey=200,La=(()=>{class s{constructor(t=_l){this.Bt=[],this.Jh=new So(t)}addEvent(t){this.Jh.addString(Ts(t)),csArray.prototype.push.call(this.Bt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Bt.length&&!(this.Bt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Bt,e,0,t)}eventsCount(){return this.Bt.length}clearEvents(){this.Jh.reset(),this.Bt=[]}isFull(){return this.eventsCount()>=Ey}isThresholdReached(){return this.Jh.isThresholdReached()}getEvents(){return this.Bt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Bt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Bt=i,e}stringifyEvents(){return Ts(this.Bt)}IO(t){t.type===D.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return B([Mt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Va=(()=>{class s{constructor(){this.Ba=1}getCurrentIndex(){return this.Ba}increment(){this.Ba+=1}reset(){this.Ba=1}getRequestParameters(){return{ri:`${this.Ba}`}}}return s})(),Sy=3,vy=8,_y=(()=>{class s{constructor(t,e=_l,i=Sy){this.QA=t,this.Ag=e,this.Qh=i,this.Fa={}}addEvent(t){this.Tg().addEvent(t)}addEventByTimestamp(t){this.Tg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Bi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Bi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Bi();return t.length>=this.Qh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ts(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Bi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Fa[t[e].metadata.pageNumber]}Bi(){return Tp(this.Fa)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Bi(),wy)}bg(){let t=this.QA();if(t<=0)return{batch:new La(this.Ag),metadata:{pageNumber:0,requestIndex:new Va}};let e=this.Fa[t];if(e)return e;let i={batch:new La(this.Ag),metadata:{pageNumber:t,requestIndex:new Va}};return this.Fa[t]=i,this.Bi().length>Math.max(this.Qh,vy)&&z.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Bi().length}/${this.Qh})`),i}Tg(){return this.bg().batch}getCurrentRequestIndex(){return this.bg().metadata.requestIndex}}return s})();function wy(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function Dt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Ay=(()=>{class s{constructor(t,e){this.Ut=t,this.M=e,this.ni=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.B=t}start(){this.$i(),this.triggerInitialEvents()}stop(){this.zi()}$i(){csArray.prototype.forEach.call(this.ni,t=>Lt(t))}zi(){csArray.prototype.forEach.call(this.ni,t=>Vt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:D.HASH_CHANGE,args:[this.M.anonymizePII(this.Ut.href)],date:N.now()};this.B(t)}visibilityChangeListener(){let t={type:D.VISIBILITY_CHANGE,args:[document.visibilityState],date:N.now()};this.B(t)}}return B([x("hashChange")],s.prototype,"hashChangeListener",null),B([x("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),$s=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),Y=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function Ty(s){if(!W(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Ua="data-cs-scroll-container";function by(s){try{if(Nt(csEventtarget.apply(s)))return!0}catch{}return!1}var zs=(()=>{let s;return function(r){function t(i){return!!(Nt(i)&&by(i)&&yr(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ua)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ua}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Ry=33,Cy=(()=>{class s{constructor(){this.eventType="user",this.tu=[],this.oT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.aT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.eu=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Ty(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.eu,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.pe=new Ns((e,i)=>{switch(i){case"initial":case"added":this.$i(e);break;case"removed":this.zi(e);break}})}init(){this.cT(),this.lT(),this.su()}onEvent(t){csArray.prototype.push.call(this.tu,t)}le(t,e=!1){csArray.prototype.forEach.call(this.tu,i=>i(t,e))}start(){this._h(),this.$i(document),this.pe.observe()}stop(){this.zi(document),this.pe.disconnect(),this.tu=[]}lT(){this.hT()&&csArray.prototype.push.call(this.za,...this.oT)}cT(){this.uT()&&csArray.prototype.push.call(this.za,...this.aT)}$i(t){hr(t)?csArray.prototype.forEach.call(this.za,e=>Lt(e)):csArray.prototype.forEach.call(this.eu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Lt(i)})}zi(t){hr(t)?csArray.prototype.forEach.call(this.za,e=>Vt(e)):csArray.prototype.forEach.call(this.eu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Vt(i)})}hT(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}uT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}_h(){this.dT()}dT(){let t=zs.getScrollContainer()||document,e=G(t),i=this.Rg(t);if(i.top!==0||i.left!==0){let n={type:D.SCROLL,args:[e,i.left,i.top],date:N.now()};this.le(n,!0)}}Rg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(M.isMaskedElement(t)||M.isMaskedElementChild(t))return;let e=G(t),i=this.Rg(t),n={type:D.SCROLL,args:[e,i.left,i.top],date:N.now()};this.le(n)}mouseOverListener(t){if(M.isMaskedElementChild(t.target))return;let e=G(t.target),i={type:D.MOUSE_OVER,args:[e],date:N.now()};this.le(i)}clickListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.CLICK,args:[i],date:N.now()};this.le(n)}keyUpListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n=this.F[t.key];if(n===void 0)return;let o={type:D.KEY_UP,args:[i,n],date:N.now()};this.le(o)}keyDownListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n=this.F[t.key];if(n===void 0)return;let o={type:D.KEY_DOWN,args:[i,n],date:N.now()};this.le(o)}copyListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.CLIPBOARD_COMMAND,args:[i,$s.COPY],date:N.now()};this.le(n)}cutListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.CLIPBOARD_COMMAND,args:[i,$s.CUT],date:N.now()};this.le(n)}pasteListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.CLIPBOARD_COMMAND,args:[i,$s.PASTE],date:N.now()};this.le(n)}pointerUpListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.POINTER_UP,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1),i,t.button],date:N.now()};this.le(n)}pointerMoveListener(t){let e={type:D.POINTER_MOVE,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1)],date:N.now()};this.le(e)}pointerDownListener(t){let e=yt(t);if(M.isMaskedElementChild(e))return;let i=G(e),n={type:D.POINTER_DOWN,args:[t.pointerId,t.pointerType,Dt(t.clientX,1),Dt(t.clientY,1),i,t.button,{pageX:Dt(t.pageX,1),pageY:Dt(t.pageY,1)}],date:N.now()};this.le(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:D.TOUCH_START,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:N.now()};this.le(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:D.TOUCH_MOVE,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:N.now()};this.le(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?D.TOUCH_END:D.TOUCH_CANCEL,args:[n.identifier,Dt(n.clientX,1),Dt(n.clientY,1)],date:N.now()};this.le(o)}}su(){this.F={},this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Backspace=Y.BACKSPACE,this.F.Enter=Y.ENTER,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB,this.F.Escape=Y.ESCAPE,this.F.Esc=Y.ESCAPE,this.F.End=Y.END,this.F.Alt=Y.ALT,this.F.Control=Y.CTRL,this.F.Meta=Y.META}}return B([Mt("RecordingPageEvents.start")],s.prototype,"start",null),B([x("scroll")],s.prototype,"scrollListener",null),B([x("mouseOver"),At(),Kf()],s.prototype,"mouseOverListener",null),B([x("click"),At()],s.prototype,"clickListener",null),B([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),B([x("Event handler type: copy")],s.prototype,"copyListener",null),B([x("Event handler type: cut")],s.prototype,"cutListener",null),B([x("Event handler type: paste")],s.prototype,"pasteListener",null),B([x("Event handler type: pointerup"),At()],s.prototype,"pointerUpListener",null),B([x("Event handler type: pointermove"),At(),Ar({wait:Ry})],s.prototype,"pointerMoveListener",null),B([x("Event handler type: pointerdown"),At()],s.prototype,"pointerDownListener",null),B([x("Event handler type: touchstart"),At()],s.prototype,"touchStartListener",null),B([x("Event handler type: touchmove"),At()],s.prototype,"touchMoveListener",null),B([x("Event handler type: touchend-cancel"),At()],s.prototype,"touchEndCancelListener",null),s})(),Iy=(()=>{class s{constructor(t={maskingEnabled:!0}){this.fT=t}onScannedAsset(t){this.Ga=t}qa(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.iu(di(t))}scanElement(t,e){this.fT.maskingEnabled&&(M.getMaskedElementDetails(t).state!==M.MaskedElementState.NotMasked||e&&M.isMaskedAttribute(t,e))||(Er(t)?this.pT(t):to(t)?this.gT(t,e):(this.mT(t,e),this.yT(t,e),this.ET(t,e)))}gT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.qa(),assetRawPath:rl(t)};this.Ga({type:"stylesheet",asset:o})}}pT(t){var e;let i=new Set;if(t.textContent)for(let o of di(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||z.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of di(c))i.add(l)}this.iu(As(i))}ru(t){return!this.ST(t)&&!de(t)&&!tf(t)}mT(t,e){if(Vu(t)||Lu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.ru(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.qa()};this.Ga({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.vT(t.srcset)}}yT(t,e){if(csNodenodeType.apply(t)!==1){st.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}vT(t){this.iu(mo(t))}ET(t,e){if((Bu(t)||Fu(t)||$u(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.ru(i)){let n={assetId:be(i),assetRawPath:i,assetBasePath:this.qa()};this.Ga({type:"asset",asset:n})}}}iu(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.ru(e)),e=>({rawUrl:e,absoluteUrl:be(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.qa(),assetRawPath:e.rawUrl};this.Ga({type:"asset",asset:i})})}ST(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Py=30,Oy=0,wl=(()=>{class s{constructor(t,e=Py,i=Oy){this._T=t,this.wT=e,this.AT=i,this.Ze=new Ti,this.$e=!1,this.nu=0,this.Cg=()=>{for(this.nu=0;this.Ze.length;){if(this.nu>=this.wT){csSetTimeout(this.Cg,this.AT);return}let n=N.elapsed(),o=this.Ze.pop();if(!o)break;this.runTask(o);let c=N.elapsed()-n;this.nu+=c}this.$e=!1}}schedule(t,e=!1){if(!this._T||e){t();return}xt.general.pendingTasks.increase(),this.Ze.push(t),this.TT()}TT(){this.$e||(this.$e=!0,csSetTimeout(()=>{this.Cg()}))}runTask(t){xt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ze.forEach(t=>{this.runTask(t)}),this.Ze.clear()}clearQueue(){xt.general.pendingTasks.clear(),xt.mutations.pendingMutations.clear(),this.Ze.clear()}isEmpty(){return this.Ze.length===0}}return B([x("TaskScheduler"),Mt("runTask")],s.prototype,"runTask",null),B([Mt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Ny=(()=>{class s{constructor(){this.Rt=!1,this.Ig=new po(t=>t.type==="cssRuleInserted"&&this.bT(t)),this.RT=br(t=>{this.Rt&&t.length>0&&this.D.schedule(()=>Q(t,e=>this.io.scanElement(e)))}),this.CT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.IT)===null||i===void 0||i.call(this,e)),(n=this.PT)===null||n===void 0||n.call(this,e);let c={date:N.now(),type:D.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.B)===null||o===void 0||o.call(this,c)},this.D=new wl(!0,30,0),this.Hn=new gl(t=>this.OT(t)),this.U=new ns(t=>this.br(t)),this.io=new Iy,this.io.onScannedAsset(this.CT)}onEvent(t){this.B=t}onAsset(t){this.PT=t}onStyleSheetFound(t){this.IT=t}start(){this.Rt||(this.Rt=!0,this.Ig.observe(),this.Hn.observe(),this.U.observe())}stop(){this.Rt&&(this.Ig.disconnect(),this.Hn.disconnect(),this.U.disconnect(),this.Rt=!1)}bT(t){!t.rule||!this.Rt||this.io.scanCssString(t.rule)}OT(t){this.Rt&&M.getMaskedElementDetails(t).state===M.MaskedElementState.NotMasked&&this.RT.push(t)}br(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.io.scanElement(e.target,e.attributeName);break;case"characterData":this.NT(e.target);break;case"childList":}})}NT(t){lr(t)&&csNodeparentNode.apply(t)&&Er(csNodeparentNode.apply(t))&&this.io.scanCssString(t.data)}}return s})(),My="csPersisted",ja="v2/recording",Dy=["isRecording"],ky=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],xy=["replay:resourceManager:getStatus","cssrm:getStatus"],Ly=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A,k,I,b,F,j){this.ci=t,this.C=e,this.E=i,this.Ve=n,this.S=o,this.M=c,this.V=l,this.Ee=h,this.Je=d,this.mt=f,this.Le=m,this.bt=y,this.w=S,this.li=T,this.Pg=C,this.Yt=_,this.Ht=A,this.Q=k,this.Kn=I,this.ot=b,this.PO=F,this.lt=j,this.Wa=null}init(){var t,e,i;let n=[],o=[];csArray.prototype.push.call(o,new Gg),this.ro=new em(this.ot.shouldUseAnonymization(),this.E.whitelistedAttributes,this.M,this.E.anonymizeDigits),this.Gi();let c=new Ym(My);this.MT(c),this.z=new _y(()=>{var b;return((b=this.C.getSession())===null||b===void 0?void 0:b.pageNumber)||0});let l=new Ny;csArray.prototype.push.call(n,l),this.E.useStaticResourceManager&&Mn.isSupported()&&(this.se=new Mn,this.Oe=new Km,this.Og=new yy(this.Oe,this.E.getStaticResourceManagerUri(),this.Ve),this.Pg.addListener(this.Og),csArray.prototype.push.call(o,this.se));let h=new Ei(this.Ve,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")})}),d=new El(`${this.E.getRecordingUri()}/${ja}`);csArray.prototype.push.call(o,this.ro),csArray.prototype.push.call(o,new ym(this.Q)),csArray.prototype.push.call(o,new Sm),this.qi=new Cy,this.qi.init(),csArray.prototype.push.call(n,this.qi),this.Vt=new py(c,d,this.Y),csArray.prototype.push.call(n,new Ay(window.location,this.M));let f=!1,m=f?new vm:new zg,y=f?null:new Am,S=f?null:new Tm,T=f?null:new Cm(this.lt,(e=this.E.experimental)===null||e===void 0?void 0:e.trackedCustomInputProperties),C=f?null:new Pm,_=csArray.prototype.filter.call([y,this.Ee,m,new hy(csArray.prototype.filter.call(n,b=>b)),C,new Om,new jm,T,S],Boolean),A=new $m(_,o),k=new ly(A,this.w,this.Oe,this.Is,this.Ps),I=csArray.prototype.filter.call([m,y,S,T,C],Boolean);this.recordingService=new fy(this.E,this.z,h,this.V,this.C,this.Je,this.mt,this.Le,this.lt,this.Y,this.Vt,d,k,n,I,this.se,this.Kn,this.Is,this.Ps),this.li.addListener(this.recordingService),this.Pg.addListener(this.recordingService),this.recordingService.init(),this.S.register(Dy,()=>this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()),this.S.register(ky,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(xy,()=>this.recordingService.getStaticResourceManagerStatus()),this.no=new Xm(this.w,this.C),this.li.addListener(this.no),this.ci.enableRecordingContext(this.recordingService,this.C,this.no),this.ou()}onAfterNaturalPageView(){var t;this.Yt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Og)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.Gi(),this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ya(),this.Wa||(this.Wa=new zm(()=>U.counters.featureUsage.count("form-associated-custom-elements")),this.Wa.start()))}onArtificialPageViewEnd(){this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()&&!this.C.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.oo()}onAfterArtificialPageView(){this.Gi(),this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()?(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Ya()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.oo()}onOptout(){var t;this.oo(),this.recordingService.onOptOut(),(t=this.Wa)===null||t===void 0||t.stop()}onReplayUnanonymizationConsentGranted(){this.Gi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Gi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===O.QUOTA_REACHED||t===O.ANALYTICS_ONLY&&e===Kt.ETR_OFF?(this.recordingService.clearEvents(),this.oo()):(this.Y.setQueryParams({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.no.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.Ya()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.qi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.C.isReplayRecorded()&&!this.Yt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ya(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.oo())}ou(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;Q(l,h=>{li(h)&&ns.setShadowRootFilter(d=>{try{return se.call(d.host,h)}catch{return!1}})})}}Ya(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}oo(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}MT(t){let e="byteArray";this.Y=this.Ht.create(`${this.E.getRecordingUri()}/${ja}`,e,t)}Gi(){var t;let e=this.ot.shouldUseAnonymization();this.ro.setAnonymization(e),(t=this.DT)===null||t===void 0||t.setAnonymization(e)}}return B([Mt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),B([Mt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})();var Qe=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===O.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Zi=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Vy=(()=>{class s{constructor(t,e,i,n){this.N=t,this.C=e,this.E=i,this.hs=n,this.Ng=!1}isNaturalPageViewSent(){return this.Ng}setNaturalPageViewSent(t){this.Ng=t}getTrackingContext(){let t=this.C.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.hs.getPageViewType(),l=this.C.isReplayRecorded(),h=this.kT(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}kT(t){return Qe.isReplayConsentNeeded(this.E)?t.collectState===O.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Zi.NOT_EXPRESSED:t.collectState===O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Zi.WITHDRAWN:Zi.GRANTED:Zi.NOT_NEEDED}}return s})(),Uy=(()=>{class s{constructor(t){this.xt=t,this.he=[]}handleCommand(t){if(Ce(t)&&(this.ao(t),this.xt.isNaturalPageViewSent())){let e=this.xt.getTrackingContext();e!==null&&this.Ft(t,e)}}ao(t){csArray.prototype.push.call(this.he,t)}executeRegisteredCallbacks(){let t=this.xt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.he,e=>this.Ft(e,t))}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),jy=(()=>{class s{constructor(t){this.xt=t,this.Wi=[]}handleCommand(t){if(this.xt.isNaturalPageViewSent())return this.xT(t);this.co(t)}xT(t){let e=this.xt.getSessionKey();return this.Mg(t)&&e!==null&&this.Ft(t.callback,e),e}co(t){this.Mg(t)&&csArray.prototype.push.call(this.Wi,t.callback)}flushPendingCallbacks(){let t=this.xt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Wi,e=>{this.Ft(e,t)}),this.Wi=[]}Mg(t){return t&&typeof t.callback=="function"}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})();function Hy(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,d,f]=l;n?h=`${c}/sites/${n}/player?uu=${d}&sn=${f}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${d}&sn=${f}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${N.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var By=(()=>{class s{constructor(t){this.xt=t}handleCommand(t,e){fi(t)&&Ce(e)&&this.Ft(t,e)}Ft(t,e){csSetTimeout(()=>{let i=this.xt.getTrackingContext();if(i){let n=Hy(i,t);e(n)}})}}return s})(),Fy=(()=>{class s{constructor(){this.he=new Set}handleCommand(t,e){return!Ce(t)||this.he.has(t)?null:(this.he.add(t),e&&(this.Pe=e,this.Dg(t,e)),()=>this.he.delete(t))}executeCallbacks(t){this.LT(t)&&(this.Pe=t,this.he.forEach(e=>this.Dg(e,t)))}Dg(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}LT(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Pe&&(this.Pe.isRecording!==e||this.Pe.recordingStartTimestamp!==i||this.Pe.etrState!==n||this.Pe.etrStatus!==o||this.Pe.collectState!==c)}}return s})(),$y=["afterPageView"],zy=["getSessionKey"],Gy=["onRecordingContextChange","onRecordingStateChange"],qy=["replay:link:generate"],Wy=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.N=t,this.C=e,this.S=i,this.At=n,this.Z=o,this.E=c,this.hs=l,this.ci=h,this.kg=null}init(){this.xt=new Vy(this.N,this.C,this.E,this.hs),this.au=new Uy(this.xt),this.xg=new jy(this.xt),this.lo=new Fy,this.VT=new By(this.xt),this.S.register(zy,t=>this.xg.handleCommand(t)),this.S.register($y,t=>this.au.handleCommand(t)),this.S.register(Gy,t=>this.lo.handleCommand(t,this.ci.getRecordingContext())),this.S.register(qy,(t,e)=>{this.xr&&this.VT.handleCommand({...t,recordingStartTimestamp:this.ci.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.xt.setNaturalPageViewSent(!0),this.xg.flushPendingCallbacks(),this.au.executeRegisteredCallbacks(),(t=this.kg)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.au.executeRegisteredCallbacks(),(t=this.kg)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.lo.executeCallbacks(this.ci.getRecordingContext())}setRecordingService(t){this.xr=t}}return B([Ar({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})();var Yy=["optout"];var Xy=(()=>{class s{constructor(t,e){this.S=t,this.cs=e}init(){this.S.register(Yy,()=>{this.cs.activate()})}}return s})(),oi="_cs_optout",Ky=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.gt=i}get(){return this.E.cookielessTrackingEnabled?this.gt.getItem(oi):this.O.get(oi)}set(t){this.E.cookielessTrackingEnabled?this.gt.setItem(oi,t):this.O.set(oi,t,Jn)}}return s})(),Ha="1",Jy=(()=>{class s{constructor(t,e,i){this.w=t,this.Ut=e,this.ut=i}init(){!this.isActive()&&this.eb()&&this.activate()}isActive(){return this.ut.get()===Ha}activate(){this.w.emitOptout(),this.ut.set(Ha)}eb(){return csString.prototype.indexOf.call(this.Ut.href,oi)>0}}return s})(),Qy=(()=>{class s{constructor(){this.xe=null,this.sb=1}startInterval(){this.xe=window.csSetInterval(()=>{let t=this.sb++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){U.counters.tasks.flush(t),U.counters.longTasks.flush(t)}clear(){U.counters.tasks.reset(),U.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.xe&&(csClearInterval(this.xe),this.xe=null)}}return s})(),Al=-1,Ws=s=>{addEventListener("pageshow",r=>{r.persisted&&(Al=r.timeStamp,s(r))},!0)},ge=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},vo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},_o=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Oi=()=>{var r;let s=_o();return(r=s==null?void 0:s.activationStart)!=null?r:0},me=(s,r=-1)=>{let t=_o(),e="navigate";return Al>=0?e="back-forward-cache":t&&(document.prerendering||Oi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},nn=new WeakMap;function wo(s,r){return nn.get(s)||nn.set(s,new r),nn.get(s)}var Un=class{constructor(){Ee(this,"t");Ee(this,"i",0);Ee(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Ni=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},Ao=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Fs=-1,Ba=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,gr=s=>{document.visibilityState==="hidden"&&Fs>-1&&(Fs=s.type==="visibilitychange"?s.timeStamp:0,Zy())},Fa=()=>{addEventListener("visibilitychange",gr,!0),addEventListener("prerenderingchange",gr,!0)},Zy=()=>{removeEventListener("visibilitychange",gr,!0),removeEventListener("prerenderingchange",gr,!0)},Tl=()=>{var s;if(Fs<0){let r=Oi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Fs=t!=null?t:Ba(),Fa(),Ws(()=>{setTimeout(()=>{Fs=Ba(),Fa()})})}return{get firstHiddenTime(){return Fs}}},Rr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},$a=[1800,3e3],bl=(s,r={})=>{Rr(()=>{let t=Tl(),e,i=me("FCP"),n=Ni("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Oi(),0),i.entries.push(c),e(!0)))});n&&(e=ge(s,i,$a,r.reportAllChanges),Ws(o=>{i=me("FCP"),e=ge(s,i,$a,r.reportAllChanges),vo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},za=[.1,.25],tE=(s,r={})=>{bl(Ao(()=>{let t,e=me("CLS",0),i=wo(r,Un),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Ni("layout-shift",n);o&&(t=ge(s,e,za,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ws(()=>{i.i=0,e=me("CLS",0),t=ge(s,e,za,r.reportAllChanges),vo(()=>t())}),setTimeout(t))}))},Rl=0,on=1/0,tr=0,eE=s=>{for(let r of s)r.interactionId&&(on=Math.min(on,r.interactionId),tr=Math.max(tr,r.interactionId),Rl=tr?(tr-on)/7+1:0)},jn,Ga=()=>{var s;return jn?Rl:(s=performance.interactionCount)!=null?s:0},sE=()=>{"interactionCount"in performance||jn||(jn=Ni("event",eE,{type:"event",buffered:!0,durationThreshold:0}))},qa=0,Hn=class{constructor(){Ee(this,"u",[]);Ee(this,"l",new Map);Ee(this,"m");Ee(this,"p")}v(){qa=Ga(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Ga()-qa)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Cl=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=Ao(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Wa=[200,500],iE=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Rr(()=>{var c;sE();let t,e=me("INP"),i=wo(r,Hn),n=l=>{Cl(()=>{for(let d of l)i.h(d);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Ni("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=ge(s,e,Wa,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),Ws(()=>{i.v(),e=me("INP"),t=ge(s,e,Wa,r.reportAllChanges)}))})},Bn=class{constructor(){Ee(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Ya=[2500,4e3],rE=(s,r={})=>{Rr(()=>{let t=Tl(),e,i=me("LCP"),n=wo(r,Bn),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Oi(),0),i.entries=[h],e())},c=Ni("largest-contentful-paint",o);if(c){e=ge(s,i,Ya,r.reportAllChanges);let l=Ao(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Cl(l),{capture:!0,once:!0});Ws(h=>{i=me("LCP"),e=ge(s,i,Ya,r.reportAllChanges),vo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Xa=[800,1800],Fn=s=>{document.prerendering?Rr(()=>Fn(s)):document.readyState!=="complete"?addEventListener("load",()=>Fn(s),!0):setTimeout(s)},nE=(s,r={})=>{let t=me("TTFB"),e=ge(s,t,Xa,r.reportAllChanges);Fn(()=>{let i=_o();i&&(t.value=Math.max(i.responseStart-Oi(),0),t.entries=[i],e(!0),Ws(()=>{t=me("TTFB",0),e=ge(s,t,Xa,r.reportAllChanges),e(!0)}))})},Il=(()=>{class s{static observe(t,e){csArray.prototype.forEach.call(t,i=>{s.Et[i]&&s.Et[i].add(e),csArray.prototype.includes.call(s.Yg,i)||s.ib(i)})}static ib(t){try{switch(t){case"FCP":bl(e=>{s.Et.FCP.forEach(i=>i(e))},{reportAllChanges:!0});break;case"CLS":tE(e=>{s.Et.CLS.forEach(i=>i(e))},{reportAllChanges:!0});break;case"LCP":rE(e=>{s.Et.LCP.forEach(i=>i(e))},{reportAllChanges:!0});break;case"TTFB":nE(e=>{s.Et.TTFB.forEach(i=>i(e))},{reportAllChanges:!0});break;case"INP":iE(e=>{s.Et.INP.forEach(i=>i(e))},{reportAllChanges:!0});break}csArray.prototype.push.call(s.Yg,t)}catch{U.counters.webVitalsErrors.count(t)}}static disconnect(t,e){csArray.prototype.forEach.call(t,i=>{s.Et[i]&&s.Et[i].delete(e)})}constructor(t,e){this.Xg=t,this.A=e}observe(){s.observe(this.Xg,this.A)}disconnect(){s.disconnect(this.Xg,this.A)}}return s.Yg=[],s.Et={FCP:new Set,CLS:new Set,LCP:new Set,TTFB:new Set,INP:new Set},s})(),oE=(()=>{class s{get rb(){return typeof PerformanceObserver!="undefined"&&(PerformanceObserver.supportedEntryTypes==null?void 0:csArray.prototype.includes.call(PerformanceObserver.supportedEntryTypes,"long-animation-frame"))}get nb(){return typeof performance=="object"&&typeof performance.getEntriesByType=="function"}constructor(){var t;this.j=!1,this.yu=null,this.ob=10,this.ab=5,this.fi=[],this.Yi=[],this.po=new Il(["INP"],e=>this.onINP(e)),this.Kg=(t=window.CSCurrentScript)===null||t===void 0?void 0:t.src}start(){this.rb&&this.nb&&this.Kg&&(this.po.observe(),this.initLoAFObserver(),this.j=!0)}stop(){var t;this.j&&(this.po.disconnect(),(t=this.yu)===null||t===void 0||t.disconnect(),this.fi=[],this.Yi=[],this.j=!1)}initLoAFObserver(){var t;this.yu=new PerformanceObserver(e=>{for(let i of e.getEntries())this.onLoAF(i)}),(t=this.yu)===null||t===void 0||t.observe({type:"long-animation-frame",buffered:!1})}onINP(t){if(!t.entries||t.entries.length===0)return;let e=t.entries[0],i=t.entries[t.entries.length-1],n=e.startTime,o=i.startTime+i.duration;csArray.prototype.push.call(this.Yi,{metric:t,startTime:n,endTime:o}),this.Yi.length>this.ab&&csArray.prototype.shift.call(this.Yi)}onLoAF(t){let e={startTime:t.startTime,duration:t.duration,csDuration:csArray.prototype.reduce.call(csArray.prototype.filter.call(t.scripts,i=>i.sourceURL===this.Kg),(i,n)=>i+n.duration,0)};csArray.prototype.push.call(this.fi,e),this.fi.length>this.ob&&csArray.prototype.shift.call(this.fi),this.cb()}cb(){for(;this.Yi.length>0;){let t=this.Yi[0],e=this.lb(t.startTime,t.endTime);if(e===null)break;csArray.prototype.shift.call(this.Yi),e.length>0&&this.reportINPWithLoAFs(t,e)}}lb(t,e){let i=this.fi[0],n=this.fi[this.fi.length-1];return i&&i.startTime>e?[]:n&&n.startTime+n.duration<e?null:csArray.prototype.filter.call(this.fi,c=>{let l=c.startTime+c.duration;return t<l&&e>c.startTime})}reportINPWithLoAFs(t,e){let i=t.metric.value,n=t.startTime,o=t.endTime,c=0;csArray.prototype.forEach.call(e,l=>{let h=l.startTime+l.duration,d=Math.max(l.startTime,n),f=Math.min(h,o),m=Math.max(0,f-d);if(l.duration>0){let y=l.csDuration/l.duration;c+=m*y}}),U.counters.inpLoaf.add("total",i),U.counters.inpLoaf.add("contribution",c)}}return B([x()],s.prototype,"initLoAFObserver",null),B([x()],s.prototype,"onINP",null),B([x()],s.prototype,"onLoAF",null),B([x()],s.prototype,"reportINPWithLoAFs",null),s})(),aE=(()=>{class s{constructor(){this.go=!1,this.Eu=[],this.Jg=new oE,this.Ds=new Qy}onStartTracking(){this.hb(),this.Jg.start()}hb(){if(typeof performance!="object"||typeof performance.getEntriesByType!="function")return;let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{var i;if(e.initiatorType!=="script")return!1;let n=csString.prototype.split.call(e.name,"/")[2]||"",o=(i=window.CSCurrentScript)===null||i===void 0?void 0:i.src;return o?o===e.name:n==="t.contentsquare.net"});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize;i>=0&&U.counters.downloadTime.push(i),n>=0&&U.counters.transferSize.push(n)}),U.counters.downloadTime.count>0&&U.counters.downloadTime.flush(),U.counters.transferSize.count>0&&U.counters.transferSize.flush()}Qg(){let t=Ns.shadowRootsCount;t!==void 0&&U.counters.dom.add("shadow-dom",t),U.counters.mutations.flush(),U.counters.dom.flush(),U.counters.blockingTime.flush(),U.counters.inpContribution.flush(),U.counters.inpLoaf.flush()}onBeforeArtificialPageView(){this.Qg(),this.Zg(),this.Ds.stopInterval(),this.go=!0}onBeforeNaturalPageView(){this.Qg()}onAfterNaturalPageView(t){t===ms.Natural?(this.Ds.flush("boot"),this.Ds.startInterval()):(this.Zg(),this.Ds.stopInterval(),this.go=!0)}onInitialDomStart(){this.go||this.Ds.stopInterval()}onInitialDomDone(){if(this.go)return;this.go=!0,this.Ds.flush("initial-dom"),this.tm(()=>{this.Ds.flush("post-initial-dom"),this.Ds.startInterval()},5e3);let t=0,e=this.tm(()=>{let i=t.toString();U.counters.payloadSize.flush(i),++t>6&&e()},1e3,5e3)}onOptout(){this.Ds.clear(),this.Jg.stop()}Zg(){csArray.prototype.forEach.call(this.Eu,t=>t()),this.Eu=[]}tm(t,e,i){let n,o,c=()=>{o=void 0,t(),i!==void 0&&(n=self.csSetInterval(t,i))};o=self.csSetTimeout(c,e);let l=()=>{o!==void 0&&(csClearTimeout(o),o=void 0),n!==void 0&&(csClearInterval(n),n=void 0)};return csArray.prototype.push.call(this.Eu,l),l}}return s})(),cE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),lE=(()=>{class s{constructor(){}static init(t){(!this.Su||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Su=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Su.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Su)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(cE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;hE(s.getString("debugLog"),t)&&(n.value=function(...d){return console.log(l,...d),h.bind(this)(...d)})}}}return s})();function hE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var uE=(()=>{class s{constructor(t){this.db=t,this.em=[],this.vu={},this.fb=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.Vr().catch(o=>{st.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.Se:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.sm(c,l):n?Promise.resolve(n[c]):i.sm(c,[])}})}sm(t,e){let i=++this.fb;return new Promise((n,o)=>{this.vu[i]=(c,l)=>{delete this.vu[i],c?o(c):n(l)},this.Se.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.em,t.toString())}Vr(){try{let t=Ka.toString()+`
`+csArray.prototype.join.call(this.em,`
`)+`

const klass = (${this.db.toString()});

${Ka.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.Se=new Worker(i),this.Se.addEventListener("message",n=>{var o,c,l,h,d;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){st.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(d=(h=this.vu)[n.data.id])===null||d===void 0||d.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.Se.onerror=i=>e(new Error(i.message)),this.Se.onmessage=()=>{this.Se.onmessage=this.Se.onerror=null,t()}})}}return s})();function Ka(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function $n(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,d=29,f=256,m=f+1+d,y=30,S=19,T=2*m+1,C=15,_=16,A=7,k=256,I=16,b=17,F=18,j=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ht=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oe=512,v=new Array((m+2)*2);i(v);let L=new Array(y*2);i(L);let V=new Array(Oe);i(V);let H=new Array(h-l+1);i(H);let ht=new Array(d);i(ht);let Ct=new Array(y);i(Ct);function ie(a,p,g,E,u){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=E,this.max_length=u,this.has_stree=a&&a.length}let Ms,Ds,os;function as(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let re=a=>a<256?V[a]:V[256+(a>>>7)],ne=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Tt=(a,p,g)=>{a.bi_valid>_-g?(a.bi_buf|=p<<a.bi_valid&65535,ne(a,a.bi_buf),a.bi_buf=p>>_-a.bi_valid,a.bi_valid+=g-_):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},qt=(a,p,g)=>{Tt(a,g[p*2],g[p*2+1])},Di=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},Cr=a=>{a.bi_valid===16?(ne(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Ir=(a,p)=>{let g=p.dyn_tree,E=p.max_code,u=p.stat_desc.static_tree,R=p.stat_desc.has_stree,w=p.stat_desc.extra_bits,P=p.stat_desc.extra_base,K=p.stat_desc.max_length,$,Bt,je,nt,ds,Ls,Wi=0;for(nt=0;nt<=C;nt++)a.bl_count[nt]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<T;$++)Bt=a.heap[$],nt=g[g[Bt*2+1]*2+1]+1,nt>K&&(nt=K,Wi++),g[Bt*2+1]=nt,!(Bt>E)&&(a.bl_count[nt]++,ds=0,Bt>=P&&(ds=w[Bt-P]),Ls=g[Bt*2],a.opt_len+=Ls*(nt+ds),R&&(a.static_len+=Ls*(u[Bt*2+1]+ds)));if(Wi!==0){do{for(nt=K-1;a.bl_count[nt]===0;)nt--;a.bl_count[nt]--,a.bl_count[nt+1]+=2,a.bl_count[K]--,Wi-=2}while(Wi>0);for(nt=K;nt!==0;nt--)for(Bt=a.bl_count[nt];Bt!==0;)je=a.heap[--$],!(je>E)&&(g[je*2+1]!==nt&&(a.opt_len+=(nt-g[je*2+1])*g[je*2],g[je*2+1]=nt),Bt--)}},ki=(a,p,g)=>{let E=new Array(C+1),u=0,R,w;for(R=1;R<=C;R++)E[R]=u=u+g[R-1]<<1;for(w=0;w<=p;w++){let P=a[w*2+1];P!==0&&(a[w*2]=Di(E[P]++,P))}},Pr=()=>{let a,p,g,E,u,R=new Array(C+1);for(g=0,E=0;E<d-1;E++)for(ht[E]=g,a=0;a<1<<j[E];a++)H[g++]=E;for(H[g-1]=E,u=0,E=0;E<16;E++)for(Ct[E]=u,a=0;a<1<<rt[E];a++)V[u++]=E;for(u>>=7;E<y;E++)for(Ct[E]=u<<7,a=0;a<1<<rt[E]-7;a++)V[256+u++]=E;for(p=0;p<=C;p++)R[p]=0;for(a=0;a<=143;)v[a*2+1]=8,a++,R[8]++;for(;a<=255;)v[a*2+1]=9,a++,R[9]++;for(;a<=279;)v[a*2+1]=7,a++,R[7]++;for(;a<=287;)v[a*2+1]=8,a++,R[8]++;for(ki(v,m+1,R),a=0;a<y;a++)L[a*2+1]=5,L[a*2]=Di(a,5);Ms=new ie(v,j,f+1,m,C),Ds=new ie(L,rt,0,y,C),os=new ie(new Array(0),gt,0,S,A)},xi=a=>{let p;for(p=0;p<m;p++)a.dyn_ltree[p*2]=0;for(p=0;p<y;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[k*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Ys=a=>{a.bi_valid>8?ne(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},bo=(a,p,g,E)=>{Ys(a),E&&(ne(a,g),ne(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},Or=(a,p,g,E)=>{let u=p*2,R=g*2;return a[u]<a[R]||a[u]===a[R]&&E[p]<=E[g]},Li=(a,p,g)=>{let E=a.heap[g],u=g<<1;for(;u<=a.heap_len&&(u<a.heap_len&&Or(p,a.heap[u+1],a.heap[u],a.depth)&&u++,!Or(p,E,a.heap[u],a.depth));)a.heap[g]=a.heap[u],g=u,u<<=1;a.heap[g]=E},Nr=(a,p,g)=>{let E,u,R=0,w,P;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],u=a.pending_buf[a.l_buf+R],R++,E===0?qt(a,u,p):(w=H[u],qt(a,w+f+1,p),P=j[w],P!==0&&(u-=ht[w],Tt(a,u,P)),E--,w=re(E),qt(a,w,g),P=rt[w],P!==0&&(E-=Ct[w],Tt(a,E,P)));while(R<a.last_lit);qt(a,k,p)},Vi=(a,p)=>{let g=p.dyn_tree,E=p.stat_desc.static_tree,u=p.stat_desc.has_stree,R=p.stat_desc.elems,w,P,K=-1,$;for(a.heap_len=0,a.heap_max=T,w=0;w<R;w++)g[w*2]!==0?(a.heap[++a.heap_len]=K=w,a.depth[w]=0):g[w*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=K<2?++K:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,u&&(a.static_len-=E[$*2+1]);for(p.max_code=K,w=a.heap_len>>1;w>=1;w--)Li(a,g,w);$=R;do w=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Li(a,g,1),P=a.heap[1],a.heap[--a.heap_max]=w,a.heap[--a.heap_max]=P,g[$*2]=g[w*2]+g[P*2],a.depth[$]=(a.depth[w]>=a.depth[P]?a.depth[w]:a.depth[P])+1,g[w*2+1]=g[P*2+1]=$,a.heap[1]=$++,Li(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Ir(a,p),ki(g,K,a.bl_count)},Ro=(a,p,g)=>{let E,u=-1,R,w=p[0*2+1],P=0,K=7,$=4;for(w===0&&(K=138,$=3),p[(g+1)*2+1]=65535,E=0;E<=g;E++)R=w,w=p[(E+1)*2+1],!(++P<K&&R===w)&&(P<$?a.bl_tree[R*2]+=P:R!==0?(R!==u&&a.bl_tree[R*2]++,a.bl_tree[I*2]++):P<=10?a.bl_tree[b*2]++:a.bl_tree[F*2]++,P=0,u=R,w===0?(K=138,$=3):R===w?(K=6,$=3):(K=7,$=4))},Co=(a,p,g)=>{let E,u=-1,R,w=p[0*2+1],P=0,K=7,$=4;for(w===0&&(K=138,$=3),E=0;E<=g;E++)if(R=w,w=p[(E+1)*2+1],!(++P<K&&R===w)){if(P<$)do qt(a,R,a.bl_tree);while(--P!==0);else R!==0?(R!==u&&(qt(a,R,a.bl_tree),P--),qt(a,I,a.bl_tree),Tt(a,P-3,2)):P<=10?(qt(a,b,a.bl_tree),Tt(a,P-3,3)):(qt(a,F,a.bl_tree),Tt(a,P-11,7));P=0,u=R,w===0?(K=138,$=3):R===w?(K=6,$=3):(K=7,$=4)}},Vl=a=>{let p;for(Ro(a,a.dyn_ltree,a.l_desc.max_code),Ro(a,a.dyn_dtree,a.d_desc.max_code),Vi(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[Ht[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Ul=(a,p,g,E)=>{let u;for(Tt(a,p-257,5),Tt(a,g-1,5),Tt(a,E-4,4),u=0;u<E;u++)Tt(a,a.bl_tree[Ht[u]*2+1],3);Co(a,a.dyn_ltree,p-1),Co(a,a.dyn_dtree,g-1)},jl=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<f;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},Io=!1,Hl=a=>{Io||(Pr(),Io=!0),a.l_desc=new as(a.dyn_ltree,Ms),a.d_desc=new as(a.dyn_dtree,Ds),a.bl_desc=new as(a.bl_tree,os),a.bi_buf=0,a.bi_valid=0,xi(a)},Po=(a,p,g,E)=>{Tt(a,(n<<1)+(E?1:0),3),bo(a,p,g,!0)},Bl=a=>{Tt(a,o<<1,3),qt(a,k,v),Cr(a)},Fl=(a,p,g,E)=>{let u,R,w=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=jl(a)),Vi(a,a.l_desc),Vi(a,a.d_desc),w=Vl(a),u=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=u&&(u=R)):u=R=g+5,g+4<=u&&p!==-1?Po(a,p,g,E):a.strategy===4||R===u?(Tt(a,(o<<1)+(E?1:0),3),Nr(a,v,L)):(Tt(a,(c<<1)+(E?1:0),3),Ul(a,a.l_desc.max_code+1,a.d_desc.max_code+1,w+1),Nr(a,a.dyn_ltree,a.dyn_dtree)),xi(a),E&&Ys(a)},$l=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(H[g]+f+1)*2]++,a.dyn_dtree[re(p)*2]++),a.last_lit===a.lit_bufsize-1);var zl=Hl,Gl=Po,ql=Fl,Wl=$l,Yl=Bl,Xl={_tr_init:zl,_tr_stored_block:Gl,_tr_flush_block:ql,_tr_tally:Wl,_tr_align:Yl},Oo=(a,p,g,E)=>{let u=a&65535|0,R=a>>>16&65535|0,w=0;for(;g!==0;){w=g>2e3?2e3:g,g-=w;do u=u+p[E++]|0,R=R+u|0;while(--w);u%=65521,R%=65521}return u|R<<16|0};let Kl=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},Jl=new Uint32Array(Kl());var Ne=(a,p,g,E)=>{let u=Jl,R=E+g;a^=-1;for(let w=E;w<R;w++)a=a>>>8^u[(a^p[w])&255];return a^-1},Ui={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},No={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Ql,_tr_stored_block:Zl,_tr_flush_block:th,_tr_tally:Me,_tr_align:eh}=Xl,{Z_NO_FLUSH:cs,Z_PARTIAL_FLUSH:sh,Z_FULL_FLUSH:ih,Z_FINISH:De,Z_BLOCK:Mo,Z_OK:oe,Z_STREAM_END:Do,Z_STREAM_ERROR:Wt,Z_DATA_ERROR:rh,Z_BUF_ERROR:Mr,Z_DEFAULT_COMPRESSION:nh,Z_FILTERED:oh,Z_HUFFMAN_ONLY:ji,Z_RLE:ah,Z_FIXED:ch,Z_DEFAULT_STRATEGY:lh,Z_UNKNOWN:hh,Z_DEFLATED:Hi}=No,uh=9,dh=15,fh=8,Dr=256+1+29,ph=30,gh=19,mh=2*Dr+1,yh=15,X=3,ke=258,Zt=ke+X+1,Eh=32,Bi=42,kr=69,Fi=73,$i=91,zi=103,ls=113,Xs=666,mt=1,Ks=2,hs=3,ks=4,Sh=3,xe=(a,p)=>(a.msg=Ui[p],p),ko=a=>(a<<1)-(a>4?9:0),Le=a=>{let p=a.length;for(;--p>=0;)a[p]=0},Ve=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,Ue=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},vt=(a,p)=>{th(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,Ue(a.strm)},tt=(a,p)=>{a.pending_buf[a.pending++]=p},Js=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},vh=(a,p,g,E)=>{let u=a.avail_in;return u>E&&(u=E),u===0?0:(a.avail_in-=u,p.set(a.input.subarray(a.next_in,a.next_in+u),g),a.state.wrap===1?a.adler=Oo(a.adler,p,u,g):a.state.wrap===2&&(a.adler=Ne(a.adler,p,u,g)),a.next_in+=u,a.total_in+=u,u)},xo=(a,p)=>{let g=a.max_chain_length,E=a.strstart,u,R,w=a.prev_length,P=a.nice_match,K=a.strstart>a.w_size-Zt?a.strstart-(a.w_size-Zt):0,$=a.window,Bt=a.w_mask,je=a.prev,nt=a.strstart+ke,ds=$[E+w-1],Ls=$[E+w];a.prev_length>=a.good_match&&(g>>=2),P>a.lookahead&&(P=a.lookahead);do if(u=p,!($[u+w]!==Ls||$[u+w-1]!==ds||$[u]!==$[E]||$[++u]!==$[E+1])){E+=2,u++;do;while($[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&$[++E]===$[++u]&&E<nt);if(R=ke-(nt-E),E=nt-ke,R>w){if(a.match_start=p,w=R,R>=P)break;ds=$[E+w-1],Ls=$[E+w]}}while((p=je[p&Bt])>K&&--g!==0);return w<=a.lookahead?w:a.lookahead},us=a=>{let p=a.w_size,g,E,u,R,w;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-Zt)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,E=a.hash_size,g=E;do u=a.head[--g],a.head[g]=u>=p?u-p:0;while(--E);E=p,g=E;do u=a.prev[--g],a.prev[g]=u>=p?u-p:0;while(--E);R+=p}if(a.strm.avail_in===0)break;if(E=vh(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=X)for(w=a.strstart-a.insert,a.ins_h=a.window[w],a.ins_h=Ve(a,a.ins_h,a.window[w+1]);a.insert&&(a.ins_h=Ve(a,a.ins_h,a.window[w+X-1]),a.prev[w&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=w,w++,a.insert--,!(a.lookahead+a.insert<X)););}while(a.lookahead<Zt&&a.strm.avail_in!==0)},_h=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(us(a),a.lookahead===0&&p===cs)return mt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,vt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-Zt&&(vt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?hs:ks):(a.strstart>a.block_start&&(vt(a,!1),a.strm.avail_out===0),mt)},xr=(a,p)=>{let g,E;for(;;){if(a.lookahead<Zt){if(us(a),a.lookahead<Zt&&p===cs)return mt;if(a.lookahead===0)break}if(g=0,a.lookahead>=X&&(a.ins_h=Ve(a,a.ins_h,a.window[a.strstart+X-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-Zt&&(a.match_length=xo(a,g)),a.match_length>=X)if(E=Me(a,a.strstart-a.match_start,a.match_length-X),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=X){a.match_length--;do a.strstart++,a.ins_h=Ve(a,a.ins_h,a.window[a.strstart+X-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ve(a,a.ins_h,a.window[a.strstart+1]);else E=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(vt(a,!1),a.strm.avail_out===0))return mt}return a.insert=a.strstart<X-1?a.strstart:X-1,p===De?(vt(a,!0),a.strm.avail_out===0?hs:ks):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?mt:Ks},xs=(a,p)=>{let g,E,u;for(;;){if(a.lookahead<Zt){if(us(a),a.lookahead<Zt&&p===cs)return mt;if(a.lookahead===0)break}if(g=0,a.lookahead>=X&&(a.ins_h=Ve(a,a.ins_h,a.window[a.strstart+X-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=X-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-Zt&&(a.match_length=xo(a,g),a.match_length<=5&&(a.strategy===oh||a.match_length===X&&a.strstart-a.match_start>4096)&&(a.match_length=X-1)),a.prev_length>=X&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-X,E=Me(a,a.strstart-1-a.prev_match,a.prev_length-X),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=Ve(a,a.ins_h,a.window[a.strstart+X-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=X-1,a.strstart++,E&&(vt(a,!1),a.strm.avail_out===0))return mt}else if(a.match_available){if(E=Me(a,0,a.window[a.strstart-1]),E&&vt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return mt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=Me(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<X-1?a.strstart:X-1,p===De?(vt(a,!0),a.strm.avail_out===0?hs:ks):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?mt:Ks},wh=(a,p)=>{let g,E,u,R,w=a.window;for(;;){if(a.lookahead<=ke){if(us(a),a.lookahead<=ke&&p===cs)return mt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=X&&a.strstart>0&&(u=a.strstart-1,E=w[u],E===w[++u]&&E===w[++u]&&E===w[++u])){R=a.strstart+ke;do;while(E===w[++u]&&E===w[++u]&&E===w[++u]&&E===w[++u]&&E===w[++u]&&E===w[++u]&&E===w[++u]&&E===w[++u]&&u<R);a.match_length=ke-(R-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=X?(g=Me(a,1,a.match_length-X),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(vt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?hs:ks):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?mt:Ks},Ah=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(us(a),a.lookahead===0)){if(p===cs)return mt;break}if(a.match_length=0,g=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(vt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===De?(vt(a,!0),a.strm.avail_out===0?hs:ks):a.last_lit&&(vt(a,!1),a.strm.avail_out===0)?mt:Ks};function ae(a,p,g,E,u){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=E,this.func=u}let Qs=[new ae(0,0,0,0,_h),new ae(4,4,8,4,xr),new ae(4,5,16,8,xr),new ae(4,6,32,32,xr),new ae(4,4,16,16,xs),new ae(8,16,32,32,xs),new ae(8,16,128,128,xs),new ae(8,32,128,256,xs),new ae(32,128,258,1024,xs),new ae(32,258,258,4096,xs)],Th=a=>{a.window_size=2*a.w_size,Le(a.head),a.max_lazy_match=Qs[a.level].max_lazy,a.good_match=Qs[a.level].good_length,a.nice_match=Qs[a.level].nice_length,a.max_chain_length=Qs[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=X-1,a.match_available=0,a.ins_h=0};function bh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Hi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(mh*2),this.dyn_dtree=new Uint16Array((2*ph+1)*2),this.bl_tree=new Uint16Array((2*gh+1)*2),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yh+1),this.heap=new Uint16Array(2*Dr+1),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Dr+1),Le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Lo=a=>{if(!a||!a.state)return xe(a,Wt);a.total_in=a.total_out=0,a.data_type=hh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Bi:ls,a.adler=p.wrap===2?0:1,p.last_flush=cs,Ql(p),oe},Vo=a=>{let p=Lo(a);return p===oe&&Th(a.state),p},Rh=(a,p)=>!a||!a.state||a.state.wrap!==2?Wt:(a.state.gzhead=p,oe),Uo=(a,p,g,E,u,R)=>{if(!a)return Wt;let w=1;if(p===nh&&(p=6),E<0?(w=0,E=-E):E>15&&(w=2,E-=16),u<1||u>uh||g!==Hi||E<8||E>15||p<0||p>9||R<0||R>ch)return xe(a,Wt);E===8&&(E=9);let P=new bh;return a.state=P,P.strm=a,P.wrap=w,P.gzhead=null,P.w_bits=E,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=u+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+X-1)/X),P.window=new Uint8Array(P.w_size*2),P.head=new Uint16Array(P.hash_size),P.prev=new Uint16Array(P.w_size),P.lit_bufsize=1<<u+6,P.pending_buf_size=P.lit_bufsize*4,P.pending_buf=new Uint8Array(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=p,P.strategy=R,P.method=g,Vo(a)},Ch=(a,p)=>Uo(a,p,Hi,dh,fh,lh),Ih=(a,p)=>{let g,E;if(!a||!a.state||p>Mo||p<0)return a?xe(a,Wt):Wt;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===Xs&&p!==De)return xe(a,a.avail_out===0?Mr:Wt);u.strm=a;let R=u.last_flush;if(u.last_flush=p,u.status===Bi)if(u.wrap===2)a.adler=0,tt(u,31),tt(u,139),tt(u,8),u.gzhead?(tt(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),tt(u,u.gzhead.time&255),tt(u,u.gzhead.time>>8&255),tt(u,u.gzhead.time>>16&255),tt(u,u.gzhead.time>>24&255),tt(u,u.level===9?2:u.strategy>=ji||u.level<2?4:0),tt(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(tt(u,u.gzhead.extra.length&255),tt(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=Ne(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=kr):(tt(u,0),tt(u,0),tt(u,0),tt(u,0),tt(u,0),tt(u,u.level===9?2:u.strategy>=ji||u.level<2?4:0),tt(u,Sh),u.status=ls);else{let w=Hi+(u.w_bits-8<<4)<<8,P=-1;u.strategy>=ji||u.level<2?P=0:u.level<6?P=1:u.level===6?P=2:P=3,w|=P<<6,u.strstart!==0&&(w|=Eh),w+=31-w%31,u.status=ls,Js(u,w),u.strstart!==0&&(Js(u,a.adler>>>16),Js(u,a.adler&65535)),a.adler=1}if(u.status===kr)if(u.gzhead.extra){for(g=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),Ue(a),g=u.pending,u.pending===u.pending_buf_size));)tt(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Fi)}else u.status=Fi;if(u.status===Fi)if(u.gzhead.name){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),Ue(a),g=u.pending,u.pending===u.pending_buf_size)){E=1;break}u.gzindex<u.gzhead.name.length?E=u.gzhead.name.charCodeAt(u.gzindex++)&255:E=0,tt(u,E)}while(E!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),E===0&&(u.gzindex=0,u.status=$i)}else u.status=$i;if(u.status===$i)if(u.gzhead.comment){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),Ue(a),g=u.pending,u.pending===u.pending_buf_size)){E=1;break}u.gzindex<u.gzhead.comment.length?E=u.gzhead.comment.charCodeAt(u.gzindex++)&255:E=0,tt(u,E)}while(E!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ne(a.adler,u.pending_buf,u.pending-g,g)),E===0&&(u.status=zi)}else u.status=zi;if(u.status===zi&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&Ue(a),u.pending+2<=u.pending_buf_size&&(tt(u,a.adler&255),tt(u,a.adler>>8&255),a.adler=0,u.status=ls)):u.status=ls),u.pending!==0){if(Ue(a),a.avail_out===0)return u.last_flush=-1,oe}else if(a.avail_in===0&&ko(p)<=ko(R)&&p!==De)return xe(a,Mr);if(u.status===Xs&&a.avail_in!==0)return xe(a,Mr);if(a.avail_in!==0||u.lookahead!==0||p!==cs&&u.status!==Xs){let w=u.strategy===ji?Ah(u,p):u.strategy===ah?wh(u,p):Qs[u.level].func(u,p);if((w===hs||w===ks)&&(u.status=Xs),w===mt||w===hs)return a.avail_out===0&&(u.last_flush=-1),oe;if(w===Ks&&(p===sh?eh(u):p!==Mo&&(Zl(u,0,0,!1),p===ih&&(Le(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),Ue(a),a.avail_out===0))return u.last_flush=-1,oe}return p!==De?oe:u.wrap<=0?Do:(u.wrap===2?(tt(u,a.adler&255),tt(u,a.adler>>8&255),tt(u,a.adler>>16&255),tt(u,a.adler>>24&255),tt(u,a.total_in&255),tt(u,a.total_in>>8&255),tt(u,a.total_in>>16&255),tt(u,a.total_in>>24&255)):(Js(u,a.adler>>>16),Js(u,a.adler&65535)),Ue(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?oe:Do)},Ph=a=>{if(!a||!a.state)return Wt;let p=a.state.status;return p!==Bi&&p!==kr&&p!==Fi&&p!==$i&&p!==zi&&p!==ls&&p!==Xs?xe(a,Wt):(a.state=null,p===ls?xe(a,rh):oe)},Oh=(a,p)=>{let g=p.length;if(!a||!a.state)return Wt;let E=a.state,u=E.wrap;if(u===2||u===1&&E.status!==Bi||E.lookahead)return Wt;if(u===1&&(a.adler=Oo(a.adler,p,g,0)),E.wrap=0,g>=E.w_size){u===0&&(Le(E.head),E.strstart=0,E.block_start=0,E.insert=0);let K=new Uint8Array(E.w_size);K.set(p.subarray(g-E.w_size,g),0),p=K,g=E.w_size}let R=a.avail_in,w=a.next_in,P=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,us(E);E.lookahead>=X;){let K=E.strstart,$=E.lookahead-(X-1);do E.ins_h=Ve(E,E.ins_h,E.window[K+X-1]),E.prev[K&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=K,K++;while(--$);E.strstart=K,E.lookahead=X-1,us(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=X-1,E.match_available=0,a.next_in=w,a.input=P,a.avail_in=R,E.wrap=u,oe};var Nh=Ch,Mh=Uo,Dh=Vo,kh=Lo,xh=Rh,Lh=Ih,Vh=Ph,Uh=Oh,jh="pako deflate (from Nodeca project)",Zs={deflateInit:Nh,deflateInit2:Mh,deflateReset:Dh,deflateResetKeep:kh,deflateSetHeader:xh,deflate:Lh,deflateEnd:Vh,deflateSetDictionary:Uh,deflateInfo:jh};let Hh=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Bh=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)Hh(g,E)&&(a[E]=g[E])}}return a},Fh=a=>{let p=0;for(let E=0,u=a.length;E<u;E++)p+=a[E].length;let g=new Uint8Array(p);for(let E=0,u=0,R=a.length;E<R;E++){let w=a[E];g.set(w,u),u+=w.length}return g},jo={assign:Bh,flattenChunks:Fh};let Ho=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ho=!1}let ti=new Uint8Array(256);for(let a=0;a<256;a++)ti[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ti[254]=ti[254]=1;var $h=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,E,u,R,w=a.length,P=0;for(u=0;u<w;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<w&&(E=a.charCodeAt(u+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),u++)),P+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(P),R=0,u=0;R<P;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<w&&(E=a.charCodeAt(u+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),u++)),g<128?p[R++]=g:g<2048?(p[R++]=192|g>>>6,p[R++]=128|g&63):g<65536?(p[R++]=224|g>>>12,p[R++]=128|g>>>6&63,p[R++]=128|g&63):(p[R++]=240|g>>>18,p[R++]=128|g>>>12&63,p[R++]=128|g>>>6&63,p[R++]=128|g&63);return p};let Bo=(a,p=a.length)=>{if(p<65534&&a.subarray&&Ho)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let E=0;E<p;E++)g+=String.fromCharCode(a[E]);return g};var zh=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let E,u,R=new Array(g*2);for(u=0,E=0;E<g;){let w=a[E++];if(w<128){R[u++]=w;continue}let P=ti[w];if(P>4){R[u++]=65533,E+=P-1;continue}for(w&=P===2?31:P===3?15:7;P>1&&E<g;)w=w<<6|a[E++]&63,P--;if(P>1){R[u++]=65533;continue}w<65536?R[u++]=w:(w-=65536,R[u++]=55296|w>>10&1023,R[u++]=56320|w&1023)}return Bo(R,u)},Gh=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+ti[a[g]]>p?g:p},Fo={string2buf:$h,buf2string:zh,utf8border:Gh};function qh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Wh=qh;let $o=Object.prototype.toString,{Z_NO_FLUSH:Yh,Z_SYNC_FLUSH:Xh,Z_FULL_FLUSH:Kh,Z_FINISH:Jh,Z_OK:Gi,Z_STREAM_END:Qh,Z_DEFAULT_COMPRESSION:Zh,Z_DEFAULT_STRATEGY:tu,Z_DEFLATED:eu}=No;function qi(a){this.options=jo.assign({level:Zh,method:eu,chunkSize:16384,windowBits:15,memLevel:8,strategy:tu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wh,this.strm.avail_out=0;let g=Zs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==Gi)throw new Error(Ui[g]);if(p.header&&Zs.deflateSetHeader(this.strm,p.header),p.dictionary){let E;if(typeof p.dictionary=="string"?E=Fo.string2buf(p.dictionary):$o.call(p.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(p.dictionary):E=p.dictionary,g=Zs.deflateSetDictionary(this.strm,E),g!==Gi)throw new Error(Ui[g]);this._dict_set=!0}}qi.prototype.push=function(a,p){let g=this.strm,E=this.options.chunkSize,u,R;if(this.ended)return!1;for(p===~~p?R=p:R=p===!0?Jh:Yh,typeof a=="string"?g.input=Fo.string2buf(a):$o.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===Xh||R===Kh)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(u=Zs.deflate(g,R),u===Qh)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),u=Zs.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Gi;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},qi.prototype.onData=function(a){this.chunks.push(a)},qi.prototype.onEnd=function(a){a===Gi&&(this.result=jo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function su(a,p){p=p||{};let g=new qi(p);if(g.push(a,!0),g.err)throw g.msg||Ui[g.err];return g.result}function iu(a,p){return p=p||{},p.gzip=!0,su(a,p)}return(a,p,g)=>{let E=iu(a);return p==="base64"?E=btoa(Bo(E)):E=E.buffer,g&&g(E),E}}var dE=(()=>{class s extends Mc{constructor(){super(),this.pluginrithm=Ii.GZIP,this.pb=$n(),this.compress=(i,n,o)=>this.im.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?pE:fE;this.im=new e,uE.create(e,{getPakoCompressor:$n}).then(i=>{this.im=i})}compressSync(t,e){try{return this.pb(t,e)}catch(i){throw st.warn(i),i}}}return s})(),fE=(()=>{class s{constructor(){this.gb=$n()}compress(t,e){return Promise.resolve(this.gb(t,e))}}return s})(),pE=(()=>{class s{mb(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.mb(o)):n}}return s})(),gE=(()=>{class s extends Mc{constructor(){super(...arguments),this.pluginrithm=Ii.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Pl=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!lE.isCompressionEnabled()?new gE:this.instance=new dE}}return s})(),mE=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},yE=5e3,EE=(()=>{class s extends kc{constructor(t,e,i){super(t,e),this.Ur=null,this.yb=(i==null?void 0:i.type)||"json",this.rm=i==null?void 0:i.cacheMinutes,this.Zo=i==null?void 0:i.timeout}onLoad(t){this.fr=t}onError(t){this.hn=t}onTimeout(t,e){this.Ti=t,this.Zo=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.Kc(t);let e=mi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.Eb(i,this.yb)}abort(){this.Ur&&(this.Ur.abort(),this.Ur=null)}isInProgress(){return this.Ur!==null}Eb(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.hn)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.Ti)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.fr)===null||o===void 0||o.call(this,this.Sb(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.hn)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Ur=null},n.timeout=(i=this.Zo)!==null&&i!==void 0?i:yE,this.Ur=n,n.send()}Sb(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Kc(t){let e;this.rm?e=`${mE(this.rm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),Ol=(()=>{class s{constructor(t){this.nm=t}create(t,e,i,n){let o=e?{compressor:this.nm.compress,compressionOutputType:e,compressionType:this.nm.pluginrithm}:void 0;return new Dc({endpoint:t,compressionOpts:o,recoveryStorage:i,disableRequestCounting:n})}}return s})(),SE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Mi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})();var vE=(()=>{class s{constructor(t){this._u=t}start(){this._u.onEvent(t=>this.J(t)),this._u.start()}stop(){this._u.stop()}J(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;z.warn(e)}}return s})(),_E=(()=>{class s{constructor(){this.Zt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Lt(this.Zt)}stop(){Vt(this.Zt)}onEvent(t){this.B=t}Ab(t){if(!t)return!1;let e=t.disposition;return W(t.sourceFile)&&csArray.prototype.some.call(s.Tb,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.Ab(t)&&this.B({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.Tb=["contentsquare","cdnssl.clicktale.net"],B([x("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),wE=(()=>{class s{init(){this.Qa=new vE(new _E),this.Qa.start()}onOptout(){this.Qa.stop()}onArtificialPageViewEnd(t){t&&this.Qa.stop()}onAfterArtificialPageView(t){t&&this.Qa.start()}}return s})(),AE=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.w=i}grantReplayConsent(){if(!Qe.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.grantReplayRecordingBeforeSessionStart();return}Qe.isRecordingBlockedByConsent(t)&&(this.C.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Qe.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.withdrawnReplayRecordingBeforeSessionStart();return}Qe.isRecordingWithDrawn(t)||(this.C.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),TE=["replay:consent:unanonymized:granted","trackConsentGranted"],bE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],RE=["replay:consent:startForSession:granted"],CE=["replay:consent:startForSession:withdrawn"],IE=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.Pt=i,this.C=n,this.w=o}init(){this.om=new AE(this.E,this.C,this.w),this.Pt.setInitialConsent(),this.ht()}ht(){this.S.register(TE,()=>{this.Pt.grantReplayAnonymizationConsent()}),this.S.register(bE,()=>{this.Pt.withdrawReplayAnonymizationConsent()}),this.S.register(RE,()=>{this.om.grantReplayConsent()}),this.S.register(CE,()=>{this.om.withdrawReplayConsent()})}onOptout(){this.Pt.removeAllConsents()}onBeforeVisitorRenewal(){this.Pt.removeAllConsents()}onAfterVisitorRenewal(){this.Pt.setInitialConsent()}onAfterVisitorCleared(){this.Pt.setInitialConsent()}}return s})(),Ge="_cs_c",ps=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),PE=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.gt=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.gt.getItem(Ge):t=this.O.get(Ge),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.gt.setItem(Ge,csString(t)):this.O.set(Ge,csString(t),Jn)}remove(){this.E.cookielessTrackingEnabled?this.gt.removeItem(Ge):this.O.delete(Ge)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.O.delete(Ge,_r.CURRENT_DOMAIN):this.O.delete(Ge,this.O.getRootDomain()))}}return s})(),OE=(()=>{class s{constructor(t,e,i){this.E=t,this.ut=e,this.w=i}setInitialConsent(){let t=this.ut.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===ps.NOT_REQUIRED||!e&&t!==ps.NOT_REQUIRED}handleSubdomainChange(){this.ut.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?ps.NOT_EXPRESSED:ps.NOT_REQUIRED;this.ut.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.ut.set(ps.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.ut.set(ps.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ut.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.ut.get()===ps.GRANTED}getRequestParameters(){return{uc:`${this.ut.get()}`}}}return s})(),Ja=512,Qa=255,an={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},NE=(()=>{class s{constructor(t,e){this.M=t,this.ut=e,this.re={},this.Fe={}}set(t,e,i,n){let o,c;if((Xt(t)||W(t))&&Number(t)>0&&Nt(e)&&Nt(i)&&!Ce(e)&&!Ce(i)&&this.bb(n)){let l=this.M.anonymizePII(csString(e)),h=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Ja),csString.prototype.slice.call(h,0,Qa)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(an.SESSION,n)>=0){let d=this.getCustomVariablesSession();c?d[t]=o:delete d[t],this.setCustomVariableSession(d)}(!Z(n)||csArray.prototype.indexOf.call(an.PAGE,n)>=0)&&(c?this.re[t]=o:delete this.re[t]),Z(n)&&csArray.prototype.indexOf.call(an.NEXT_PAGE_ONLY,n)>=0&&(c?this.Fe[t]=o:delete this.Fe[t])}else throw new Ot(Jc[0])}getCustomVariablesSession(){let t=this.ut.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&fi(e)?e:{}}setCustomVariableSession(t){this.ut.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ut.remove()}removeCustomVariablesPage(){this.re={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Fe)this.Fe.hasOwnProperty(i)&&(this.re[i]=this.Fe[i]);for(let i in this.re)this.re.hasOwnProperty(i)&&(t[i]=this.re[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.am(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Fe).length>0)for(let t in this.Fe)this.Fe[t]===this.re[t]&&(delete this.re[t],delete this.Fe[t])}hasCustomVariablesPage(){return this.re&&!yn(this.re)}getCustomVariablesPage(){return this.am(this.re)}cm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!ou(i,1,20)||o.length>Ja||c.length>Qa)&&delete t[e]}}am(t){this.cm(t);let e=yn(t)?[]:t;return window.csJSON.stringify(e)}bb(t){return!Z(t)||W(t)||Xt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Fe)this.Fe.hasOwnProperty(e)&&(this.re[e]=this.Fe[e]);for(let e in this.re)this.re.hasOwnProperty(e)&&(t[e]=this.re[e]);return this.cm(t),t}}return s})(),ME=(()=>{class s{constructor(t,e,i,n){this.ve=t,this.mo=e,this.yo=i,this.Pt=n}init(){this.Rb()}shouldMaskNonTextElements(){if(this.ve.anonymisationMethod!==fs.replayRecordingMaskedUrlRegexRules)return!1;if(this.ve.isSMB)return this.shouldUseAnonymization();let t=this.yo.getMatchingRules(this.mo.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Pt&&!this.Pt.isReplayUnanonymizedAllowedByConsent()){switch(this.ve.anonymisationMethod){case null:case fs.replayRecordingUnmaskedUrlRegex:return!(this.ve.replayRecordingUnmaskedUrlRegex&&this.ve.replayRecordingUnmaskedUrlRegex.test(this.mo.getAnonymizedUrl()));case fs.replayRecordingUnmaskedUrlRegexRules:return!this.yo.evaluateUrl(this.mo.getAnonymizedUrl())}return!0}else{switch(this.ve.anonymisationMethod){case null:case fs.replayRecordingMaskedUrlRegex:return!!(this.ve.replayRecordingMaskedUrlRegex&&this.ve.replayRecordingMaskedUrlRegex.test(this.mo.getAnonymizedUrl()));case fs.replayRecordingMaskedUrlRegexRules:return this.yo.evaluateUrl(this.mo.getAnonymizedUrl())}return!1}}Rb(){this.ve.anonymisationMethod===fs.replayRecordingMaskedUrlRegexRules&&this.ve.replayRecordingMaskedUrlRegexRules?this.yo.setRegexRules(this.ve.replayRecordingMaskedUrlRegexRules):this.ve.anonymisationMethod===fs.replayRecordingUnmaskedUrlRegexRules&&this.ve.replayRecordingUnmaskedUrlRegexRules&&this.yo.setRegexRules(this.ve.replayRecordingUnmaskedUrlRegexRules)}}return s})();var DE=(()=>{class s extends ye{constructor(t){super(),this.G=null,this.Za=null,this.U=null,this.ei=null,this.lm=["value","checked","src","data","alt"],this.tc={state:M.MaskedElementState.Child},this.Ib=e=>{for(let i of e){if(M.isMaskedElement(i.target)||M.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];M.isMaskedElement(o)||M.isMaskedElementChild(o)||lt(o)&&this.hm(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];ft.isConnected(o)||this.um(o)}}},this.Pb=t}setMaskedElementSettings(t){this.ks=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.ks||(st.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ks={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.ks;(t=this.ei)!==null&&t!==void 0||(this.ei=this.Ob()),o.length!==0&&((e=this.G)!==null&&e!==void 0||(this.G=this.Nb()),this.G.observe(o)),c.length!==0&&((i=this.Za)!==null&&i!==void 0||(this.Za=this.Mb(l)),this.Za.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new ns(this.Ib,(h,d)=>d==="added"&&this.Db(h))),this.U.observe(),csSetTimeout(this.Pb)}onStop(){var t,e,i;this.G&&(this.um(document),this.G.disconnect()),(t=this.Za)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.ei)===null||i===void 0||i.disconnect()}Ob(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}Nb(){return new Gs(t=>{csArray.prototype.forEach.call(t,e=>{this.kb(e)?this.hm(e):(this.xb(e),this.Lb(e))})})}Mb(t){return new Gs(e=>{csArray.prototype.forEach.call(e,i=>this.Vb(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=M.getMaskedElementDetails(t.target);if(i.state!==M.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:G(t.target),width:e.width,height:e.height})}Lb(t){!this.ei||!lt(t)||vr(t)||this.ei.observe(t)}kb(t){let e=csNodeparentNode.apply(t);return e?M.isMaskedElement(e)||M.isMaskedElementChild(e):gi(t)?M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host):!1}Db(t){(M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host))&&M.setMaskedElementProperty(t,this.tc)}um(t){Jt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{M.unsetMaskedElementProperty(i),t===document&&U.counters.dom.add("size",1)})}xb(t){let e=t.getBoundingClientRect(),i={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t,i),this.Ub(t),Jt(t).visitAll(n=>n!==t&&M.setMaskedElementProperty(n,this.tc))}hm(t){M.setMaskedElementProperty(t,this.tc),Jt(t).visitAll(e=>e!==t&&M.setMaskedElementProperty(e,this.tc))}Ub(t){var e;let i=(e=it.getProperty(t,M.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.lm.length;n+=1){let o=this.lm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&M.setMaskedAttributeProperty(t,i)}Vb(t,e){var i;let n=(i=it.getProperty(t,M.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&se.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&M.setMaskedAttributeProperty(t,n)}}return Pe([x()],s.prototype,"resizeObserverCallback",null),s})(),kE=(()=>{class s{constructor(){this.Au=0,this.j=!1,this.dm="data-cs-capture",this.pi=t=>{for(let e of t){if(fe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];fe.isWhitelistedElement(n)||lt(n)&&this.fm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ft.isConnected(n)||this.pm(n)}}}}start(){this.Au++,!this.j&&(this.j=!0,this.jb())}jb(){this.G||(this.G=new Gs(e=>Q(e,i=>this.fm(i))));let t=this.Tu?`[${this.dm}], ${this.Tu}`:`[${this.dm}]`;this.G.observe(t),this.U||(this.U=new ns(this.pi,(e,i)=>i==="added"&&this.Hb(e))),this.U.observe()}stop(){this.j&&(this.Au--,this.Au===0&&(this.j=!1,this.Bb()))}Bb(){this.G&&(this.pm(document),this.G.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(li(t))this.Tu=t;else if(e)throw new Ot("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Tu}fm(t){Jt(t).visitAll(e=>{fe.whitelistElement(e)})}Hb(t){fe.isWhitelistedElement(t.host)&&fe.whitelistElement(t)}pm(t){Jt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{fe.removeWhitelistElement(i)})}}return s})();var xE=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var LE="csq:start-hotjar",mr=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),Za=(()=>{class s{static set(t,e){s.mm[t]=e}static isEnabled(t){return s.mm[t]===!0}}return s.mm={[mr.HJ_DUAL_COLLECT]:!1},s})();function Nl(){return window.hjSiteSettings?(window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,mr.HJ_DUAL_COLLECT))>-1:!1}function tc(s){return Nl()?s?!uo(s)&&!qc(s):!0:!1}function VE(s){return!Nl()||!s?!1:uo(s)||qc(s)}var UE=(()=>{class s{constructor(t,e){this.Q=t,this.bt=e,this.Ru=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.bt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Ru=!0}disableRemoveQueryString(){this.Ru=!1}get(){let t=this.Ru?this.Q.removeQueryString(this.vm()):this.vm();return this.Q.anonymizeUrl(t,{maskingPatterns:this.bt.getUrlMaskingPatterns()})}set(t){this._m=t}vm(){if(this._m)return this._m;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function ec(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?zn(r):s.pathname,i=Z(t)?Ml(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function zn(s){return Ut(s,"/")?s:`/${s}`}function Ml(s){return Ut(s,"?")||s===""?s:`?${s}`}var cn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),jE=(()=>{class s{constructor(t,e){this.Ut=t,this.Q=e,this.e0=10}overridePath(t,e){if(t===""){this.gi=void 0;return}let i=this.wm(e);i&&(this.Cu=i),this.gi=e?this.Am(t,e):t}overrideQuery(t,e){let i=this.wm(e);i&&(this.Iu=i),this.Eo=e?this.Am(t,e):t}computeOverriddenUrl(t){return this.s0(t)?this.getAnonymizedUrl():t}i0(t){return(typeof t=="string"||typeof t=="number")&&t in cn}s0(t){let e=this.na(this.Ut.href);return this.na(t)===e}na(t){return Gd(t,"/")?csString.prototype.slice.call(t,0,-1):t}wm(t){return Z(t==null?void 0:t.lifespan)&&this.i0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}r0(){return this.Cu&&this.Cu in cn}n0(){return this.Iu&&this.Iu in cn}cleanupOverrideLifespan(){this.r0()&&(this.gi=void 0,this.Cu=void 0),this.n0()&&(this.Eo=void 0,this.Iu=void 0)}getAnonymizedUrl(){let t=ec(this.Ut,this.gi,this.Eo);return this.Q.anonymizeUrl(t)}getUrl(){return ec(this.Ut,this.gi,this.Eo)}getAnonymizedPathAndQuery(){let t=Z(this.gi)?zn(this.gi):this.Ut.pathname,e=Z(this.Eo)?Ml(this.Eo):this.Ut.search;return this.Q.anonymizeUrl(t+e)}getPath(){return Z(this.gi)?zn(this.gi):this.Ut.pathname}getUrlProtocol(){return this.Ut.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Am(t,e){return this.o0(e)?this.a0(t):this.c0(e)?this.l0(t):t}c0(t){return!!t.decodeURI}l0(t){return this.Tm(t,1,!1)}o0(t){return!!t.decodeURIDeep}a0(t){return this.Tm(t,this.e0,!0)}Tm(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&z.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),HE=(()=>{class s{constructor(t,e){this.S=t,this.Ge=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ge.updateDynamicFields("emitDebugEvents",t)})}}return s})();var BE=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var sc=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.C=i,this.es=n}getRequestParameters(){let t={...oo(),...this.E.getRequestParameters()},e=this.C.getSession();e&&(t.pn=`${e.pageNumber}`);let i=this.N.getVisitor();if(i&&(t.sn=`${i.visitsCount}`,t.uu=`${i.id}`),this.d0(t),window.heap&&!this.E.isCsCrosswritingHeap())try{t.happid=window.heap.appid,window.heap.getSessionId&&(t.hsid=window.heap.getSessionId()),window.heap.getUserId?t.huu=window.heap.getUserId():window.heap.userId&&(t.huu=window.heap.userId),window.heap.getPageviewMetadata&&(t.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete t.happid,delete t.hsid,delete t.huu,delete t.hpvid}return t}d0(t){if(!this.es)return;let e=this.es.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function FE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function $E(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var zE=(()=>{class s{constructor(t){this.cl=t,this.f0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ks={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:FE(),Attributes:$E()};this.ks=M.getComputedSelectorSettings(e,this.ks)}init(){this.p0()}setMaskedElementSettingsFromCommand(t){if(t=M.sanitizeSelectorUserInput(t),!M.isSelectorUserInput(t))throw new Ot(Qc[0]);this.Pu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Pu(e)}getMaskedElementSettings(t){return t?this.Rm(this.f0):this.ks}p0(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(d=>{W(d.attr)&&W(d.rule)&&h.Attributes.push({selector:d.rule,attrName:d.attr})}),(l=this.cl)===null||l===void 0||l.markClicktalePIIInUse(h),this.Pu(h)}Pu(t){this.ks=this.Rm(t)}Rm(t){return M.getComputedSelectorSettings(t,this.ks)}}return s})(),GE=60*1e3,qE=30*1e3,WE=(()=>{class s{constructor(t,e){this.C=t,this.N=e,this.Ou=!1,this.g0=wr(()=>this.C.refreshSession(),qE)}onSessionExpired(t){this.m0=t}isSessionValid(){return this.Ou?!0:!(!this.C.hasValidSession()||this.C.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.C.hasValidSession();return this.C.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.g0():this.y0()&&(this.Cm=N.now(),this.renewSession(!1))}renewSession(t){this.Ou=!0,this.m0(t),this.Ou=!1}y0(){return!document.hidden&&(!Z(this.Cm)||N.now()-this.Cm>GE)}}return s})(),YE=(()=>{class s{constructor(){this.G=null,this.U=null,this.j=!1,this.pi=t=>{for(let e of t)if(Ye.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Ye.isEditableNode(n)){if(lr(n)||xu(n)){Ye.markEditableNode(n);continue}lt(n)&&this.Im(n)}}}}start(){this.j||(this.j=!0,this.G=new Gs(t=>Q(t,e=>{this.Im(e)})),this.G.observe("[contenteditable]"),this.U=new ns(this.pi,(t,e)=>e==="added"&&this.E0(t)),this.U.observe())}stop(){var t,e;this.j&&(this.j=!1,(t=this.G)===null||t===void 0||t.disconnect(),this.G=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}Im(t){Jt(t).visitAll(e=>{Ye.markEditableNode(e)})}E0(t){Ye.isEditableNode(t.host)&&Ye.markEditableNode(t)}}return s})();var XE=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),KE=(()=>{class s extends XE{constructor(t){super(),this.v0=t,this.ni=[{boundElement:document,type:"touchstart",listener:e=>this.J(e)},{boundElement:document,type:"touchmove",listener:e=>this.J(e)},{boundElement:document,type:"touchend",listener:e=>this.J(e)}],this.So=new Ln,this.So.onGesture((e,i)=>this.kh(e,i))}kh(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.ni,t=>Lt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.ni,t=>Vt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}J(t){this.v0.tryToExecute("process gesture event",()=>{if(this.So.isValidTouchEvent(t))switch(t.type){case"touchstart":this.So.processActionDown(t);break;case"touchmove":this.So.processActionMove();break;case"touchend":this.So.processActionUp(t);break}})()}static isSwipe(t){return t.type===St.FLICK||t.type===St.DRAG}}return s})();var JE=(()=>{class s{constructor(t){this.pt=t}on(t,e){return i=>{this.pt.hasValidEventTarget(i)&&this.$0(i,t)&&e(i)}}$0(t,e){let i=yt(t);return se.call(i,e)}isMatchesSelectorSupported(){return!!se}}return s})(),QE=(()=>{class s extends jt{constructor(){super(),this.Lm=0}onStart(){z.isPerfLoggingActive()&&(this._o=window.csSetInterval(()=>this.Vm(),s.z0))}onStop(){z.isPerfLoggingActive()&&(this.Vm(),csClearInterval(this._o))}Vm(){this.Lm>=s.G0||U.counters.methodPerformance.flush()&&this.Lm++}}return s.z0=5e3,s.G0=5,s})(),ZE=(()=>{class s{constructor(){}init(){this.rc=new QE}onStartTracking(){this.rc.start()}onOptout(){this.rc.stop()}onArtificialPageViewEnd(t){t&&this.rc.stop()}onAfterArtificialPageView(t){t&&this.rc.start()}}return s})();var tS=1024,eS=512,ln=1024,hn="||",sS=(()=>{let s;return function(r){function t(c,l){return W(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),Ae.CHAMELEON)!==-1?Ae.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let d=i(h);return{type:q.CUSTOM_EVENT,ts:0,customEventName:ue.truncate(c,tS,ue.ELLIPSIS),sourceLibrary:Df(l)?l:Ae.WEB,...yn(d)?{}:{properties:d}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>eS)continue;let d=c[h];if(Xt(d)||nr(d))l[h]=csString(d);else if(o(d))l[h]=ue.truncate(d,ln,ue.ELLIPSIS);else if(wu(d)){let f=n(d);f!==""&&(l[h]=f)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let d=c[h];if(!Xt(d)&&!nr(d)&&!o(d))continue;let f=csString(d);if(l==="")l=ue.truncate(f,ln,ue.ELLIPSIS);else if(l.length+hn.length+f.length<=ln)l+=hn+f;else break}return l}function o(c){return W(c)&&!Xn(c)&&!csString.prototype.includes.call(c,hn)}}(s||(s={})),s})(),Pt=(()=>{class s{static buildFromCustomEvent(t,e){return this.Wm(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.Wm(t,e,i)}static Wm(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})(),iS=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A){super(),this.E=t,this.yi=e,this._e=i,this.$r=n,this.Uu=o,this.ss=c,this.De=l,this.ju=h,this.V=d,this.ae=f,this.Hu=m,this.Qe=y,this.Y=S,this.zt=T,this.cc=C,this.Ls=_,this.Vs=A,this.Dr=new Sl,this.lc=!1,this.Qi=[]}init(){var t,e,i;this.yi.onEvent(n=>this.ie(n)),this._e.onEvent(n=>this.ie(n)),this.$r.onEvent(()=>{let n=this.$r.getRequestParameters();this.Y.setQueryParams(n),this.De.setQueryParams(n)}),this.Hu.onEvent(n=>this.Us(n)),this.Bu(),(t=this.cc)===null||t===void 0||t.onEvent(n=>this.ie(n)),(e=this.Ls)===null||e===void 0||e.onEvent(n=>this.ie(n)),(i=this.Vs)===null||i===void 0||i.onEvent(n=>this.ie(n)),this.gR()}gR(){this.De.onBeaconSuccess(()=>{this.ss.clearEvents()}),this.De.onBeaconFailure(t=>{this.mR(t)})}initStates(){let t=this.ju.getRequestParameters(),e=this.Uu.getRequestParameters(),i=this.$r.getRequestParameters();this.Y.setQueryParams(t),this.Y.setQueryParams(e),this.Y.setQueryParams(i),this.De.setQueryParams(t),this.De.setQueryParams(e),this.De.setQueryParams(i),this.Pl()}clearStates(t){var e,i;this.yi.flushPendingDebouncedListeners(),(e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.Fu(),this.sendLastMessageBeacon()):this.sendEvents(),this.$r.reset(),this.Y.removeQueryParams()}onStart(t){var e,i,n;this.Qe.start(),this.yi.start(),this.$r.start(),this._e.start(),(e=this.cc)===null||e===void 0||e.start(),(i=this.Vs)===null||i===void 0||i.start(),t||this.Hu.start(),(n=this.Ls)===null||n===void 0||n.start(),csArray.prototype.forEach.call(this.Qi,o=>{this.Us(o)}),this.Qi=[]}collectInitialEvents(){var t;(t=this.cc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Us(t)}onIframeAnalysisUserEvent(t){this.ie(t)}onExternalEvent(t){this.J(t)}Us(t){this.isStarted&&this.V.isCurrentPageviewValid()&&this.J(t)}ie(t){this.isStarted&&(this.V.refreshSession(),this.V.isSessionValid()&&this.J(t))}J(t){this.ss.addEvent(this.yR(t)),this.ss.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.Dr.emit("analysisEvent",{...t,typeName:q[t.type]})}yR(t){return t.ts=this.Ii(),t}Fu(){this.De.setQueryParams({hlm:"true"}),this.lc=!0}sendLastMessageBeacon(){this.De.removeQueryParams(["i"]),this.De.setQueryParams(this.ju.getRequestParameters()),this.De.setQueryParams(this.Uu.getRequestParameters()),this.De.send(this.ss.stringifyEvents()),this.De.removeQueryParams(["hlm"]),this.lc=!1}sendEvents(){this.ss.isEmpty()||(this.De.removeQueryParams(["i"]),this.Y.setQueryParams(this.ju.getRequestParameters()),this.Y.setQueryParams(this.Uu.getRequestParameters()),this.Y.send(this.ss.getEvents()),this.ss.clearEvents())}onStop(){var t,e,i;this.Qe.stop(),this.yi.stop(),this.$r.stop(),this._e.stop(),this.Hu.stop(),(t=this.cc)===null||t===void 0||t.stop(),(e=this.Ls)===null||e===void 0||e.stop(),(i=this.Vs)===null||i===void 0||i.stop(),this.ss.empty()}Pl(){this.ls=N.now()}Ii(){return N.now()-this.ls}Bu(){this.Qe.onEvent(t=>{var e,i;t!==Yt.Visible&&((e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Yt.PagehideVisible?this.Fu():t===Yt.PagehideHidden?(this.Fu(),this.sendLastMessageBeacon()):(!this.ss.isEmpty()||this.lc)&&this.sendLastMessageBeacon())})}mR(t){try{(!this.ss.isEmpty()||this.lc)&&this.ae.save({requestParameters:t,events:this.ss.getEvents()})}catch{}}pushCustomEvent(t,e,i){if(!(W(t)&&!Xn(t))||i!==void 0&&!Yn(i))throw new Ot(Gn[0]);let n=sS.buildCustomEvent(t,e,i),o=Pt.buildFromCustomEvent(n,this.zt);this.isStarted?this.Us(o):csArray.prototype.push.call(this.Qi,o)}}return s})(),rS=(()=>{class s extends Mi{constructor(){super(...arguments),this.supportedEventTypes=[q.CHANGE],this.ER=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=yt(t);return Sr(i)&&csArray.prototype.indexOf.call(this.ER,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var $t=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var Dl=(()=>{class s extends Mi{constructor(t){super(),this.pt=t,this.supportedEventTypes=[q.MOUSEDOWN,q.MOUSEUP,q.CLICK,q.MOUSEOVER,q.TAP,q.DRAG,q.FLICK,q.SUBMIT,q.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.pt.getEventTargetPath(t)),e}}return s})(),ic=65535,nS=(()=>{let s;return function(r){function t(e){let i=yt(e);if(!i||!lt(i)||!Ce(i.getBoundingClientRect)||!Nt(e.pageX)||!Nt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-Et.windowOffsetX(),c=e.pageY-n.top-Et.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),d=Math.round(o/l*ic),f=Math.round(c/h*ic);return{xRel:d,yRel:f,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),oS=(()=>{class s extends Mi{constructor(t,e){super(),this.Ge=t,this.pt=e,this.supportedEventTypes=[q.MOUSEMOVE,q.CLICK],this.zu=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=nS.getRelativePosition(t);if(i){let c=this.pt.getEventTargetPath(t);c!==ts.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===q.MOUSEMOVE&&(c!==this.zu||this.Ge.iframesTracking?(this.zu=c,e.tgtHM=c,this.Ge.isChild||(e.tgtHMH=Hc(e.tgtHM))):e.tgtHM=""))}else e.type===q.MOUSEMOVE&&(this.zu="");return e}}return s})(),kl=(()=>{class s extends Mi{constructor(t,e){super(),this.pt=t,this.$t=e,this.supportedEventTypes=[q.CLICK,q.SUBMIT,q.CHANGE,q.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.$t.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.pt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),rc=100,xl=(()=>{class s extends Mi{constructor(t,e,i){super(),this.E=t,this.$t=e,this.M=i,this.supportedEventTypes=[q.TAP,q.CLICK,q.SUBMIT]}IR(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,so(n.parentElement)||eo(n.parentElement)||this.$t.getElementSensitiveStatus(n.parentElement)!==$t.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=rc)break;n=i.nextNode()}return!1}PR(t){let e=Cn(t,"button,a");return e||(this.E.collectTargetText===Rn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(yr(csEventtarget.apply(t))){let i=this.PR(csEventtarget.apply(t));if(i&&W(i.textContent)&&!this.IR(i)&&!this.M.hasPII(i.textContent,this.E.anonymizeDigits)){let n=ue.truncate(csString.prototype.trim.call(i.textContent),rc);n.length>0&&(e.text=n)}}return e}}return s})();function aS(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new oS(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new xl(s,t,new Ps)),s.collectHierarchy&&csArray.prototype.push.call(n,new kl(r,t)),csArray.prototype.push.call(n,new rS,new Dl(r)),n}function cS(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new xl(s,t,new Ps)),s.collectHierarchy&&csArray.prototype.push.call(n,new kl(r,t)),csArray.prototype.push.call(n,new Dl(r)),n}var lS=(()=>{class s extends jt{constructor(t,e){super(),this.ae=t,this.Y=e,this.Qm=()=>{document.visibilityState==="visible"&&this.Zm()}}onStart(){this.Zm(),this.$h()}onStop(){this.zh()}getRecoveryStorage(){return this.ae}Zm(){let t=this.ae.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.Y.send(i,e)}}$h(){document.addEventListener("visibilitychange",this.Qm)}zh(){document.removeEventListener("visibilitychange",this.Qm)}}return s})(),hS=(()=>{class s{constructor(t){this.Nr=t}save(t){localStorage.setItem(this.Nr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Nr)}recover(){let t=localStorage.getItem(this.Nr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{z.error(`Invalid item in localStorage.
         (key:${this.Nr}; value:${t})`)}finally{this.clear()}return e}}return s})(),uS=50,dS=(()=>{class s{constructor(t=[]){this.Bt=t}stringifyEvents(){return csJSON.stringify(this.Bt)}addEvent(t){csArray.prototype.push.call(this.Bt,t)}eventsCount(){return this.Bt.length}clearEvents(){this.Bt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=uS}isEmpty(){return this.Bt.length===0}getEvents(){return this.Bt}}return s})(),fS=(()=>{class s{constructor(t,e,i,n=["submit"]){this.zt=t,this.pt=e,this.Gt=i,this.NR=n,this.ty="select, select *, input, textarea",this.MR="select, select *, input, textarea",this.ey="a, a *, button, button *, select, select *, input, textarea",this.To="input, select, textarea",this.DR="form",this.Ec=150,this.kR=400,this.sy=!1,this.bo=or((o,c)=>this.scrollListener(o,c),this.Ec),this.iy=or(o=>this.resizeListener(o),this.Ec),this.xR=wr(o=>this.mouseMoveListener(o),this.kR),this.LR=[{boundElement:window,type:"resize",listener:()=>this.iy()},{boundElement:document,type:"scroll",listener:o=>this.bo(o)},{boundElement:window,type:"mousemove",listener:o=>{this.xR(Xf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.ry=[{type:"change",listener:this.Gt.on(this.MR,o=>this.changeListener(o))},{type:"submit",listener:this.Gt.on(this.DR,o=>this.submitListener(o))}],this.VR=[{boundElement:document,type:"mouseover",listener:this.Gt.on(this.ey,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Gt.on(this.ey,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Gt.on(this.ty,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Gt.on(this.ty,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Gt.on(this.To,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Gt.on(this.To,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Gt.on(this.To,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Gt.on(this.To,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Gt.on(this.To,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.ry,o=>({...o,boundElement:document}))],this.F={},this.Ql=(o,c)=>{switch(c){case"initial":case"added":this.$i(o);break;case"removed":this.zi(o);break}},this.pe=new Ns(this.Ql),this.su()}$i(t){if(hr(t)){let e=this.ny();csArray.prototype.forEach.call(e,i=>Lt(i))}else{let e=this.oy();csArray.prototype.forEach.call(e,i=>{Lt({...i,boundElement:t})})}}zi(t){if(hr(t)){let e=this.ny();csArray.prototype.forEach.call(e,i=>Vt(i))}else{let e=this.oy();csArray.prototype.forEach.call(e,i=>{Vt({...i,boundElement:t})})}}onEvent(t){this.B=t}start(){this.pe.observe(),this.$i(document),this.resizeListener()}stop(){this.zi(document),this.pe.disconnect()}flushPendingDebouncedListeners(){this.bo.flushPending(),this.iy.flushPending()}ay(t){return csArray.prototype.some.call(this.NR,e=>e===t)}oy(){return this.Gt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.ry,t=>!this.ay(t.type)):(z.warn("Element.matches is not implemented yet"),[])}ny(){let t=[];return csArray.prototype.push.call(t,...this.LR),this.Gt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.VR):z.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.ay(e.type))}resizeListener(t){let e=zs.getScrollContainer(),i=yr(e);i&&(this.sy=!0);let n={type:q.RESIZE,ts:0,x:i?e.clientWidth:Et.windowWidth(),y:i?e.clientHeight:Et.windowHeight()};t!==void 0&&(n.d=t),this.B(n)}scrollListener(t,e){let i=zs.isEventOnScrollContainer(e);!this.sy&&i&&this.resizeListener();let n={type:q.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Et.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Et.windowOffsetY(),d:t},o=Pt.buildFromAnalysisEvent(e,n,this.zt);this.B(o)}mouseMoveListener(t){let e={type:q.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.B(i)}mouseDownListener(t){let e={type:q.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}mouseUpListener(t){let e={type:q.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}clickListener(t){let e={type:q.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}mouseOverListener(t){let e={type:q.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}mouseOutListener(t){let e={type:q.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.pt.getEventTargetPath(t)},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}focusInListener(t){let e={type:q.FOCUSIN,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}focusOutListener(t){let e={type:q.FOCUSOUT,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}changeListener(t){let e={type:q.CHANGE,ts:0,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}submitListener(t){let e={type:q.SUBMIT,ts:0,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);this.we(i)}copyListener(t){let e={type:q.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:$s.COPY};this.we(e)}cutListener(t){let e={type:q.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:$s.CUT};this.we(e)}pasteListener(t){let e={type:q.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:$s.PASTE};this.we(e)}keyUpListener(t){let e={type:q.KEYUP,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.cy(t)};this.we(e)}keyDownListener(t){let e={type:q.KEYDOWN,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.cy(t)};this.we(e)}cy(t){let e=this.F[t.key];return e===void 0?Y.ALPHANUMERICAL:e}we(t){jc(t)&&t.tgt!==ts.INVALID_ELEMENT&&this.B(t)}su(){this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Enter=Y.ENTER,this.F.Backspace=Y.BACKSPACE,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB}}return B([x("Event handler type: resize")],s.prototype,"resizeListener",null),B([x("Event handler type: scroll")],s.prototype,"scrollListener",null),B([x("Event handler type: mouseMove"),At()],s.prototype,"mouseMoveListener",null),B([x("Event handler type: mouseDown"),At()],s.prototype,"mouseDownListener",null),B([x("Event handler type: mouseUp"),At()],s.prototype,"mouseUpListener",null),B([x("Event handler type: click"),At()],s.prototype,"clickListener",null),B([x("Event handler type: mouseOver"),At()],s.prototype,"mouseOverListener",null),B([x("Event handler type: mouseOut"),At()],s.prototype,"mouseOutListener",null),B([x("Event handler type: focusIn")],s.prototype,"focusInListener",null),B([x("Event handler type: focusOut")],s.prototype,"focusOutListener",null),B([x("Event handler type: change")],s.prototype,"changeListener",null),B([x("Event handler type: submit"),At()],s.prototype,"submitListener",null),B([x("Event handler type: copy")],s.prototype,"copyListener",null),B([x("Event handler type: cut")],s.prototype,"cutListener",null),B([x("Event handler type: paste")],s.prototype,"pasteListener",null),B([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),pS=(()=>{class s{constructor(t,e,i){this.zt=t,this._e=e,this.Nt=i}processGesture(t,e){switch(t.type){case St.TAP:this.UR(e);break;case St.FLICK:this.jR(t,e);break;case St.DRAG:this.HR(t,e);break;default:break}}UR(t){let e={type:q.TAP,ts:0,x:0,y:0,tgt:""},i=Pt.buildFromAnalysisEvent(t,e,this.zt);i.tgt!==ts.INVALID_ELEMENT&&this.B(i)}HR(t,e){var i,n;let o={type:q.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Nt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Nt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Pt.buildFromAnalysisEvent(e,o,this.zt);c.tgt!==ts.INVALID_ELEMENT&&this.B(c)}jR(t,e){var i,n;let o={type:q.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Nt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Nt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Pt.buildFromAnalysisEvent(e,o,this.zt);c.tgt!==ts.INVALID_ELEMENT&&this.B(c)}onEvent(t){this.B=t}start(){this._e.subscribe(s.ly,(t,e)=>this.processGesture(t,e))}stop(){this._e.unsubscribe(s.ly)}}return s.ly="AnalysisGestureTracker",B([At()],s.prototype,"processGesture",null),s})();var gS=(()=>{class s{constructor(){this.uy=100,this.Co=0,this.Io=Et.documentHeight(),this.dy={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Co=this.Wu(zs.getScrollContainer()).maxScrollRate}onEvent(t){this.B=t}start(){Lt(this.dy)}stop(){Vt(this.dy)}reset(){let t=zs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Wu(t);this.Io=i,this.Co=e,this.B()}Wu(t){let e=0,i=0;if(t===null)i=Et.documentHeight(),e=this.zR(i);else{let n=this.GR(t);i=this.fy(t,n),e=this.qR(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;zs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Wu(e);(i>this.Co||n>this.Io)&&(this.Co=i,n>this.Io&&(this.Io=n),this.B())}zR(t){let e=Math.round(this.WR()/t*100);return Math.min(e,this.uy)}WR(){let t=Et.windowHeight();return Et.windowOffsetY()+t}qR(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.fy(t,e),o=Math.round(i/n*100);return Math.min(o,this.uy)}GR(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}fy(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Co}`,mdh:`${this.Io}`}}}return B([x("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),mS=(()=>{class s{constructor(){this.YR=t=>this.processMetric(t),this.j=!1,this.po=new Il(["FCP","CLS","LCP","TTFB","INP"],this.YR)}onEvent(t){this.B=t}start(){this.j||(this.j=!0,this.po.observe())}stop(){this.j=!1,this.po.disconnect()}processMetric(t){if(!this.j)return;let e={type:q.PERFORMANCE,name:t.name,val:t.value,ts:0};this.B(e)}}return B([x("Performance metric handler")],s.prototype,"processMetric",null),s})(),yS=(()=>{class s{constructor(t){this.XR=Math.pow(2,32)-2,this.tr=t.performance}getRequestParameters(){let t=this.KR();return t?{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}:{}}KR(){let t=this.JR();if(t&&(t==null?void 0:t.loadEventEnd)>0){let e=this.py({startRender:t.responseStart-t.requestStart,domInteractive:t.domInteractive-t.requestStart,domComplete:t.domComplete-t.requestStart,fullyLoaded:t.loadEventEnd-t.requestStart});if(e)return e}if(this.tr&&this.tr.timing&&this.tr.timing.loadEventEnd>0){let e=this.tr.timing;return this.py({startRender:e.domLoading-e.requestStart,domInteractive:e.domInteractive-e.requestStart,domComplete:e.domComplete-e.requestStart,fullyLoaded:e.loadEventEnd-e.requestStart})}return null}JR(){if(!this.QR())return null;let t=this.tr.getEntriesByType("navigation");return t&&t.length>0?t[0]:null}py(t){let e={};for(let i in t){let n=t[i];if(n<0)e[i]="0";else{if(n>this.XR||!Number.isFinite(n))return null;e[i]=Math.round(n).toString()}}return csArray.prototype.every.call(Object.values(e),i=>i==="0")?null:e}QR(){return typeof this.tr=="object"&&typeof this.tr.getEntriesByType=="function"}}return s})();var ES="csAnalysisEventsPersisted",nc="v2/events",Gn=["trackEvent"];var SS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T,C){this.E=t,this.yt=e,this.N=i,this.wt=n,this.Gt=o,this.S=c,this.V=l,this._e=h,this.At=d,this.Ht=f,this.K=m,this.$t=y,this.tt=S,this.qt=T,this.Wt=C}init(){let t=new dS,e=this.Ht.create(`${this.E.getTrackerUri()}/${nc}`,"base64");this.Gr=this.aC(e),this.Ae=this.cC(t,this.Gr.getRecoveryStorage(),e),this.Ae.init(),this.K.addListener(this.Ae),this.At.addListener(this.Ae),this.S.register(Gn,i=>{if(!Yn(i))throw new Ot(Gn[0]);this.Ae.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Gr.start(),this.Ae.start(t)}onAfterNaturalPageView(){this.Ae.initStates()}onArtificialPageViewEnd(t){this.Ae.clearStates(!0),t&&(this.Ae.stop(),this.Gr.stop())}onAfterArtificialPageView(t){this.Ae.initStates(),t&&(this.Ae.start(),this.Gr.start()),this.Ae.collectInitialEvents()}onBeforeSessionRenewal(){this.Ae.clearStates(),this.Ae.stop(),this.Gr.stop()}onOptout(){this.Ae.stop(),this.Gr.stop()}cC(t,e,i){let n=new yS(window),o=new gS,c=aS(this.E,this.wt,this.$t,this.qt,this.Wt),l=[];this.E.collectSubmit||csArray.prototype.push.call(l,"submit");let h=new fS(c,this.wt,this.Gt,l),d=cS(this.E,this.wt,this.$t,this.qt,this.Wt),f=new pS(d,this._e),m=new mS,y=new vl,S,T,C,_=new El(`${this.E.getTrackerUri()}/${nc}`),A=new Ei(this.yt,this.N);return new iS(this.E,h,f,o,n,t,_,A,this.V,e,m,y,i,c,S,T,C)}aC(t){return new lS(new hS(ES),t)}}return s})(),vS=["startDataCollection","data-collection:start"],_S=["data-collection:stop"],wS=(()=>{class s{constructor(t,e){this.rs=t,this.S=e}init(){this.S.register(vS,()=>{this.rs.startDataCollection()}),this.S.register(_S,()=>{this.rs.stopDataCollection()})}}return s})(),un={fromSessionRenewal:!1,isRenewedVisitor:!1},AS=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.cs=i,this.nt=n,this.er=o,this.V=c,this.Ry=!1,this.Cy=0,this.Xu=!0,this.Iy=!1,this.Fs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=un)=>{l&&this.Fs||!this.Ry?this.lC(l,h):this.hC()}}isDataCollectionStarted(){return this.Fs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=un){this.uC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.Xu=!1}allowStartDataCollection({fromSessionRenewal:t}=un){this.Xu=!0,this.Iy&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.Fs&&(this.Fs=!1,this.w.emitArtificialPageViewEnd(!0),this.er.stop())}hC(){this.Fs||(this.Fs=!0,this.V.isSessionValid()?(this.V.refreshSession(),this.er.start(Es.Artificial)):this.V.renewSession(!1))}uC(t,e){return e&&!this.Fs?!1:t?!0:this.E.startMode===fr.Manual?!1:!On(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}lC(t,e){if(this.cs.isActive()||(this.Iy=!0,this.dC()&&(this.Cy++,this.Cy<2))||!this.Xu||this.Fs&&!t)return;this.Ry=!0,this.Fs=!0,this.nt.init();let i=t?Es.Renewal:Es.Natural;this.er.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};ft.onDocumentLoaded(n)}dC(){return On(this.E)&&this.E.isCsSideloadingHeap()}}return s})();var TS=(()=>{class s{constructor(t){this.S=t}init(){this.qy(s.vI,Lc),this.qy(s._I,xc)}qy(t,e){this.S.register([t],(i,n)=>{!W(i)||!(W(n)||ee(n))||z.error(n,`${e}${i}`)})}}return s._I="logSnippetError",s.vI="logImplementationSnippetError",s})();var bS=(()=>{class s{constructor(){this.rd=ms.Natural}setPageViewType(t){this.rd=t}getPageViewType(){return this.rd}getRequestParameters(){return{pvt:this.rd}}}return s})();var RS=(()=>{class s{constructor(t,e){this.$t=t,this.E=e,this.Wy=!1}enableRecordingContext(t,e,i){this.Wy=!0,this.xr=t,this.C=e,this.no=i}getRecordingContext(){var t,e,i;if(!this.Wy)return{isRecording:!1,recordingStartTimestamp:0,etrState:Kt.ETR_OFF,etrStatus:zt.ETR_DISABLED,collectState:O.ANALYTICS_ONLY};let n=this.C.getSession();return{isRecording:this.xr.isRecording(),useAnonymization:this.$t.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.xr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.xr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.xr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF,etrStatus:this.no.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:O.ANALYTICS_ONLY}}}return s})(),_i=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var CS=(()=>{class s extends jt{constructor(t,e,i,n,o,c){super(),this.Ee=t,this.nt=e,this.Kt=i,this.mr=n,this.Jr=o,this.ot=c}onStart(){var t,e,i;this.Kt.start(),this.Ee.setMaskedElementSettings(this.nt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Ee.startIdentifier(),(e=this.mr)===null||e===void 0||e.start(),(i=this.Jr)===null||i===void 0||i.start()}onStop(){var t,e;this.Kt.stop(),this.Ee.stopIdentifier(),(t=this.mr)===null||t===void 0||t.stop(),(e=this.Jr)===null||e===void 0||e.stop()}}return s})(),IS=(()=>{class s{constructor(t,e,i,n,o,c){this.ot=t,this.nt=e,this.Xt=i,this.Kt=n,this.In=o,this.lt=c,this.Pn=ao(this.In)}getSensitiveStatus(){var t,e;return{started:this.Xt.isStarted,useAnonymization:this.ot.shouldUseAnonymization(),capturedElementSelector:this.Kt.getWhitelistedElementsSelector(),maskedElementSettings:this.nt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.lt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Xt.isStarted,i=this.ot.shouldUseAnonymization();return e?M.isMaskedElement(t)||M.isMaskedElementChild(t)?$t.MASKED:tm.shouldEncrypt(t)?$t.ENCRYPTED:Ye.isEditableNode(t)?$t.ANONYMIZED:i?fe.isWhitelistedElement(t)?$t.CAPTURED:$t.ANONYMIZED:$t.CAPTURED:$t.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.Xt.isStarted)return $t.ANONYMIZED;let i=this.ot.shouldUseAnonymization();return M.isMaskedAttribute(t,e)?$t.MASKED:i?qs(t)||fe.isWhitelistedElement(t)||this.Pn.has(e)?$t.CAPTURED:$t.ANONYMIZED:$t.CAPTURED}}return s})(),PS=(()=>{class s{constructor(t){this.V=t}onAfterVisitorRenewal(){this.V.renewSession(!0)}}return s})(),OS={MATCHED:{[O.ANALYTICS_ONLY]:O.ANALYTICS_ONLY_RULES_TARGETING,[O.RECORDING_GLOBAL_SAMPLING]:O.RECORDING_RULES_TARGETING,[O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:O.RECORDING_RULES_TARGETING},MISSED:{[O.ANALYTICS_ONLY]:O.ANALYTICS_ONLY_RULES_TARGETING,[O.RECORDING_GLOBAL_SAMPLING]:O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},dn=(()=>{let s;return function(r){let t;function e(y){t=y}r.setLogger=e;function i(y,S){for(let T of y)if(o(T,S))return!0;return!1}r.isUrlMatching=i;function n(y,S){if(W(S)){for(let T of y)if(o(T,S))return!0}else if(nr(S)){for(let T of y)if(o(T,csString(S)))return!0}return!1}r.isMatching=n;function o(y,S){let T=c(y,S);return y.negate?!T:T}function c(y,S){switch(y.rule_type==="date"&&(y.match_operation==="less_than"||y.match_operation==="greater_than")&&(S=(new csDate(S).valueOf()/1e3).toFixed(0)),y.match_operation){case"exact":switch(y.rule_type){case"string":return W(y.pattern)?csString.prototype.toLowerCase.call(S)===csString.prototype.toLowerCase.call(y.pattern):!1;case"boolean":return S===y.pattern||S===csString(y.pattern);case"number":return Nt(S)?Number(S)===Number(y.pattern):!1;default:return S===y.pattern}case"starts_with":return W(y.pattern)?csString.prototype.indexOf.call(S,y.pattern)===0:!1;case"ends_with":return W(y.pattern)?Ai(S,y.pattern):!1;case"contains":return W(y.pattern)?csString.prototype.indexOf.call(S,y.pattern)!==-1:!1;case"regex":if(!W(y.pattern))return!1;try{return new csRegExp(y.pattern).test(S)}catch(T){return t==null||t.warn(`targeting.matchOperation.regex invalid ${T==null?void 0:T.message}`),!1}case"simple":return W(y.pattern)?m(S)===m(y.pattern):!1;case"greater_than":return Number(S)>Number(y.pattern);case"less_than":return Number(S)<Number(y.pattern);case"exact_date":{let T=Number(y.pattern);if(!Xt(T))return!1;let C=new csDate(T*1e3);return new csDate(S).toDateString()===C.toDateString()}case"exact_days_ago":return l(y,S);case"more_than_days_ago":return h(y,S);case"less_than_days_ago":return d(y,S);case"unknown":return f(S);default:return t==null||t.warn(`targeting.matchOperation.regex not managed operation ${y.match_operation}`),!1}}function l(y,S){let T=new csDate,C=T.setDate(T.getDate()-Number(y.pattern)),_=new csDate(C);return new csDate(S).toDateString()===_.toDateString()}function h(y,S){let T=Number(y.pattern);if(!Xt(T))return!1;let C=Number(T)+1,_=new csDate,A=new csDate(_);return A.setDate(_.getDate()-C),new csDate(S).getTime()<=A.getTime()}function d(y,S){let T=Number(y.pattern);if(!Xt(T))return!1;if(T===0)return l(y,S);let C=new csDate,_=new csDate(C);return _.setDate(C.getDate()-T),new csDate(S).getTime()>=_.getTime()}function f(y){return Nt(y)?W(y)?csString.prototype.trim.call(y)==="":nr(y)?y===!0:Xt(y)?y!==0:!1:!0}function m(y){let S=Ut(y,"http://")||Ut(y,"https://")?y:`https://${y}`,T=Oc(S);return T!==null?csString.prototype.replace.call(T.host,/^www./,""):y}}(s||(s={})),s})(),NS=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),fn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===NS.URL},MS=(()=>{class s{constructor(t){this.Xy=new co,this.Ky=[],this.Jy=[],dn.setLogger(t)}setTargetingRules(t){this.Xy.setRegexRules(csArray.prototype.filter.call(t,fn.isURL));for(let e of t)fn.isLegacyURL(e)?csArray.prototype.push.call(this.Ky,e):fn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Jy,e)}matchUrl(t){return dn.isUrlMatching(this.Ky,t)||this.Xy.evaluateUrl(t)}matchTrigger(t){return dn.isMatching(this.Jy,t)}}return s})(),DS=(()=>{class s extends jt{constructor(t,e,i){super(),this.Qy=t,this.cd=e,this.R=i}init(){this.ld=new MS(z),this.Qy&&this.ld.setTargetingRules(this.Qy)}onStart(){}checkTargetingRules(){let t=this.R.getAnonymizedUrl();this.cd(this.ud(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.cd(this.ud(t,"url"))}onExternalEvent(t){this.isStarted&&this.cd(this.ud(t.name,"trigger"))}ud(t,e){var i,n;return e==="url"&&W(t)&&(!((i=this.ld)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.ld)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),kS=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.Ct=i,this.K=n,this.R=o,this.C=c,this.rs=l,this.nr=!1,this.Uo=(h=!1)=>{this.nr&&this.E.isSMB&&this.rs.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===fr.Automatic&&this.rs.startDataCollection({fromSessionRenewal:h})},this.CI=h=>{this.nr||(this.nr=h,this.Zy(),this.Uo())}}init(){this.E.isSMB&&this.rs.disableStartDataCollection(),this.Qr=new DS(this.E.recordTargetingRules,this.CI,this.R),this.K.addListener(this.Qr),this.Qr.init()}start(){this.Qr.start()}stop(){this.Qr.stop()}maybeStartDataCollection(t){if(t){this.Uo(t);return}if(this.II()){this.nr=!0,this.Uo(),this.stop();return}this.Qr.checkTargetingRules()}onAfterArtificialPageView(){this.Qr.checkTargetingRules()}onCollectStateChange(t){if(this.tE(t)){this.stop();return}let e=t===O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.nr&&e||csSetTimeout(()=>this.eE(t),0)}onStartTracking(){this.Zy()}II(){let t=this.C.getSession();return!!(t&&this.tE(t.collectState))}tE(t){return t===O.RECORDING_RULES_TARGETING||t===O.ANALYTICS_ONLY_RULES_TARGETING}Zy(){var t;if(this.nr){let e=this.C.getSession(),i=this.Ct.getInitialCollectState();this.eE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.rs.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}eE(t){let e=OS[this.nr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,Kt.ETR_OFF)}}return s})(),xS=(()=>{class s{constructor(){this.sE=new Set,this.iE=[],this.dd=new Set,this.pd=[]}addUrlMaskingPattern(t){if(this.sE.has(t))return;this.sE.add(t);let e=ca(t);csArray.prototype.push.call(this.iE,e)}getUrlMaskingPatterns(){return this.iE}resetPartialUrlMaskingPatterns(){this.dd.clear(),this.pd=[]}addPartialUrlMaskingPattern(t){if(this.dd.has(t))return;this.dd.add(t);let e=ca(t);csArray.prototype.push.call(this.pd,e)}getPartialUrlMaskingPatterns(){return this.pd}}return s})(),LS=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.C=i,this.ls=N.now()}resetStartTime(){this.ls=N.now()}getSessionData(){let{projectId:t}=this.E,e=this.N.getVisitor();e==null&&z.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.C.getSession();o===null&&z.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:N.now()-this.ls}}}return s})(),VS=["clearSession"],US=["extendSession"];var jS=["getSessionData"],HS=["session:start:newVisitor"],BS=["session:clear:visitor"],FS=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.C=i,this.S=n}init(){this.gd=new LS(this.E,this.N,this.C),this.S.register(VS,()=>this.C.removeSession()),this.S.register(US,()=>this.C.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(jS,()=>this.gd.getSessionData(),{disableApplyPending:!0}),this.S.register(HS,()=>this.N.renewVisitor()),this.S.register(BS,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onAfterNaturalPageView(){this.gd.resetStartTime()}onAfterArtificialPageView(){this.gd.resetStartTime()}onOptout(){this.N.removeVisitor(),this.C.removeSession()}onCollectStateChange(t){this.C.updateCollectState(t)}}return s})(),$S=(()=>{class s{constructor(t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A,k,I,b,F,j,rt,gt,Ht,Oe,v,L,V,H,ht,Ct,ie,Ms,Ds,os,as){this.yt=t,this.Pc=e,this.de=i,this.N=n,this.C=o,this.V=c,this.Ts=l,this.w=h,this.S=d,this.ml=f,this.E=m,this.yl=y,this.cs=S,this.En=T,this.Pt=C,this.M=_,this.wt=A,this.Q=k,this.R=I,this.PI=b,this.K=F,this.At=j,this.Tt=rt,this.rE=gt,this.Yt=Ht,this.OI=Oe,this.D=v,this.Ht=L,this.O=V,this.gt=H,this.X=ht,this.Ct=Ct,this.nt=ie,this.We=Ms,this.ue=Ds,this.qt=os,this.Wt=as,this.NI=re=>{this.w.emitBeforeSessionRenewal(),this.Zr(!0,re),this.w.emitAfterSessionRenewal()},this.MI=re=>{this.w.emitBeforeSessionRenewal(),this.Ct.refreshQuota(ne=>{ne!==O.QUOTA_REACHED&&(this.Zr(!0,re),this.w.emitAfterSessionRenewal())})}}start(){if(this.yl.init(),this.cs.init(),this.cs.isActive())return;let t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A,k;this.D.schedule(()=>{T=new PS(this.V),m=new JE(this.wt),y=new DE(()=>{}),C=new kE,k=new YE;let I=new CS(y,this.nt,C,A,k,this.md());S=new IS(this.md(),this.nt,I,C,this.E.whitelistedAttributes,_);let b=new jp(this.w,this.S,this.nt,I,C,_,A);b.init(),this.w.addListener(b),t=new SS(this.E,this.Pc,this.N,this.wt,m,this.S,this.V,new KE(z),this.At,this.Ht,this.K,S,this.tt,this.qt,this.Wt),e=new Gp(this.S,this.C,this.E,this.yt,this.de,this.M),f=new RS(S,this.E);let F=null,j=new bS;i=new Wy(this.N,this.C,this.S,this.At,F,this.E,j,f),n=new Zp(this.E,this.Pc,this.N,this.S,this.M,this.V,this.R);let rt,gt;this.er=new xp(this.E,this.S,this.w,this.Pc,this.N,this.C,this.Ts,this.Pt,this.Tt,this.R,this.Yt,j,this.K,this.Ht,this.We,rt,this.qt,this.Wt,gt),this.nE=new FS(this.E,this.N,this.C,this.S),this.rs=new AS(this.E,this.w,this.cs,this.nt,this.er,this.V),new wS(this.rs,this.S).init(),c=new ig(this.E,this.S,this.de,this.Pc,this.K),l=new TS(this.S),h=new ZE}),this.D.schedule(()=>{this.En.init()}),this.D.schedule(()=>{i.init()}),this.D.schedule(()=>{e.init()}),this.D.schedule(()=>{n.init()}),this.D.schedule(()=>{this.rE.init()}),this.D.schedule(()=>{this.er.init()}),this.D.schedule(()=>{this.nE.init()}),this.D.schedule(()=>{c.init()}),this.D.schedule(()=>{this.PI.init()}),this.D.schedule(()=>{l.init()}),this.D.schedule(()=>{h.init()}),this.D.schedule(()=>{this.OI.init()}),this.D.schedule(()=>{this.w.addListener(this.nE),this.w.addListener(this.ml),this.w.addListener(t),this.w.addListener(this.En),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.rE),this.w.addListener(this.er),this.w.addListener(c),this.w.addListener(e),this.w.addListener(h),this.w.addListener(T)}),_i.isRecordingSupported()&&this.D.schedule(()=>{let I=new Ly(f,this.C,this.E,this.yt,this.S,this.M,this.V,y,this.Je,this.mt,this.Le,this.bt,this.w,this.K,this.At,this.Yt,this.Ht,this.Q,this.Kn,this.md(),this.qr,_);I.init(),this.w.addListener(I),i.setRecordingService(I.recordingService)}),this.D.schedule(()=>{var I;let b,F}),this.D.schedule(()=>{t.init()}),this.D.schedule(()=>{this.E.isQuotaEnabled()?this.V.onSessionExpired(I=>{this.MI(I)}):this.V.onSessionExpired(I=>{this.NI(I)}),this.Zr()})}Zr(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.jo||(this.jo=new kS(this.E,this.w,this.Ct,this.K,this.R,this.C,this.rs),this.w.addListener(this.jo),this.jo.init(),this.jo.start(),this.S.start(),(i=this.tt)===null||i===void 0||i.start()),this.jo.maybeStartDataCollection(t);return}this.S.start(),(n=this.tt)===null||n===void 0||n.start(),this.rs.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}md(){if(this.ot)return this.ot;let t=new co;return this.ot=new ME(this.E,this.R,t,this.Pt),this.ot.init(),this.ot.shouldUseAnonymization()&&U.counters.pageAnonymisation.count("anonymized-on-start"),this.ot}}return s})();var Ll=(()=>{class s{constructor(t){this.configuration=t}}return s})(),zS=(()=>{class s extends Ll{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.yd=i,this.R=n,this.Ed=o,this.Sd=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Sd=!0,this.Ed.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===O.QUOTA_REACHED||t.collectState===O.RECORDING_RULES_TARGETING||t.collectState===O.RECORDING_TEMPORARILY)&&(t.collectState=O.ANALYTICS_ONLY),t}computeInitialCollectState(){return Qe.isReplayConsentNeeded(this.configuration)?O.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Oc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Oc()}Oc(){if(!_i.isRecordingSupported())return O.ANALYTICS_ONLY;let t=O.ANALYTICS_ONLY,e=Kt.ETR_OFF;return ws.percentage()<this.configuration.replayRecordingRate||this.yd.isForceReplayRecorded()?t=O.RECORDING_GLOBAL_SAMPLING:this.Sd&&this.Ed.evaluateUrl(this.R.getAnonymizedUrl())&&(t=O.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Kt.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!_i.isRecordingSupported())return O.ANALYTICS_ONLY;if(Qe.isRecordingBlockedByConsent(t))return t.collectState===O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:O.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===O.RECORDING_GLOBAL_SAMPLING)return O.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF;return this.Sd&&this.Ed.evaluateUrl(this.R.getAnonymizedUrl())?(this.w.emitCollectStateChange(O.RECORDING_URL_SAMPLING,e),O.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(O.ANALYTICS_ONLY,e),O.ANALYTICS_ONLY)}isReplayRecorded(t){return Qe.isRecordingBlockedByConsent(t)?!1:t.collectState===O.RECORDING_TEMPORARILY||t.collectState===O.RECORDING_GLOBAL_SAMPLING||t.collectState===O.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return O.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return O.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),te="_cs_s",qn=18e5,pn=".",GS=13,er=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),qS=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.X=i,this.ce=null,this.vd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Xc(e):null}getRawSession(t){if(t){let d=this._d();return Pn(d)}let{sessionString:e,status:i}=this.DI(),n=Pn(e);if(i!==er.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this._d();if(!o)return null;let c=csString.prototype.split.call(o,pn);if(!s.oE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.kI(h),n}onCookieToSet(t){this.Ri=t}onCookieToRemove(t){this.Ci=t}set(t,e=qn){var i;let n=N.now()+e,o=lp(t);o+=`${pn}${n}`,this.xI(o,n),this.E.cookielessTrackingEnabled?this.X.setItem(te,o):(this.O.set(te,o,e),(i=this.Ri)===null||i===void 0||i.call(this,te,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.X.removeItem(te):(this.O.delete(te),(t=this.Ci)===null||t===void 0||t.call(this,te)),this.LI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.O.delete(te,_r.CURRENT_DOMAIN):this.O.delete(te,this.O.getRootDomain()),this.set(t))}isValid(t){return t!==null&&fo(t)}xI(t,e){this.ce={sessionString:t,expires:e}}DI(){return this.ce?this.ce&&N.now()<=this.ce.expires?{sessionString:this.ce.sessionString,status:er.FOUND}:{sessionString:this.ce.sessionString,status:er.EXPIRED}:{sessionString:this._d(),status:er.NOT_FOUND}}LI(){this.ce=null}kI(t){this.ce&&(this.ce.expires=t,this.vd=!0)}isCacheRefreshed(){return this.vd}resetCacheRefreshed(){this.vd=!1}_d(){if(this.E.cookielessTrackingEnabled){let e=this.X.getItem(te);return!e||this.aE(e)?null:e}let t=this.O.get(te);return!t||this.aE(t)?null:t}aE(t){let e=csString.prototype.split.call(t,pn);if(!s.oE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&N.now()>i}static oE(t){return t[t.length-1].length===GS}}return s})(),WS=(()=>{class s extends Ll{constructor(t,e,i){super(t),this.configuration=t,this.Ho=e,this.w=i,this.VI=O.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.cE=t,this.Bo=void 0,this.UI()}init(t){this.jI();let e=pt.get(te);if(e!==null&&fo(e)){let i=hp(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==O.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==O.QUOTA_REACHED}computeInitialCollectState(t){return this.Bo?(this.w.emitCollectStateChange(this.Bo,this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF),this.Bo):(z.warn("Quota file error computeInitialCollectState() called before quota answered"),O.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===O.QUOTA_REACHED?O.QUOTA_REACHED:!_i.isRecordingSupported()&&this.isReplayRecorded(t)?O.ANALYTICS_ONLY:t.collectState===O.RECORDING_RULES_TARGETING?O.RECORDING_RULES_TARGETING:t.collectState===O.ANALYTICS_ONLY_RULES_TARGETING?O.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?O.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===O.RECORDING_GLOBAL_SAMPLING?O.RECORDING_GLOBAL_SAMPLING:O.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===O.RECORDING_GLOBAL_SAMPLING||t.collectState===O.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Bo||O.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return O.ANALYTICS_ONLY}Fo(t){this.Bo=t,this.cE&&this.cE(t)}jI(){this.Ho.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Ho.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Ho.onLoad(t=>this.quotaFileHandler(t))}UI(){this.Ho.isInProgress()||this.Ho.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.HI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;z.warn(e),this.Fo(this.VI)}HI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&ws.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?_i.isRecordingSupported()?this.Fo(O.RECORDING_GLOBAL_SAMPLING):this.Fo(O.ANALYTICS_ONLY):e&&!i?this.Fo(O.ANALYTICS_ONLY):this.Fo(O.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return O.ANALYTICS_ONLY}}return B([x("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),B([x("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var YS=(()=>{class s{constructor(t,e,i,n,o){this.N=t,this.C=e,this.Es=i,this.Tt=n,this.E=o}get(){return{exclusion:this.Es.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.C.getSession(),cvars:this.Tt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Es.exclude(this.E),this.N.removeVisitor(),this.C.removeSession(),this.Tt.removeCustomVariablesSession()}include(t){this.Es.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.C.setSession(t.session):this.C.removeSession(),t.cvars?this.Tt.setCustomVariableSession(t.cvars):this.Tt.removeCustomVariablesSession()}}return s})();var To=60*1e3,XS=60*To,KS=4*XS-To,Hs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),JS=(()=>{class s{constructor(t,e,i,n,o){this.be=t,this.Ct=e,this.w=i,this.qI=n,this.WI=o,this.$o=null,this.Ad=0,this.zo=Hs.NO}setDynamicVariablesService(t){this.YI=t}createOrUpdateSession(){this.Td(),this.XI=N.now(),this.Ad=0;let t=this.uE();t===null?(t=this.KI(),this.Oc(t),this.w.emitSessionCreated()):(t=this.Ct.sanitizeSessionCollectState(t),this.JI(t),t.collectState=this.Ct.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.Ct.getInitialCollectState(),t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.zo=Hs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.zo=Hs.WITHDRAWN}Oc(t){this.zo===Hs.WITHDRAWN?(t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)):this.zo===Hs.GRANTED?t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.Ct.computeInitialCollectState(t),this.zo=Hs.NO}KI(){return{pageNumber:1,collectState:this.Ct.getInitialCollectState(),replayConsent:this.qI?In.NOT_EXPRESSED:In.UNNECESSARY,etrStatus:zt.ETR_NOT_SAVED_SESSION}}JI(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.Ct.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===O.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.be.get()}uE(){return this.be.get(!0)}doesSessionExist(){return this.be.get()!==null}setSession(t){this.be.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.uE();t&&this.setSession(t)}removeSession(){this.be.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.QI(t);return this.ZI(e)}ZI(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(uo(i)){let n=cp[i]||i;csArray.prototype.push.call(e,n)}}),e}QI(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.WI&&csArray.prototype.push.call(e,O.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.be.getRawSession();return this.be.isValid(t)}handleSubdomainChange(){this.be.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.be.isCacheRefreshed();return e&&t&&this.be.resetCacheRefreshed(),e}extendSessionPeriodically(){this.$o||this.dE()}extendSession(){let t=this.getSession();return t===null?(z.warn("extendSession is trying to extend an expired session"),this.Td(),!1):(this.setSession(t),!0)}dE(){if(this.tP()){this.Td();return}this.extendSession()&&(this.eP(),this.sP())}sP(){this.$o=window.csSetTimeout(()=>{this.dE()},qn-To)}tP(){return KS-(N.now()+qn-this.XI)<0}Td(){this.$o&&(window.csClearTimeout(this.$o),this.$o=null)}eP(){this.Ad+=1,this.YI.trackDynamicVariable("session_expiry_update",this.Ad)}}return s})();var QS=(()=>{class s{constructor(t,e,i){this.N=t,this.C=e,this.lP=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.C.handleSubdomainChange(),this.lP.handleSubdomainChange())}}return s})(),gn="_cs_inc",ZS=(()=>{class s{constructor(t,e){this.Ut=t,this.O=e}isForceIncluded(){return this.hP()||this.uP()}isForceReplayRecorded(){return this.dP(O.RECORDING_GLOBAL_SAMPLING)}hP(){return this.O.get(gn)!==null}dP(t){return this.O.get(gn)===t}uP(){return csString.prototype.indexOf.call(this.Ut.href,gn)>0}}return s})(),tv=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.Es=i}clear(){this.fP()&&(this.pE=this.N.getVisitor(),this.N.removeVisitor()),this.pP()&&this.Es.removeExclusion()}fP(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}pP(){return this.Es.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.pE&&this.N.setVisitor(this.pE)}}return s})(),ev=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.N=e,this.Es=i,this.gE=n,this.gP=o,this.mP=c,this.yP=l,this.yd=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.yP)===null||e===void 0||e.start(()=>this.Cd(t)):(i=this.mP)===null||i===void 0||i.applyUpToDate(()=>this.Cd(t)):this.Cd(t)}Cd(t){this.gP.handle(),this.gE.clear(),this.EP()?(this.gE.restoreClearedVisitor(),t(!0)):(this.Es.exclude(this.E),t(!1))}EP(){let t=ws.boolean(this.E.sampleRate);return this.yd.isForceIncluded()||!this.Es.isExcluded()&&this.N.doesVisitorExist()||!this.Es.isExcluded()&&t}}return s})(),sv=(()=>{class s{constructor(t,e,i,n){this.E=t,this.ut=e,this.w=i,this.C=n,this.SP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.vP(),(t=this.C)===null||t===void 0||t.removeSession()),this._P(e),this.setVisitor(e)}vP(){return{id:xE.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Wo(),lastVisitTimestamp:0,hitTimestamp:0,expires:N.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}_P(t){let e=Wo();this.C&&!this.C.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.mE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ut.get()}setVisitor(t){this.ut.set(t)}doesVisitorExist(){return this.ut.get()!==null}resetVisitor(){this.yE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.ut.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.ut.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.mE===void 0?!1:t.visitsCount!==this.mE}wP(){return!Z(this.EE)||N.now()-this.EE>this.SP}renewVisitor(){this.wP()?(this.EE=N.now(),this.yE(),this.w.emitAfterVisitorRenewal()):z.warn("session:start:newVisitor is trying to renew visitor under time limit")}yE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),le="_cs_id",iv=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.X=i}onCookieToSet(t){this.Ri=t}onCookieToRemove(t){this.Ci=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.X.getItem(le):t=this.O.get(le),t?(rp(t)||z.warn(`Invalid visitor string: ${t}`),sp(t)):null}set(t){var e;let i=ip(t);if(this.E.cookielessTrackingEnabled)this.X.setItem(le,i);else{let n=new csDate(t.expires);this.O.set(le,i,n),(e=this.Ri)===null||e===void 0||e.call(this,le,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.X.removeItem(le):(this.O.delete(le),(t=this.Ci)===null||t===void 0||t.call(this,le))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.O.delete(le,_r.CURRENT_DOMAIN):this.O.delete(le,this.O.getRootDomain()),this.set(t))}}return s})(),rv=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.bi=e,this.pr=i,this.D=n,this.w=o,this.X=c}initWithQuota(){if(!this.E.collectionEnabled){this.SE(),tc()&&this.vE();return}let t=new EE(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.Ct=new WS(this.E,t,this.w),this.Ct.init((e,i)=>{e?this.init():this.SE(),tc(i)?this.vE():VE(i)&&(Za.set(mr.HJ_DUAL_COLLECT,!1),U.counters.trackedFeatures.count("dual-collection-csq-replay"))})}vE(){Za.set(mr.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent(LE)),U.counters.trackedFeatures.count("dual-collection-hj-replay")}AP(){this.D.schedule(()=>{var t;this.M=new Ps,this.Q=new Rf(this.M),this.R=new jE(window.location,this.Q),this.O=new _r(this.E,this.R,this.bi),this.O.init(),this.gt=new SE;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new zf,this.w.addListener(e)),this.S=new Wf([qf.UXA],e),this.K=new Yf,this.nt=new zE(e),this.Pt=new OE(this.E,new PE(this.E,this.O,this.gt),this.w)})}SE(){}init(){ai.isSupported()&&ai.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,d,f,m,y,S,T,C,_,A,k,I,b,F,j,rt,gt,Ht,Oe,v,L;this.AP();let V=new aE;this.w.addListener(V),this.D.schedule(()=>{m=new ZS(window.location,this.O),new wE().init(),y=Pl.create(),f=new Ol(y),this.Ct===void 0&&(this.Ct=new zS(this.E,this.w,m,this.R,new co),this.Ct.init())}),this.D.schedule(()=>{t=new qS(this.E,this.O,this.X),e=new JS(t,this.Ct,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new iv(this.E,this.O,this.X),n=new sv(this.E,i,this.w,e),this.pr.setContext(n,e)}),this.D.schedule(()=>{c=new QS(n,e,this.Pt),l=new dp(this.E,this.O,this.X),h=new mp(window.location,l),d=new gp(h),T=new tv(this.E,n,h),gt=new tp(ts,this.E);let H;I=new Vf(gt,this.E.isChild,H),b=new Uf(gt),F=new jf(gt),j=new Bf,rt=new Lf(I,b,F,j),C=new Gf(this.S,rt),_=new _p(this.R),A=new Ep(_,this.S);let ht=new fp(this.E,this.O,this.X);Ht=new NE(this.M,ht),k=new Lp(this.S,Ht);let Ct=new YS(n,e,h,Ht,this.E)}),this.D.schedule(()=>{new ev(this.E,n,h,T,c,S,o,m).compute(ht=>{this.D.schedule(async()=>{var Ct,ie,Ms,Ds;C.init();let os=new IE(this.E,this.S,this.Pt,e,this.w),as=new Ky(this.E,this.O,this.gt),re=new Jy(this.w,window.location,as),ne=new Xy(this.S,re),Tt=new HE(this.S,this.E),qt=new UE(this.Q,new xS),Di=new WE(e,n),Cr,Ir,ki,Pr=new sc(this.E,n,e),xi=new sc(this.E,n,e,Ir);ht?(this.w.emitInitTracking(),new $S(Pr,xi,y,n,e,Di,qt,this.w,this.S,C,this.E,ne,re,os,this.Pt,this.M,gt,this.Q,this.R,Tt,this.K,rt,Ht,k,_,A,this.D,f,this.O,this.gt,this.X,this.Ct,this.nt,ki,Cr,v,L).start()):new pp(this.w,this.S,C,ne,re,d,os).start()})})})}}return s})(),ys=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(A){let k=A.source,I=A.data;if(c(I)){let b=()=>{let F=n(t,I);m(F,()=>k.postMessage("csBundleLoaded",A.origin))};e=I.token,_(i.loadBundle),l(A.origin)&&b()}}};function n(A,k){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(A,"{version}",k.version),"{token}",k.token),"{domain}",k.domain)}function o(){return e}r.getToken=o;function c(A){return A&&A.type==="csBundleInjection"&&l(A.domain)&&d(A.version)&&h(A.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(A){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(A)||r.hjDomainRegex.test(A)}r.isAuthorizedDomain=l;function h(A){return/^[a-zA-Z0-9]+$/.test(A)}r.isAuthorizedToken=h;function d(A){return/^[a-zA-Z0-9\.]+$/.test(A)}r.isAuthorizedTagVersion=d;function f(){let A=window.opener||window.parent;return window!==A&&window.addEventListener}r.isActivable=f;function m(A,k){let I=document.createElement("script");I.type="text/javascript",I.async=!0,I.src=A,I.onload=k,I.charset="utf-8",document.head.appendChild(I)}r.addScript=m;function y(A){let k=document.createElement("link");k.rel="stylesheet",k.href=A,document.head.appendChild(k)}r.addStyle=y;function S(A){return`${A}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function T(){C(i.loadBundle)}r.waitForBundleInjection=T;function C(A){window.addEventListener("message",A,!1)}r.listen=C;function _(A){window.removeEventListener("message",A,!1)}r.removeListener=_}(s||(s={})),s})(),oc="_hp_ved",nv=18e5,ov="/js/ved.js",av="/css/ved.css",cv="/js/ved.css",lv=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),hv=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var mn=(()=>{let s;return function(r){let t=!1,e;function i(m){return e+m}function n(){let m=[i(av),i(cv)];csArray.prototype.forEach.call(m,y=>{ys.addStyle(y)})}function o(m){let y=new csRegExp("(^|;)[ ]*"+m+"=([^;]*)"),S=y.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(m,y,S){let T=encodeURIComponent(m)+"="+encodeURIComponent(y),C=new csDate;C.setTime(C.getTime()+S);let _=T+"; expires="+C.toUTCString()+"; path=/";document.cookie=_}function l(){c(oc,"on",nv)}function h(){return o(oc)==="on"}r.isVLCookieEnabled=h;function d(m){window.heapV=Object.assign({},window.heap,{source:m==null?void 0:m.source,uri:e,loadArgs:m==null?void 0:m.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=d;function f(m,y){var S;if(e=m,y){let T={type:lv.StatusUpdate,value:hv.ReceivedInitMessage},C={targetOrigin:y==null?void 0:y.origin};(S=y==null?void 0:y.source)===null||S===void 0||S.postMessage(T,C)}t||(t=!0,l(),d(y),window.heapV&&(ys.addScript(i(ov)),n()))}r.init=f}(s||(s={})),s})(),uv=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ys.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(b){var F;b.origin===l&&((F=b.data)===null||F===void 0?void 0:F.message)==="init"&&b.source&&(mn.init(l,b),A(h.initHeapVisualLabeler))},ping(b){typeof b.data=="string"&&b.data==="ping"&&m(b.origin)&&(c=b.origin,o=ys.hjDomainRegex.test(b.origin)?i:b.origin,A(h.ping),_(h.insertMessageScript),y(ys.addCacheBusting("utils.js")))},insertMessageScript:k(b=>{typeof b.data=="string"&&b.data!=="ping"&&(A(h.insertMessageScript),y(b.data))})};function d(){return ys.getToken()}r.getToken=d;function f(){return window!==t&&window.addEventListener}r.isActivable=f;function m(b){return csArray.prototype.some.call(n,F=>F.test(b))}r.isAuthorizedDomain=m;function y(b,F){let j=document.createElement("script");j.type="text/javascript",j.async=!0;let rt=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");j.src=`${rt}/${e}/${b}`,j.onload=F,j.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(j),S(b)}function S(b){csString.prototype.includes.call(b,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(b,"&mode=")[1])}function T(){_(h.ping),ys.waitForBundleInjection()}r.waitForConnection=T;function C(b){l=b,_(h.initHeapVisualLabeler),mn.isVLCookieEnabled()&&mn.init(l)}r.waitForHeapVisualLabeler=C;function _(b){window.addEventListener("message",b,!1)}r.listen=_;function A(b){window.removeEventListener("message",b,!1)}r.removeListener=A;function k(b){return function(F){F.origin===c&&b(F)}}r.secureListener=k;function I(b){c&&t.postMessage(b,c)}r.post=I}(s||(s={})),s})();var sr=window.CSFrameCommunication||uv,dv=(()=>{class s extends lo{constructor(t){super(),this.D=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.D.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.D.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){z.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return B([Mt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var fv=(()=>{class s{constructor(t,e,i){this.E=t,this.It=e,this.pr=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new BE,l=new wl(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new vf(this.It,this.E);h.init();let d=new wf(this.E,h);if(this.It.isTopWindowTracker()&&d.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&z.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){z.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Ef();let m=new dv(l),y=new rv(this.E,h,this.pr,l,m,c);this.E.isQuotaEnabled()?y.initWithQuota():y.init()}let f=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(m){return M.isMaskedElement(m)||M.isMaskedElementChild(m)},isAttributeSensitive(m,y){return M.isMaskedAttribute(m,y)},getSensitiveAttributes(m){return pc(m.attributes,y=>M.isMaskedAttribute(m,y.name))}},Console:{warn(m){f&&console.warn("cs.tracking.warning",m)},error(m){f&&console.error("cs.tracking.error",m)}},Version:Nc},window.CSFrameCommunication||(window.CSFrameCommunication=sr,sr.isActivable()&&sr.waitForConnection(),this.E.isCsCrosswritingHeap()&&sr.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return B([Mt("main.start"),x("main.start")],s.prototype,"start",null),s})();function pv(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),U.counters.availableFeatures.set(s)})}var gv=(()=>{class s{constructor(t,e,i){this.Y=t,this.M=e,this.RO=i,this.St=[],this.CO=oo().v,pv()}flush(){this.St.length!==0&&(this.Y.send({m:csArray.prototype.map.call(this.St,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.RO,v:this.CO}),this.St=[])}push(t){csArray.prototype.push.call(this.St,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,B([Ar({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function mv(s,r){let t=s.validationRate/10,e=ws.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Pl.create(r.isTopWindowTracker()),l=new Ol(o).create(s.getMetricsUri(),void 0,void 0,!0),h=new Ps,d=new gv(l,h,s.projectId);U.setService(d)}catch(o){z.warn(`Error initializing metrics: ${o.message}`)}}function yv(){var s;Tu();let r=new gf(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new vd(window,r);t.init();let e=new bd;if(au(z),yd((n,o)=>Ie(o,[Qt.EventListener,n])),md((n,o)=>Ie(o,[Qt.MonkeyPatch,n])),Ed(),z.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new Kd(r,e);z.setStrategy(n)}else if(t.isInWebViewContext()){let n=new Zd;z.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Cs(window,"MutationObserver")),dd(),mv(r,t);try{t.reportInitErrors()}catch{}new fv(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Sd(yv)}catch{}});})();

// signature-d392351bbaa2e9be05b9a113147f4ebf24a6194bc1356e83600565fddf7ae4c0